YUI.add("tictac-options",function(a){"use strict";function b(b,c){return a.Tictac.base.getAssetURL(b,"tictac-options",c)}var c=[],d=!1;a.namespace("Tictac").options={loader:function(b){var e,f=a.Tictac.base,g=["options-view","options-filters-view","options-viewing-email-view","options-vacation-response-view","options-writing-email-view","options-block-senders-view","options-security-view","options-filters-model","options-filter-model","tictac-base-stats","options-accounts-view-imap","common-utils-performance"],h=function(a){var d,e,g=a.Tictac.options,h=new f.Stats({name:"options",yamas:!0});for(g.Stats=h,g.origin=b.origin,g.Perf=a.common.Utils.perf,e=window.optionsView=new g.OptionsView({limitToViewport:!0,movable:!0,focusNodeSelector:".nav ul a",id:b.view,subView:b.subView}),h.stat("launch_"+(b.view||"accounts")),d=0;d<c.length;d++)g.OptionsView.registerView(c[d]);e.render(),e.show(),e.on("hide",function(){e.destroy(),e=null,window.optionsView=null})};return d||(e=f.getTictacVersion("options"),a.Tictac.options.loadModuleDefs(e.filter),d=!0),b=b||{},b.id=b.id||b.view,window.optionsView?void window.optionsView.switchToView(b):void YUI().use(g,h)},loadModuleDefs:function(c){function d(b){return a.Tictac.base.isRTL?b.replace(/\.css$/,"_bidi.css"):b}var e=b("js/"),f=window.NeoConfig?window.NeoConfig.lang:"en-US",g=a.common.Utils.features.enabled("deaV3"),h=b("css/");c=c||"min",a.Tictac.base.defineModuleGroup("options",{filter:c,modules:{"tictac-options-strings":{path:e+"strings/lang_"+f+"-min.js"},"tictac-options-rollups":{path:e+"tictac-options-rollups_"+f+"-min.js",requires:["handlebars-base"]},"options-utils":{path:e+"utils-min.js",requires:["io","json","tictac-base","tictac-options-strings","tictac-base-mail-io","tictac-base-utils","tictac-base-batch-transport","options-utils-old","mail-common-utils-features","tictac-base-mailutils"]},"options-view":{path:e+"optionsview-min.js",requires:["stylesheet","tictac-base-dialogview","tictac-options-rollups","options-css","tictac-options-strings","options-utils","tictac-base-viewutils","mail-common-utils-features"]},"options-bizmail-admin-view":{path:e+"bizmailadminview-min.js",requires:["tictac-options-rollups","options-view","tictac-options-strings","tictac-base-utils"]},"options-accounts-view-imap":{path:e+"accountsviewimap-min.js",requires:["tictac-options-strings","tictac-options-rollups","options-view","options-accounts-model-imap","tictac-base-viewutils","options-accounts-imap-css","options-accounts-css","options-utils","tictac-base-utils","tictac-base-richtexteditor","tictac-base-mailutils","options-utils-mailchecker","mail-ui-folder-utils","mail-ui-mailoptions-ult"]},"options-accounts-model-imap":{path:e+"accountsmodelimap-min.js",requires:["tictac-base-model","options-utils","array-extras","mail-common-utils-settings"]},"options-block-senders-view":{path:e+"blocksendersview-min.js",requires:["tictac-options-strings","tictac-options-rollups","tictac-base-viewutils","tictac-base-utils","options-view","options-blocksenders-model","options-blockedaddresses-css"]},"options-writing-email-view":{path:e+"writingemailview-min.js",requires:["tictac-options-strings","tictac-options-rollups","options-view","options-writing-model","tictac-base-richtexteditor","options-writing-css","tictac-base-viewutils","tictac-base-mailutils"]},"options-writing-model":{path:e+"writingemailmodel-min.js",requires:["tictac-base-model","options-utils","tictac-options-strings","common-persist-user-data"]},"options-viewing-email-view":{path:e+"viewingemailview-min.js",requires:["tictac-options-strings","tictac-options-rollups","options-view","options-viewing-email-model","tictac-base-viewutils","mail-common-utils-features"]},"options-viewing-email-model":{path:e+"viewingemailmodel-min.js",requires:["tictac-base-model","options-utils","mail-common-utils-features"]},"options-vacation-response-view":{path:e+"vacationresponseview-min.js",requires:["tictac-options-strings","tictac-options-rollups","options-view","options-vacationresponse-model","tictac-base-viewutils","options-utils","tictac-base-viewutils"]},"options-filters-view":{path:e+"filtersview-min.js",requires:["tictac-options-strings","tictac-options-rollups","options-view","options-filters-css","options-css","escape","options-filters-model","options-filter-model","tictac-base-viewutils","tictac-base-utils","options-utils","common-net-session","mail-common-utils-features"]},"options-filters-model":{path:e+"filtersv3model-min.js",requires:["tictac-base-model","io","json","options-utils","mail-common-utils-settings","mail-ui-folder-utils"]},"options-filter-model":{path:e+"filterv3model-min.js",requires:["tictac-base-model","io","json","options-utils","options-filters-model","mail-common-utils-settings"]},"options-security-model":{path:e+(g?"securitymodelv3-min.js":"securitymodel-min.js"),requires:["tictac-base-model","io","json","options-utils","mail-common-utils-features"]},"options-blocksenders-model":{path:e+"blocksendersmodel-min.js",requires:["tictac-base-model","io","json","options-utils","options-accounts-model-imap"]},"options-vacationresponse-model":{path:e+"vacationresponsemodel-min.js",requires:["tictac-base-model","io","json","options-utils"]},"options-security-view":{path:e+"securityview-min.js",requires:["tictac-options-strings","tictac-options-rollups","options-view","tictac-base-viewutils","tictac-base-utils","mail-common-utils-features","options-utils","options-security-css","options-security-model","mail-ui-folder-utils"]},"options-utils-mailchecker":{path:e+"mailchecker-min.js"},"options-css":{type:"css",path:d(h+"options.css")},"options-filters-css":{type:"css",path:d(h+"filters.css")},"options-writing-css":{type:"css",path:d(h+"writing.css")},"options-blockedaddresses-css":{type:"css",path:d(h+"blockedaddresses.css")},"options-security-css":{type:"css",path:d(h+"security.css")},"options-accounts-css":{type:"css",path:d(h+"accounts.css")},"options-accounts-imap-css":{type:"css",path:d(h+"accountsImap.css")}}},"min"===c)},registerView:function(a){c.push(a)}}},"1.0.0",{requires:["tictac-base","mail-common-utils-features","common-utils-performance"]});var startTime=(new Date).getTime();YUI.add("tictac-mim",function(a){"use strict";function b(a,b){var c,d;f&&window.console&&(c=(new Date).getTime(),d=a,b&&(d+=" ~ "+b))}function c(a){h[a]=(new Date).getTime()-startTime,b("*** "+a),h.t4&&h.t_done&&!h.logged&&(yui.use("common-utils-stats",function(a){a.common.Utils.Stat.rtBeacon(978500106,h)}),h.logged=!0)}function d(b,c){return a.Tictac.base.getAssetURL(b,"tictac-mim",c)}var e,f,g=window.strings&&window.strings.str_cfg_tog_hasSMS,h={t1:startTime-(window.NeoGV?window.NeoGV.startTime:0)},i={mimLastActiveState:"never",mimUseTopContacts:void 0,mimSSANotificationSeen:!1,mimSSADefaultSet:!1,mimHomeCountryPref:"",mimLogoutPref:"prompt",mimEnableSounds:!0,mimShowOnlyBuddies:!1,mimCLCollapsedPref:!1,mimCLHeightPref:150,mimConvWinSizePref:{width:300,height:350},mimConvWinSizePrefOld:{width:330,height:350},mimConvWinPosPref:{right:200,bottom:20},mimBlockNonContacts:!1,"cg.pref.im.loginpref":0,mimPrefMigrated:!1,mimCustomPresenceArr:[],mimDefaultFontSize:"2",mimDefaultFontColor:"#000000",mimDefaultFontFamily:"Arial"},j={name:"mim",yamas:!0};window.JSON||(window.JSON=window.yui.JSON,window.__NOJSON__=!0),e=a.namespace("Tictac").mim={loader:function(){function d(a){function d(){m.get("presenceState")!==u.STATE.OFFLINE&&m.get("presenceState")!==u.STATE.PENDING&&(m.off("change:presenceState",d),yui.use("contacts-api-utils","contacts-api",function(b){function c(){function c(a){a.result&&0!==a.result.modified.length&&e.parseAddressBook(a.result.modified),a.result&&0!==a.result.created.length&&e.parseAddressBook(a.result.created),a.result&&0!==a.result.removed.length&&e.handleAddressBookContactRemoval(a.result.removed)}var d=b.contacts.utils.getContacts(),e=a.Messenger.Model.ContactList.getInstance();e.parseAddressBook(d),b.on("contacts:contactChanged",c)}b.contacts.utils.areContactsLoaded()?c():b.once("contacts:api:loaded",c)}))}function e(){m.quickLogout(),window.addEventListener?window.removeEventListener("unload",e,!1):window.detachEvent("onunload",e)}function f(){window.yui.fire("openOptions",{view:"messenger"})}var k,l=a.Messenger.Common.RequestManager,m=a.Messenger.Model.Session,n=a.Messenger.Model.ContactList,q=a.Messenger.Model.UserSettings,r=a.Messenger.Model.SystemSettings,s=a.Messenger.Common.Stats,t=a.Tictac.mim.strings,u=a.Messenger.Common.Constants,v=a.one(document.body),w=n.getInstance();if(c("t3"),a.Messenger.GlobalEvents=_.extend({},Backbone.Events),w.setDisplayNameTemplate(t.str_session_display_name_order),r.set("smsEnabled",g),r.set("isRTL",o),r.set("intl",window.NeoConfig.intl),r.set("lang",window.NeoConfig.lang),s.setStatsAPI(new a.Tictac.base.Stats(j)),l.setTransport(a.Messenger.Common.Transport),q.addKeys(i,a.Messenger.Common.MSDBUserPreferences),q.addKeys({mimEnableSSA:!0},a.Messenger.Common.SSPUserPreferences),window.NeoConfig.isCorpmail&&!q.getPreference("mimSSADefaultSet"))return q.setPreference("mimEnableSSA",!1),q.setPreference("mimSSADefaultSet",!0),void q.save();s.stat("storm_launch"),b("First MiM YUI.use call completed","main"),k=q.getPreference("cg.pref.im.loginpref"),h&&(l.crumb=h.crumb,!h.session||h.session.error||a.Messenger.urlParams&&a.Messenger.urlParams.coreServer?k===u.STATE.OFFLINE||"0"!==h.loggedIn&&"1"!==h.loggedInMpop||m.login({state:k,dormant:"0"===h.loggedIn?!1:!0}):(l.processLoginData(h.session),m.processLoginData(h.session),m.set("presenceState",k))),k===u.STATE.OFFLINE||h&&h.crumb&&"undefined"!=typeof h.loggedIn||l.getCrumb({checkStatus:!0,successCallback:function(a){(0===+a.loggedIn||1===+a.loggedInMpop)&&m.login({state:k,dormant:0===+a.loggedIn?!1:!0})}}),a.Messenger.View.ConversationListView.convListView=new a.Messenger.View.ConversationListView({collection:a.Messenger.Model.ConversationList,collectionCL:w,parent:a.one(v),minWidth:250,minHeight:250,movable:!0,resizable:!0,centerOnShow:!1}),a.Messenger.View.ConversationListView.convListView.render(),m.get("presenceState")!==u.STATE.OFFLINE?d():m.on("change:presenceState",d),window.mim=a.Messenger,window.addEventListener?window.addEventListener("unload",e,!1):window.attachEvent("onunload",e),yui.on("signout",function(){e()});var x=yui.one("#yucs");x&&x.delegate("mousedown",function(){e()},"a.yucs-signout"),a.Messenger.GlobalEvents.on(u.EVENTS.SHOW_OPTIONS,f),p.registerView({className:a.Messenger.View.OptionsView,id:"messenger",index:7})}var h,k,l=window.NeoConfig,m=a.Tictac.base,n=m.getTictacVersion("mim"),o=m.isRTL,p=a.namespace("Tictac").options,q=["messenger-xframetransport","messenger-contactlist","messenger-session","messenger-msdb-user-preferences","messenger-usersettings","messenger-conversationlistview","messenger-stats","messenger-ssp","tictac-base-stats","messenger-lozenge-css","messenger-constants","tictac-mim-strings","messenger-systemsettings","messenger-requestmanager","messenger-optionsview"];f=n.enablePerf,f&&(window.__mimStartTime=startTime),c("t2"),b("MiM Loader Invoked","main"),e.loadModuleDefs(n.filter,o),l&&(h="object"==typeof l.mim?l.mim:l.mimData),k=YUI(),k.namespace("Messenger").Neo={core:window.Neo,NeoConfig:l,yui:window.yui},k.Messenger.urlParams=n.urlParams,k.Messenger.logPerf=b,k.Messenger.logPerfStats=c,g&&q.push("messenger-convviewsmsplugin"),q.push("messenger-presenceplugin"),q.push("messenger-contactplugin"),q.push(function(a){try{d(a)}catch(b){a.log("Error occurred in MiM Loader yui.use callback","warn")}}),k.use.apply(k,q)},loadModuleDefs:function(b,c){function e(a){return c?a.replace(/\.css$/,"_bidi.css"):a}var f=d("js/"),g=d("css/"),h=window.NeoConfig?window.NeoConfig.lang:"en-US";b=b||"min",a.Tictac.base.defineModuleGroup("mim_core",{filter:b,modules:{"messenger-systemsettings":{path:f+"systemsettings-min.js",requires:["tictac-base-model"]},"messenger-constants":{path:f+"constants-min.js"},"messenger-utils":{path:f+"utils-min.js",requires:["messenger-constants","datatype-date-format","messenger-ymlutils"]},"messenger-abutils":{path:f+"abutils-min.js",requires:["underscore","messenger-constants","messenger-utils","messenger-smsutils","tictac-base-mailutils"]},"messenger-smsutils":{path:f+"smsutils-min.js",requires:["messenger-constants","messenger-utils","underscore","messenger-usersettings"]},"messenger-ymlutils":{path:f+"ymlutil-min.js",requires:["messenger-constants","messenger-utils"]},"messenger-requestmanager":{path:f+"requestmanager-min.js",requires:["oop","messenger-constants","backbone","messenger-utils"]},"messenger-session":{path:f+"session-min.js",requires:["messenger-constants","messenger-requestmanager","messenger-utils","tictac-base-model","messenger-stats","messenger-systemsettings"]},"messenger-contact":{path:f+"contact-min.js",requires:["messenger-constants","messenger-utils","messenger-requestmanager","tictac-base-model"]},"messenger-contactlist":{path:f+"contactlist-min.js",requires:["messenger-contact","messenger-session","messenger-systemsettings","messenger-utils","messenger-abutils","escape","messenger-smsutils","messenger-constants"]},"messenger-message":{path:f+"message-min.js",requires:["messenger-ymlutils"]},"messenger-conversation":{path:f+"conversation-min.js",requires:["messenger-requestmanager","messenger-message","tictac-base-model","messenger-utils","messenger-contactlist","messenger-constants"]},"messenger-conversationlist":{path:f+"conversationlist-min.js",requires:["messenger-conversation","messenger-usersettings","messenger-contactlist","messenger-session"]},"messenger-usersettings":{path:f+"usersettings-min.js",requires:["tictac-base-model","underscore"]},"messenger-stats":{path:f+"stats-min.js",requires:[]}}},"min"===b),a.Tictac.base.defineModuleGroup("mim_app",{filter:b,modules:{"messenger-viewutils":{path:f+"viewutils-min.js",requires:["messenger-constants","tictac-mim-strings","tictac-mim-rollups","tictac-base","messenger-utils","messenger-smsutils","messenger-usersettings","messenger-stats","messenger-systemsettings","tictac-base-viewutils","escape"]},"messenger-presenceplugin":{path:f+"presenceplugin-min.js",requires:["messenger-newconversationview","messenger-contactlist-css","tictac-mim-rollups","tictac-base-view","messenger-constants","messenger-conversation","tictac-mim-strings","messenger-usersettings","messenger-viewutils","messenger-utils","messenger-stats","messenger-systemsettings","event-hover","messenger-base-css","escape"]},"messenger-contactplugin":{path:f+"contactplugin-min.js",requires:["messenger-newconversationview","messenger-contactlist-css","tictac-mim-rollups","tictac-base-view","messenger-constants","messenger-conversation","tictac-mim-strings","messenger-usersettings","messenger-viewutils","messenger-utils","messenger-stats","messenger-systemsettings","event-hover","messenger-base-css","escape","mail-core-feature"]},"tictac-mim-rollups":{path:f+"tictac-mim-rollups_"+h+"-min.js",requires:["handlebars-base"]},"messenger-conversationlistview":{path:f+"conversationlistview-min.js",requires:["tictac-mim-rollups","tictac-base-dialogview","tictac-base-utils","messenger-utils","messenger-conversationview","messenger-newconversationview","messenger-conversationlist","messenger-usersettings","messenger-conversationlist-css","messenger-viewutils","tictac-mim-strings","messenger-session","messenger-addrequestview","messenger-stats","messenger-contactlist","messenger-abutils","messenger-systemsettings","messenger-constants"]},"messenger-conversationview":{path:f+"conversationview-min.js",requires:["tictac-mim-rollups","tictac-base-view","messenger-contactlist","messenger-ymlutils","tictac-mim-strings","tictac-base-utils","base-bidi","tictac-base-richtexteditor","messenger-constants","messenger-utils","messenger-viewutils","messenger-conversation-css","messenger-usersettings","messenger-stats","messenger-smsutils","messenger-systemsettings","json-parse"]},"messenger-newconversationview":{path:f+"newconversationview-min.js",requires:["tictac-mim-rollups","tictac-base-view","messenger-contactlist","messenger-ymlutils","tictac-mim-strings","tictac-base-utils","base-bidi","messenger-systemsettings","messenger-constants","messenger-utils","io","messenger-viewutils","messenger-conversation-css","escape","messenger-abutils"]},"messenger-addrequestview":{path:f+"addrequestview-min.js",requires:["tictac-mim-rollups","tictac-base-view","messenger-contactlist","messenger-ymlutils","tictac-mim-strings","tictac-base-utils","base-bidi","messenger-utils","messenger-viewutils","messenger-conversation-css","messenger-stats"]},"messenger-optionsview":{path:f+"optionsview-min.js",requires:["tictac-mim-rollups","tictac-base-view","tictac-mim-strings","messenger-options-css","messenger-utils","messenger-contactlist","messenger-constants","messenger-session","messenger-viewutils","messenger-usersettings","messenger-systemsettings"]},"tictac-mim-strings":{path:f+"strings/lang_"+h+"-min.js"},"messenger-ssp":{path:f+"sspuserpreferences-min.js",requires:["messenger-requestmanager","tictac-mim-strings"]},"messenger-msdb-user-preferences":{path:f+"msdbuserpreferences-min.js",requires:["mail-persist-meta-data","messenger-constants","tictac-base-mailpreferences"]},xframe:{path:f+"xframe-min.js"},"messenger-xframetransport":{path:f+"xframetransport-min.js",requires:["tictac-base","xframe","messenger-utils"]},"messenger-convviewsmsplugin":{path:f+"convviewsmsplugin-min.js",requires:["messenger-conversationview","messenger-smsutils","messenger-viewutils","tictac-mim-strings","tictac-mim-rollups","messenger-utils","messenger-constants"]}}},"min"===b),a.Tictac.base.defineModuleGroup("mim_css",{filter:"min",modules:{"messenger-contactlist-css":{type:"css",path:e(g+"contactlist.css")},"messenger-conversationlist-css":{type:"css",path:e(g+"conversationlist.css")},"messenger-conversation-css":{type:"css",path:e(g+"conversation.css")},"messenger-base-css":{type:"css",path:e(g+"base.css")},"messenger-lozenge-css":{type:"css",path:e(g+"lozenge.css")}}},"min"===b)}}},"1.0.0",{requires:["tictac-base","tictac-options"]});YUI.add("tictac-dropbox",function(a){"use strict";function b(a,b){return f.getAssetURL(a,"tictac-dropbox",b)}var c=a.common.Utils.features.enabled("ComposeWithCard"),d=!1,e=a.namespace("Tictac.dropbox"),f=a.Tictac.base,g=f.getTictacVersion("dropbox");e.loader=function(){d||(yui.use("mail-services-plugins","tictac-dropbox-strings",function(a){var b=e.strings,c=a.Mail.Services.Plugins;c.register("composeUploader",{index:0,label:b.str_share_from_db,className:"menu-attach-dropbox",choose:function(){return new Promise(function(b,c){a.use("tictac-dropbox-dropboxdialog",function(){e.DropboxDialog.chooseFiles().then(b,c)})})}}),c.register("largeFileUploaders",{upload:function(b){return new Promise(function(c,d){a.use("tictac-dropbox-directupload",function(){e.DirectUpload.upload(b).then(c,d)})})}}),c.register("attachmentDownloader",{label:b.str_dropbox_saveto_menuitem,download:function(b){return new Promise(function(c,d){a.use("tictac-dropbox-dropboxsaver",function(){e.DropboxSaver.save(b).then(c,d)})})}})}),d=!0)},a.Tictac.base.defineModuleGroup("tictacs",{filter:g.filter,modules:{"tictac-dropbox-rollups":{path:b("js/tictac-dropbox-rollups_"+NeoConfig.lang+"-min.js")},"tictac-dropbox-api":{path:b("js/api-min.js")},"tictac-dropbox-auth":{path:b("js/auth-min.js"),requires:["common-ui-dialog-helper","tictac-base-utils","tictac-dropbox-rollups","tictac-dropbox-strings","tictac-dropbox-stats","tictac-dropbox-api"]},"tictac-dropbox-cardhandler":{path:b("js/cardhandler-min.js"),requires:["tictac-base-utils","tictac-dropbox-strings","tictac-dropbox-stats","tictac-att-filter","array-extras","tictac-attach-enhancr-card"]},"tictac-dropbox-footer":{path:b("js/footer_nocard-min.js")},"tictac-dropbox-controller":{path:b("js/controller"+(c?"":"_nocard")+"-min.js"),requires:["common-ui-dialog-helper","tictac-base-utils","tictac-dropbox-alfview","tictac-dropbox-api","tictac-dropbox-auth","tictac-dropbox-strings","tictac-dropbox-rollups","tictac-dropbox-stats","tictac-dropbox-chooser","tictac-dropbox-saver"]},"tictac-dropbox-chooser":{path:b("js/chooser-min.js"),requires:["tictac-base-utils","tictac-dropbox-api","tictac-dropbox-strings"]},"tictac-dropbox-saver":{path:b("js/saver-min.js"),requires:["tictac-base-utils","tictac-dropbox-api","tictac-dropbox-strings"]},"tictac-dropbox-alfview":{path:b("js/alfview-min.js"),requires:["common-ui-dialog-helper","tictac-base-utils","tictac-dropbox-stats","tictac-dropbox-strings","tictac-dropbox-rollups","tictac-att-progressbar"]},"tictac-dropbox-stats":{path:b("js/stats-min.js"),requires:["tictac-base-stats"]},"tictac-dropbox-strings":{path:b("js/strings/lang_"+NeoConfig.lang+"-min.js")},"tictac-dropbox-dropboxdialog":{path:b("js/dropboxdialog-min.js"),requires:["common-ui-dialog-helper","tictac-dropbox-utils","tictac-dropbox-api","tictac-dropbox-auth","tictac-dropbox-strings","tictac-dropbox-rollups"]},"tictac-dropbox-dropboxsaver":{path:b("js/dropboxsaver-min.js"),requires:["common-ui-dialog-helper","tictac-dropbox-utils","tictac-dropbox-api","tictac-dropbox-auth","tictac-dropbox-strings","tictac-dropbox-rollups"]},"tictac-dropbox-directupload":{path:b("js/directupload-min.js"),requires:["common-ui-dialog-helper","tictac-att-progressbar","tictac-base-utils","tictac-dropbox-utils","tictac-dropbox-uploader","tictac-dropbox-api","tictac-dropbox-strings","tictac-dropbox-rollups"]},"tictac-dropbox-utils":{path:b("js/utils-min.js"),requires:["tictac-dropbox-strings"]},"tictac-dropbox-uploader":{path:b("js/uploader-min.js"),requires:["tictac-dropbox-api"]}}}),a.one("head").append('<link rel="stylesheet" href="'+b("css/dropbox.css","tictac-dropbox",!0)+'" class="tictac-dropbox-css" />')},"1.0.0",{requires:["node","tictac-base","mail-common-utils-features"]});YUI.add("tictac-flickr",function(a){"use strict";function b(a,b){return d.getAssetURL(a,"tictac-flickr",b)}var c=a.common.Utils.features.enabled("ComposeWithCard"),d=a.Tictac.base,e=d.getTictacVersion("flickr"),f=!1,g=window.NeoConfig?window.NeoConfig.lang:"en-US";a.namespace("Tictac.flickr").loader=function(){f||(yui.use("mail-services-plugins","tictac-flickr-strings",function(a){a.Mail.Services.Plugins.register("composeUploader",{index:2,label:a.Tictac.flickr.strings.str_share_from_flickr,className:"menu-attach-flickr",choose:function(){return new Promise(function(b,c){a.use("tictac-flickr-chooserdialog",function(){a.Tictac.flickr.ChooserDialog.chooseFiles().then(b,c)})})}})}),f=!0)},a.Tictac.base.defineModuleGroup("tictacs",{filter:e.filter,modules:{"tictac-flickr-auth":{path:b("js/auth-min.js"),requires:["tictac-base-utils","tictac-flickr-stats","tictac-flickr-strings","tictac-flickr-rollups","tictac-flickr-ws","common-ui-dialog-helper"]},"tictac-flickr-chooser":{path:b("js/chooser-min.js"),requires:["array-extras","common-ui-dialog-helper","_shared_module_offscreen_bin_modal_btns_ok_cancel","node-scroll-info","event-hover","tictac-base-utils","tictac-flickr-justifier","tictac-flickr-model","tictac-flickr-rollups","tictac-flickr-strings","tictac-flickr-stats","tictac-flickr-uploadctrl"]},"tictac-flickr-controller":{path:b("js/controller"+(c?"":"_nocard")+"-min.js"),requires:["tictac-flickr-auth","tictac-flickr-chooser","tictac-flickr-stats","tictac-base-utils","tictac-attach-enhancr-card"]},"tictac-flickr-justifier":{path:b("js/justifier-min.js"),requires:["tictac-base-utils"]},"tictac-flickr-model":{path:b("js/model-min.js"),requires:["tictac-base-utils","tictac-flickr-strings","tictac-flickr-ws"]},"tictac-flickr-stats":{path:b("js/stats-min.js"),requires:["tictac-base-stats"]},"tictac-flickr-uploadctrl":{path:b("js/uploadctrl-min.js"),requires:["datatype-xml-parse","tictac-att-progressbar","tictac-base-utils","tictac-flickr-uploader-form","tictac-flickr-rollups","tictac-flickr-strings","tictac-flickr-stats"]},"tictac-flickr-uploader-form":{path:b("js/uploaderform-min.js"),requires:["tictac-base-utils","tictac-flickr-stats","tictac-flickr-strings","tictac-flickr-rollups","tictac-flickr-ws","common-ui-dialog-helper"]},"tictac-flickr-ws":{path:b("js/ws-min.js"),requires:["io","tictac-base-utils"]},"tictac-flickr-footer":{path:b("js/footer_nocard-min.js")},"tictac-flickr-chooserdialog":{path:b("js/chooserdialog-min.js"),requires:["tictac-flickr-auth","tictac-flickr-chooser","tictac-flickr-stats","tictac-base-utils"]},"tictac-flickr-strings":{path:b("js/strings/lang_"+g+"-min.js")},"tictac-flickr-rollups":{path:b("js/tictac-flickr-rollups_"+g+"-min.js")}}}),a.one("head").append('<link rel="stylesheet" href="'+b("css/flickr"+(c?"":"_nocard")+".css","tictac-flickr",!0)+'" class="tictac-flickr-css" />')},"1.0.0",{requires:["tictac-base","mail-common-utils-features"]});"use strict";YUI.add("tictac-unsubscribr",function(a){var b=a.common&&a.common.Utils,c=b&&b.settings&&b.settings.value("appid","YahooMailNeo");a.namespace("Tictac").unsubscribr={Stats:new a.Tictac.base.Stats({name:"unsubscribr",yamas:!0}),parseForMids:function(a){var b,c=[];for(a=JSON.parse(a),b=0;a>b&&a.hits&&a.hits.length;b++)c.push(a.hits[b].mid);return c},issueDeleteRequest:function(b,d,e){var f="/mailsearch/v2/search?appid="+c+"&wssid="+NeoConfig.wssid,g="/ws/mail/v2.0/jsonrpc?m=MoveMessages&appid="+c+"&wssid="+NeoConfig.wssid,h="/ws/mail/v2.0/jsonrpc?m=FlagMessage&appid="+c+"&wssid="+NeoConfig.wssid,i=encodeURIComponent(b.join(" fromaddress:")),j="&query=%7B%22keyword%22%3A%22(fromaddress%3A"+i+")%22%7D",k={method:"GET",headers:{"Content-Type":"application/json"},on:{success:function(b,c){var f=a.Tictac.unsubscribr.parseForMids(c.response),i=[];"1"===e&&(a.Tictac.unsubscribr.Stats.stat("unsubscribr_delete"),i.push({id:"MoveMessages",uri:g,method:"POST",payloadType:"embedded",payload:{method:"MoveMessages",params:[{destinationFid:"Trash",fullScan:1,mid:f,sourceFid:"Inbox"}]}})),"1"===d&&(a.Tictac.unsubscribr.Stats.stat("unsubscribr_block"),i.push({id:"FlagMessages",uri:h,method:"POST",payloadType:"embedded",payload:{method:"FlagMessages",params:[{mid:f,fid:"Inbox",fullScan:1,setFlags:{spam:1}}]}})),a.Tictac.base.BatchTransport.send({requests:i},{success:function(a,b,c){yui.Object.getValue(c,["MoveMessages","body","result"])&&yui.fire("unsubscribe:deleteCompleted")}})}}};f+=j,a.Tictac.base.mailIO.send(f,k)},loader:function(){var b=[],c=!1,d=!1;yui.on("unsubscribe:emails",function(e){b=e.emails,d=e.block,c=e.deleteEmails,("1"===d||"1"===c)&&a.Tictac.unsubscribr.issueDeleteRequest(b,d,c),"1"===d&&a.Tictac.unsubscribr.setMetaData(b)})},setMetaData:function(b){var c,d=a.Tictac.base.mailpreferences,e="unsubscribeList";c=d.get(e)||[],c=c.concat(b),d.set(e,c),d.save()}}},"1.0.0",{requires:["tictac-base","tictac-base-mailpreferences","tictac-base-stats","mail-common-utils-settings"]});"use strict";YUI.add("tictac-livestream",function(a){function b(){a.StyleSheet("#video-mode-module iframe { border: 0; width: 288px; height: 620px; }","video-mode")}function c(){var b=a.common.Utils,c="site=mail",f="region="+NeoConfig.intl,g="lang="+NeoConfig.lang,h=b.settings.value("livestreamBaseUrl"),i=b.settings.value("livestreamQueryString"),j=[h,c,f,g,i].join("&"),k=a.one("#theAd"),l='allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"',m="<iframe "+l+' src="'+j+'"></iframe>',n='<div id="video-mode-module">'+m+"</div>";k&&(d(),e=a.Node.create(n),k.append(e))}function d(){e&&(e.remove().destroy(!0),e=null)}var e,f={LOAD:"livestream:load",UNLOAD:"livestream:unload"};a.namespace("Tictac").livestream={loader:function(){b(),yui.on(f.LOAD,c),yui.on(f.UNLOAD,d),yui.fire("livestream:ready")}}},"1.0.0",{requires:["event-base","mail-common-utils-features","stylesheet","tictac-base","tictac-lib"]});