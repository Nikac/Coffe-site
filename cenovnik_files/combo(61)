"use strict";YUI.add("xframe",function(a){function b(a){this._init(a)}window.JSON||(window.JSON=a.JSON),Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;return function(){return b.apply(a,arguments)}}),b.prototype={_init:function(b){if(this.isProxy=b.isProxy,this.logoutURL=null,this.timeoutDelay=5e3,this._boundReceive=this._receive.bind(this),window.addEventListener?window.addEventListener("message",this._boundReceive,!1):window.attachEvent("onmessage",this._boundReceive),this._listeners=[],this._parseTimers=[],this._key=this._genKey(),this.isProxy){a.namespace("Messenger").logPerf=function(a,b){var c,d;window.console&&window.__mimStartTime&&(c=a,d=(new Date).getTime(),b&&(b+="-proxy",c+=" ~ "+b),window.console)};var c=window.location.href.split("#")[1].split("*");if(this._remoteKey=c[0],this._remoteDomain=c[2],this._pendingRequests={},!this._domainCheck(this._remoteDomain))throw new Error("Invalid source domain, xframe connection disallowed - "+c[2]);window.__mimStartTime=c[1],a.Messenger.logPerf("Proxy xframe loaded, generating and sending the key","xframe"),this._remoteWindow=window.parent,this._send(JSON.stringify({token:this._key,key:this._remoteKey}))}else{if(this._localId="msg_"+(new Date).getTime(),this._connected=!1,this._cbid=0,this._cbs=[],this._sendQueue=[],!b.proxy||!b.yuiPath||!b.xframePath)throw new Error("XFrame connect called without required parameters:  proxy, yuiPath, xframePath");this._url=b.proxy+"#"+this._key+"*"+(window.__mimStartTime?window.__mimStartTime:"")+"*"+b.localDomain+"*"+this._localId+"*y="+b.yuiPath+"*xframePath="+b.xframePath,a.log("Attempting to connect to server using URL "+this._url,"info","xframe"),this._createProxy(),this._remoteDomain=b.proxy}},destroy:function(){for(;this._listeners.length;)this._listeners.pop().detach();for(this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),delete this.iframe);this._parseTimers.length;)clearTimeout(this._parseTimers.pop());this._removeWindowEvents(),this._connected=!1,this._destroyed=!0},_removeWindowEvents:function(){window.removeEventListener?window.removeEventListener("message",this._boundReceive,!1):window.detachEvent("onmessage",this._boundReceive)},_genKey:function(){return"main_"+Math.floor(1e18*Math.random()).toString(36)},_createProxy:function(){var b,c,d,e,f=this,g=f._url;if(this._proxyRetries=this._proxyRetries||0,1===this._proxyRetries)this._removeUrlParameters(g);else if(this._proxyRetries>4)return a.log("Error - giving up trying to create iframe.","xframe"),void this._initFailure();a.Messenger.logPerf("Injecting an invisible iframe proxy","xframe"),b=document.createElement("div"),e='<iframe style="visibility:hidden;position:absolute;border:none;height:0px;width:0px;left:-9999px;"></iframe>',b.innerHTML=e,c=b.firstChild,c.addEventListener?(c.addEventListener("load",f._iframeLoadComplete.bind(f),!1),c.addEventListener("error",f._iframeLoadError.bind(f),!1)):(c.attachEvent("onload",f._iframeLoadComplete.bind(f)),c.attachEvent("onerror",f._iframeLoadError.bind(f))),c.src=g,f._appendIframeToBody(c),this.iframe_onloadfired_timeout||(d=3e3+1e3*this._proxyRetries,this.iframe_onloadfired_timeout=setTimeout(function(){this._destroyed||this._iframe_loaded||(a.log("iFrame onload did not fire, retrying the iframe injection.","warn","xframe"),this.iframe_onloadfired_timeout=null,this._retryCreateProxy())}.bind(this),d)),this.iframe=c},_iframeLoadComplete:function(){var b=this;a.Messenger.logPerf("iFrame onload event fired","xframe"),this.iframe_onloadfired_timeout&&(clearTimeout(this.iframe_onloadfired_timeout),this.iframe_onloadfired_timeout=null,this._iframe_loaded=!0),this._remoteWindow=this.iframe.contentWindow,this._connected||this._destroyed||(this.iframe_load_timeout=setTimeout(function(){a.log("Did not finish the server handshake in time - retrying.","warn","xframe"),b._retryCreateProxy()},this.timeoutDelay))},_iframeLoadError:function(){a.log("In onerror function for "+this._url,"warn","xframe"),this._connected||this._destroyed||this._iframe_loaded||this._retryCreateProxy()},_appendIframeToBody:function(a){document.body.appendChild(a)},_removeUrlParameters:function(a){var b,c;b=a.indexOf("?"),c=a.indexOf("#"),b>-1&&c>b&&(a=a.split(a.substring(b,c)).join(""),this._src=a)},_retryCreateProxy:function(){this._destroyed||this._connected||(a.log("In load timeout for "+this._url,"info","xframe"),this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),delete this.iframe),this._proxyRetries++,a.log("Creating another iframe - counter = "+this._proxyRetries,"info","xframe"),this._createProxy())},send:function(b){var c,d=b.method,e=b.url,f=b.body,g=b.callback,h=b.timeout,i=++this._cbid;return this._fatalError?void this._xframeInitializationError(g):(c=JSON.stringify({cbid:i,method:d,url:e,body:f,key:this._remoteKey,timeout:h}),this._cbs[i]=g,this._connected?this._send(c):(a.Messenger.logPerf("Proxy not available, adding to queue","xframe"),void this._sendQueue.push({data:b,callback:g})))},_send:function(b){var c=this;if(!this._remoteWindow)return void setTimeout(function(){c._send(b)},0);try{a.Messenger.logPerf("Sending postMessage to remote window","xframe"),b=b.replace(/\|/g,"__PIPE__"),this._remoteWindow.postMessage(b,this._remoteDomain)}catch(d){return a.log("Error attempting postMessage to "+this._remoteDomain,"xframe"),void(this._pmRetry?this._initFailure():(this._pmRetry=!0,setTimeout(function(){c._send(b)},100)))}this._pmRetry=!1},ajax:function(b,c,d,e,f){if(b&&c){var g,h=a.guid("xframereq_"),i=!1,j=this;g=this._createXHR(),g.open(b,c,!0),g.setRequestHeader("Content-Type","application/json;charset=utf-8"),g.setRequestHeader("X-Yahoo-Msgr-User-Agent","YahooMessenger/1.0 (Mail Messenger;1.0.0.0)"),this._pendingRequests[h]={},this._pendingRequests[h].request=g,g.onreadystatechange=function(){try{i=j._ajaxResponseProcessCallback(g,e)}catch(d){a.log("exception in XHR handler ["+b+" "+c+"]:"+d.message,"error","XFrame");try{j._xframeInternalError(e)}catch(f){a.log("exception in XHR handler callback:"+f.message,"error","XFrame")}}j._ajaxCleanStep(i,g,h)},this._pendingRequests[h].timer=setTimeout(function(){j._ajaxTimeoutRequestProcess(g,h,e)},f||18e5),g.send(d||"")}},_ajaxResponseProcessCallback:function(b,c){var d,e,f=!1;if(4===b.readyState&&!f){a.Messenger.logPerf("AJAX response received","xframe"),f=!0,d="{}",e="status unavailable";try{e=b.statusText}catch(g){}d=b.status>=200&&b.status<210?b.responseText:0===b.status||b.status>1e3?JSON.stringify({error:{code:800,detail:"Network error"},httpStatus:b.status,responseText:b.responseText||""}):JSON.stringify({error:{},httpStatus:b.status,detail:e,responseText:b.responseText||""}),c(d)}return f},_ajaxTimeoutRequestProcess:function(b,c,d){if(a.log("***** XFrame.js: client side timeout triggered."),b){b.onreadystatechange=null;try{b.abort()}catch(e){}b.abort=null,b=null}this._pendingRequests[c]&&delete this._pendingRequests[c],d({error:{code:700,detail:"Client Side Timeout"}})},_ajaxCleanStep:function(a,b,c){a&&(clearTimeout(this._pendingRequests[c].timer),delete this._pendingRequests[c],b.onreadystatechange=null,b.abort=null,b=null)},_receive:function(b){var c,d,e,f,g;if(b._event&&!b.data&&(b.data=b._event.data,b.source=b._event.source),a.Messenger.logPerf("postMessage Data received","xframe"),f={},g=b.origin,"string"==typeof b.data&&(f=a.Lang.trimLeft(b.data),f.length&&("{"===f.charAt(0)||"["===f.charAt(0)))){f=f.replace(/__PIPE__/g,"|");try{f=JSON.parse(f)}catch(h){f={}}if(!this._destroyed&&f&&f.key===this._key)if(this.isProxy)this._receiveProxy(f);else if(f.token){if(a.Messenger.logPerf("Initial xframe token handshake completed"),this.iframe_load_timeout&&(a.log("Clearing the timeout for "+this._url),clearTimeout(this.iframe_load_timeout),this.iframe_load_timeout=null),this._remoteKey=f.token,!this._domainCheck(g))throw new Error("Invalid domain error - "+g);for(a.log("proxy iframe loaded","info","xframe"),this._connected=!0;this._sendQueue.length;)c=this._sendQueue.shift(),this.send(c.data)}else{if(!this._connected)throw new Error("Received a response in xframe before the handshake completed - "+f);d=this._cbs[f.cbid],e=f.text,delete this._cbs[f.cbid];try{d(e)}catch(i){a.log("Unsetting logout URL failed.")}}}},_receiveProxy:function(b){var c=this;a.Lang.isUndefined(b.logoutURL)?b.command&&"cancelRequests"===b.command?this._cancelRequests():this.ajax(b.method,b.url,b.body,function(a){var d=JSON.stringify({cbid:b.cbid,text:a,key:c._remoteKey});c._parseTimers.push(setTimeout(function(){c._destroyed||c._send(d)},0))},b.timeout):this.setLogoutURL(b.logoutURL)},_domainCheck:function(a){for(var b,c=this._parseURI(a),d=c.host,e=[".yahoo.com"];e.length;)if(b=e.shift(),d.substr(d.length-b.length)===b)return this.otherDomain=c.protocol+"://"+c.host,!0;return!1},_parseURI:function(a){for(var b=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,c=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],d=/(?:^|&)([^&=]*)=?([^&]*)/g,e=b.exec(a),f={queryKey:{}},g=c.length;g--;)f[c[g]]=e[g]||"";return f.query.replace(d,function(a,b,c){b&&(f.queryKey[b]=c)}),f},cancelRequests:function(){if(!this._destroyed&&this._connected){var a=JSON.stringify({command:"cancelRequests",key:this._remoteKey});this._remoteWindow.postMessage(a,this._remoteDomain)}},_cancelRequests:function(){var a,b;for(a in this._pendingRequests)if(this._pendingRequests.hasOwnProperty(a)){b=this._pendingRequests[a];try{b.request.abort()}catch(c){}b.timer&&clearTimeout(b.timer)}this._pendingRequests={}},sendLogoutURL:function(a){var b,c=this;if(!c._destroyed){if(!c._connected)return void setTimeout(function(){c.sendLogoutURL(a)},100);b=JSON.stringify({logoutURL:a,key:c._remoteKey}),c._remoteWindow.postMessage(b,c._remoteDomain)}},setLogoutURL:function(a){a&&""!==a&&this._registerUnloadHandler(),this.logoutURL=a},_registerUnloadHandler:function(){this._unloadHandler||(window.addEventListener?window.addEventListener("unload",this._logoutOnUnload.bind(this),!1):window.attachEvent("onunload",this._logoutOnUnload.bind(this)),this._unloadHandler=!0)},_initFailure:function(){for(;this._sendQueue.length;){var a=this._sendQueue.shift();this._xframeInitializationError(a.callback)}this._fatalError=!0},_logoutOnUnload:function(){var b,c=this.logoutURL;if(c){if(b=this._createXHR(),!b)return;b.open("get",c,a.UA.gecko?!0:!1),b.setRequestHeader("X-Yahoo-Msgr-User-Agent","YahooMessenger/1.0 (WC Messenger; 1.0.0.0)");try{b.send(null)}catch(d){}setTimeout(function(){b.abort()},3e3)}},_createXHR:function(){var a;if("undefined"!=typeof XMLHttpRequest)a=new XMLHttpRequest;else{if(!window.ActiveXObject)throw new Error("This browser does not support XMLHttpRequest.");a=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(a){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}throw new Error("This browser does not support XMLHttpRequest.")}()}return a},_xframeInternalError:function(a){a(JSON.stringify({error:{code:600,detail:"internal XFrame error"}}))},_xframeInitializationError:function(a){a({error:{code:701,detail:"XFrame initialization error"}})}},a.namespace("Messenger").Xframe=b},"1.0.0",{requires:[]});YUI.add("messenger-constants",function(a){"use strict";a.namespace("Messenger.Common").Constants={STATE:{INVISIBLE:-1,AVAILABLE:0,BUSY:2,NOTATHOME:3,NOTATDESK:4,NOTINOFFICE:5,ONPHONE:6,ONVACATION:7,OUTTOLUNCH:8,STEPPEDOUT:9,AWAY:10,CUSTOM:99,IDLE:999,PENDING:9998,OFFLINE:9999},DEFAULT_IMAGE:"http://mail.yimg.com/ok/u/assets/img/display-img/profile_{{pixels|32|48}}e.png",DEFAULT_IMAGE_SSL:"https://s.yimg.com/ok/u/assets/img/display-img/profile_{{pixels|32|48}}e.png",EVENTS:{OFFLINE:"offline",FATAL_IO_ERROR:"fatal_io_err",NETWORK_ERROR_RESOLVED:"io_ok",TEMP_NETWORK_ERROR:"temp_io_err",SESSION_EXPIRED:"session_expired",MESSAGE:"new_message",AB_PARSING_COMPLETE:"ab_parsing_complete",ADD_REJECTED:"add_req_rejected",ADD_ACCEPTED:"add_req_accepted",ADD_REQUEST_RECEIVED:"add_req",ADD_REQUEST_SENT:"add_sent",ACK_RECEIVED:"ack_received",LOGOUT_LOCAL:"local_logout",DISPLAYNAME_UPDATED:"name_updated",SEND_ERROR:"send_error",CONTACTS_UPDATED:"yim:contactsupdated",SHOW_OPTIONS:"show_options",SMS_ERROR:"sms_error",CONVERSATION_INIT:"conversation_init",CL_COLLAPSE_TOGGLE:"cl_collapse_toggle"},SMS:{RATIO_BREACHED:19,INVALID_NUMBER:22},NOTIFICATION_INLINE:0,NOTIFICATION_STATICTOP:1,NOTIFICATION_INLINE_PLAINTEXT:2,NOTIFICATION_INLINE_TOP:3,NOTIFICATION_SECTION:4,NOTIFICATION_SECTION_TOP:5}},"@VERSION@",{requires:[]});YUI.add("messenger-utils",function(a){"use strict";var b=a.Messenger.Common.Constants,c="https:"===window.location.protocol;a.Messenger.Common.Utils={substitute:function(a,b){return a.replace(/\{\{([^{}]*)\}\}/g,function(a,c){var d=b[c];return"string"==typeof d||"number"==typeof d?d:a})},parseURI:function(a){for(var b=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,c=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],d=/(?:^|&)([^&=]*)=?([^&]*)/g,e=b.exec(a),f={queryKey:{}},g=c.length;g--;)f[c[g]]=e[g]||"";return f.query.replace(d,function(a,b,c){b&&(f.queryKey[b]=c)}),f},generateImgURL:function(a,d){var e,f=a.displayImagePrefs||a,g=a.user,h=a.network||"yahoo",i=a.size||32,j=c?"https://ycpi-mail-rest-img.msg.yahoo.com":"http://rest-img.msg.yahoo.com",k=f.avatarPreference;return 1===+k?e=f.avatarHash?window.location.protocol+"//avatars.zenfs.com/users/"+encodeURIComponent(f.avatarHash)+".medium.png":c?b.DEFAULT_IMAGE_SSL:b.DEFAULT_IMAGE:2===+k?f.guid&&f.guid.length>0?(e=window.location.protocol+"//msgr.zenfs.com/msgrDisImg/"+encodeURIComponent(f.guid),f.checksum&&(e+="?checksum="+encodeURIComponent(f.checksum))):f.checksum&&(e=j+"/v1/displayImage/custom/yahoo/"+encodeURIComponent(g)+"?height={{pixels|32|48}}&width={{pixels|32|48}}&chksum="+encodeURIComponent(f.checksum)+"&redirect=false&src=minty"):-1===+k&&"yahoo"===h&&(e=j+"/v1/displayImage/yahoo/"+encodeURIComponent(g)+"?height={{pixels|32|48}}&width={{pixels|32|48}}&maxage=259200"),e?this.substitute(e,{"pixels|32|48":i}):d?null:this.getDefaultBuddyImage(i)},getDefaultBuddyImage:function(a){a=a||32;var d=c?b.DEFAULT_IMAGE_SSL:b.DEFAULT_IMAGE;return this.substitute(d,{"pixels|32|48":a})},getUserId:function(a,b){return a?(b=b||"yahoo",a+"~"+b):!1},doLongWork:function(a,b,c){var d=a.length,e=this,f=80;for(a.__currIndex__||(a.__currIndex__=0),a.__startTime__=(new Date).getTime();a.__currIndex__<d&&(new Date).getTime()-a.__startTime__<f;)b(a[a.__currIndex__]),a.__currIndex__++;a.__currIndex__===d?(delete a.__currIndex__,delete a.__startTime__,c&&c()):setTimeout(function(){e.doLongWork(a,b,c)},0)},getConversationId:function(a,b,c){return[a,b,c||"yahoo"].join("~")},normalizePresenceState:function(a){var c=a.presenceState;return 99===c?(c={0:0,1:2,2:999}[a.customDNDStatus],"undefined"==typeof c&&(c=0)):"undefined"==typeof c&&(c=b.STATE.OFFLINE),c},normalizePresenceMessage:function(b){var c;return"number"==typeof b&&(b=b.toString()),b=b?b.replace(/[\r\n|\r|\n]+/g," "):"",c=b?a.Messenger.YMLUtil.ymlToHtml(b,!0):""},slicer:function(a,b,c){for(var d,e=0,f=b,g=a.length;g>e;)d=a.slice(e,f),c(d,e,f,a),e+=b,f+=b},unescapeHTML:function(a){var b,c={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'","&#39;":"'","&#x2F;":"/","&#47;":"/","&#x60;":"`","&#96;":"`"},d=a||"";for(b in c)c.hasOwnProperty(b)&&(d=d.replace(new RegExp(b,"ig"),c[b]));return d},validateURI:function(a){a+="";var b=decodeURIComponent(a).toLowerCase(),c=b.match(/(https)|(http)|(\/\/)|([#?\/])/g);return null===c||0!==b.indexOf(c[0])&&-1!==a.indexOf(":")?!1:!0},isCorp:function(){return a.Messenger.Neo.NeoConfig.isCorpmail===!0||-1!==window.location.href.indexOf("yahoo-inc.com")}}},"1.0.0",{requires:["messenger-constants","datatype-date-format","messenger-ymlutils"]});YUI.add("messenger-ymlutils",function(a){var b={emoticons:{yahoo:{":)":1,":-)":1,"(-:":1,"(:)":1,"(:":1,":(":2,":-(":2,";)":3,";-)":3,":-/":7,":-\\":7,":S":7,":x":8,":-x":8,"(L)":8,':">':9,":$":9,":-P":10,":P":10,":-*":11,":*":11,"(K)":11,"=((":12,"(U)":12,":-O":13,":O":13,"X-(":14,"X(":14,":@":14,"B-)":16,"(H)":16,">:)":19,"(6)":19,":((":20,":-((":20,":'(":20,":|":22,":-|":22,"/:)":23,"/:-)":23,"^o)":23,"o:-)":25,"0:-)":25,"o:)":25,"0:)":25,"(A)":25,":-B":26,":B":26,"8-|":29,"8-)":29,":-&":31,"+o(":31,":-$":32,":-#":32,"<:-P":36,"<:o)":36,"(:|":37,"(:}":37,":-?":39,"*-)":39,":))":21,":-))":21,"=))":24,":D":4,":-D":4,";;)":5,";;-)":5,">:D<":6,":->":15,":>":15,":-S":17,"#:-S":18,"=;":27,"I-)":28,"|-)":28,"L-)":30,"[-(":33,":o)":34,":0)":34,"<@:)":34,"8-}":35,"=P~":38,"#-o":40,"=D>":41,":-SS":42,"@-)":43,":^O":44,":-w":45,":-<":46,">:P":47,"<):)":48,":)]":100,":-c":101,"~x(":102,":-h":103,":-t":104,"8->":105,":-??":106,"%-(":107,":o3":108,X_X:109,":!!":110,"\\m/":111,":@)":49,"3:-O":50,"3:-0":50,":(|)":51,"~:>":52,"@};-":53,"%%-":54,"**==":55,"(~~)":56,"~o)":57,"*-:)":58,"8-X":59,"=:)":60,"=:-)":60,">-)":61,":-L":62,"[-O<":63,"$-)":64,':-"':65,"b-(":66,":)>-":67,"[-X":68,"\\:D/":69,">:/":70,";))":71,"o->":72,"o=>":73,"o-+":74,"(%)":75,":-@":76,"^:)^":77,":-j":78,"(*)":79,":-q":112,":-bd":113,"^#(^":114,":bz":115,"~^o^~":120,"'@^@|||":121,"[]---":122,"^O^||3":123,":-(||>":124,"'+_+":125,":::^^:::":126,"o|^_^|o":127,":puke!":128,"o|\\~":129,"o|:-)":130,"[]==[]":131,":-)/\\:-)":132,":(game)":133,"'@-@":134,":->~~":135,"?@_@?":136,":(tv)":137,"&[]":138,"%||:-{":139,"%*-{":140,":(fight)":141}},deentitize:function(a){var b=a.replace(/&gt;/g,">");return b=b.replace(/&lt;/g,"<"),b=b.replace(/&quot;/g,'"'),b=b.replace(/&apos;/g,"'"),b=b.replace(/&amp;/g,"&")},emoticonPickerEntries:{yahoo:{1:":)",2:":(",3:";)",4:":-/",5:":x",6:':">',7:":P",8:":-*",9:"=((",10:":-<",11:"~X(",12:":-O",13:"X-(",14:"B-)",15:">:)",16:":((",17:":|",18:"/:)",19:"O:-)",20:":-B",21:">:P",22:":-h",23:"8-|",24:":-&",25:":-$",26:"<:-P",27:"(:|",28:":-?",29:":))",30:"=))",31:":D",32:"<):)",33:":-t",34:";;)",35:">:D<",36:":>",37:":-S",38:"#:-S",39:"=;",40:"I-)",41:"L-)",42:"[-(",43:":)]",44:"8->",45:":O)",46:"8-}",47:"=P~",48:"#-o",49:"=D>",50:":-SS",51:"@-)",52:":^o",53:":-w",54:":-c",57:"~^o^~",58:"'@^@|||",59:"[]---",60:"^O^||3",61:":-(||>",62:"'+_+",63:":::^^:::",64:"o|^_^|o",65:":puke!",66:"o|\\~",67:"o|:-)",68:"[]==[]",69:":-)/\\:-)",70:":(game)",71:"'@-@",72:":->~~",73:"?@_@?",74:":(tv)",75:"&[]",76:"%||:-{",77:"%*-{",78:":(fight)"}},emoticonLabels:{1:"smile",2:"sad",3:"wink",4:"confused",5:"lovestruck",6:"blushing",7:"tongue",8:"kiss",9:"broken_heart",12:"surprise",13:"angry",14:"cool",15:"devilish",16:"crying",17:"straight_face",18:"raised_eyebrow",19:"angel",20:"nerd",23:"rolling_eyes",24:"sick",25:"shh",26:"party",27:"yawn",28:"thinking",29:"laughing",30:"rofl",31:"big_grin",34:"batting_eyelashes",35:"big_hug",36:"smug",37:"worried",38:"whew",39:"talk_to_the_hand",40:"sleepy",41:"loser",42:"not_talking",45:"clown",46:"silly",47:"drooling",48:"doh",49:"applause",50:"nail_biting",51:"hypnotized",52:"liar",53:"waiting",10:"sigh",21:"phbbbt",32:"cowboy",43:"on_the_phone",54:"call_me",11:"wits_end",22:"wave",33:"time_out",44:"daydreaming",57:"cheer",58:"dizzy",59:"cook",60:"eat",61:"give_up",62:"cold",63:"hot",64:"music",65:"puke",66:"sing",67:"catch",68:"exercise",69:"high_five",70:"play_game",71:"searching",72:"spooky",73:"studying",74:"tv",75:"gift",76:"unlucky",77:"down_on_luck",78:"fight"},ymlToHtml:function(a,c,d){return a=b.addClosingTags(a),a=b.ymlToHtmlRaw(a,!0,null,d),c||(a=b.addDefaultFont(a,!1),a=b.addClosingTags(a)),a},ymlToHtmlRaw:function(c,d,e,f){function g(a,b){return a=a.replace(/&/g,"&amp;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),b||(a=a.replace(/'/g,"&#x27;"),a=a.replace(/"/g,"&quot;")),a}function h(){for(var a=this.s=[],b=0;b<arguments.length;b++)a.push(arguments[b]);0===a.length&&a.push(""),this.$=function(b){return a.push(b),this},this.toString=function(){return a.length>1&&(a=[a.join("")]),a[0]}}function i(a,b,c){if("undefined"==typeof b){"#"==a.charAt(0)&&(a=a.substring(1));var d=parseInt(a,16);this.red=(16711680&d)>>16,this.green=(65280&d)>>8,this.blue=255&d}else this.red=a,this.green=b,this.blue=c;this.toString=function(){function a(a){var b="00"+a.toString(16);return b.substring(b.length-2)}return"#"+a(this.red)+a(this.green)+a(this.blue)}}function j(a,b,c){if(a.length<2||2>c)return a[0];if(a!=B){B=a;for(var d=0,e=a[0],f=a[1],g=e.red,h=e.green,j=e.blue,k=f.red,l=f.green,m=f.blue,n=(a.length-1)/A,o=0;A>o;o++){var p=o*n,q=Math.floor(p);q!=d&&(g=k,h=l,j=m,f=a[q+1],k=f.red,l=f.green,m=f.blue,d=q);var r=p-q,s=1-r,t=Math.floor(g*s+k*r),u=Math.floor(h*s+l*r),v=Math.floor(j*s+m*r);C[o]=new i(t,u,v)}}var w=c-1;b>w&&(b=w);var x=Math.floor(b*(A-1)/w);return C[x]}function k(a){return d&&(a=a.replace(/\r\n/g,"<br/>"),a=a.replace(/\r/g,"<br/>"),a=a.replace(/\n/g,"<br/>")),e&&(a=a.replace(/\s/g,"&nbsp;")),a}function l(a){return k(g(a))}function m(a,b){if(b&&"normal"!=b.mode){for(var c,d,e=new h,f=0;f<a.length;f++)c="fade"==b.mode?j(b.colors,f,a.length):b.colors[f%b.colors.length],d=l(a.charAt(f)),e.$('<font color="').$(c).$('">').$(d).$("</font>");a=e.toString()}else a=l(a);return a}function n(a){return a.replace(/\[/gi,"\\[").replace(/\$/gi,"\\$").replace(/\^/gi,"\\^").replace(/\\/gi,"\\\\").replace(/\./gi,"\\.").replace(/\|/gi,"\\|").replace(/\?/gi,"\\?").replace(/\*/gi,"\\*").replace(/\+/gi,"\\+").replace(/\(/gi,"\\(").replace(/\)/gi,"\\)").replace(/\//gi,"\\/")}function o(b,c){c=c||0;var d,e,f,h,j,k,l,m,o=/<([a-zA-Z0-9#]+[^><]*)>/,p={size:!0,face:!0,color:!0,dir:!0},q=[],r=null,s=0===c?b:b.substring(c),t=o.exec(s);if(t){if(r={},r.startTag=t[0],l=t[1],r.treatAsText=!1,r.startPos=t.index+c,"/"===l.charAt(l.length-1))return r.treatAsText=!0,r.endPos=r.startPos+r.startTag.length,r;f=l.indexOf(" "),r.name=-1!==f?l.substring(0,f):l,r.attributes=-1!==f?l.substring(f+1).toLowerCase():"",r.contentStartPos=r.startPos+r.startTag.length,m=n(r.name),h=0==r.name.indexOf("url=")?new RegExp("</\\s*url\\s*>","ig"):new RegExp("</\\s*"+m+"\\s*>","ig"),s=b.substring(r.contentStartPos),t=h.exec(s);for(var u=new RegExp("<\\s*"+m+"[^>]*>","ig"),v=0;null!==t;){r.endTag=t[0],r.endPos=r.contentStartPos+h.lastIndex,u.lastIndex=0;var w=u.exec(s.substring(v,h.lastIndex));r.endPos<b.length&&w?(t=h.exec(s),r.endTag=null,r.endPos=null,v+=u.lastIndex):t=null}switch(r.endTag?(r.contentEndPos=r.endPos-r.endTag.length,r.content=b.substring(r.contentStartPos,r.contentEndPos)):(r.endPos=b.length,r.content=b.substring(r.contentStartPos),("font"==r.name||"b"==r.name||"u"==r.name||"i"==r.name)&&(r.endTag="</"+r.name+">")),r.name.toLowerCase()){case"b":r.startTag="<b>";break;case"i":r.startTag="<i>";break;case"u":r.startTag="<u>";break;case"font":var z,A="",B="",C="";if(""!==r.attributes){var E=/([a-zA-Z]+=('|")([^\2]*?)\2)/g,F=r.attributes.match(E)||[];for(a.Array.each(F,function(a,b){b%2===0&&q.push(a)}),d=0,e=q.length;e>d;d++)if(j=q[d].split("="),2===j.length&&!p[j[0]])return r.treatAsText=!0,r}if(z=l.match(/size=(["'])([^\1]*?)\1/),null!==z){var G;if(!z[2].match(/[0-9]*/))return r.treatAsText=!0,r;G=parseInt(z[2]),x>G&&(G=x),G>y&&(G=y),G=g(G+"")+"pt",A=' style="font-size:'+G+'"'}z=l.match(/face=(["'])([^\1]*?)\1/),null!==z&&(B=' face="'+g(z[2],!0)+'"'),z=l.match(/color=(["'])([^\1]*?)\1/),null!==z&&(C=' color="'+g(z[2])+'"'),r.startTag="<font"+A+B+C+">";break;case"a":return r.treatAsText=!0,r;case"url":r.startTag="",r.endTag="";break;case"fade":case"alt":r.startTag="",r.endTag||(r.content=b.substring(r.contentStartPos),r.endPos=b.length),r.endTag="",r.colors=r.attributes.split(",");for(var e=r.colors.length,d=0;e>d;d++)r.colors[d]=new i(r.colors[d]);r.colors.length>1?r.setRenderMode=r.name.toLowerCase():1==r.colors.length&&(r.startTag='<font color="'+r.colors[0]+'">',r.endTag="</font>");break;case"black":case"blue":case"cyan":case"gray":case"green":case"pink":case"purple":case"orange":case"red":case"yellow":r.startTag='<font color="'+D[r.name]+'">',r.endTag="</font>";break;default:0===r.name.indexOf("url=")?(r.startTag=r.name.substring(4),0==r.startTag.indexOf('"')&&(r.startTag=r.startTag.substring(1)),'"'==r.startTag.charAt(r.startTag.length-1)&&(r.startTag=r.startTag.substring(0,r.startTag.length-1)),k=r.startTag,a.Messenger.Common.Utils.validateURI(k)?(r.startTag='<a href="'+r.startTag+'" class="link" target="_blank">',r.content?(r.startTag+=r.content,r.content=null):r.startTag+=k,r.startTag+="</a>",r.treatAsText=!1,r.endTag=""):r.treatAsText=!0):"#"==r.name.charAt(0)?(r.startTag='<font color="'+g(r.name)+'">',r.endTag="</font>"):0===r.name.indexOf("snd=")?(r.startTag="",r.endTag=""):r.treatAsText=!0}}return r}function p(a){var b,c=a.split("["),d=0,e=0,f=0;if(1==c.length)return a;var g=new h;for(b=0;b<c.length;b++){var i=c[b],j=i.indexOf("m");if(-1===j)g.$(i);else{var k=i.substring(0,j),l=!0;switch(k){case"0":g.$("</font>");break;case"1":g.$("<b>"),d++;break;case"2":g.$("<i>"),f++;break;case"30":g.$('<font color="'+D.black+'">');break;case"31":g.$('<font color="'+D.blue+'">');break;case"32":g.$('<font color="'+D.cyan+'">');break;case"33":g.$('<font color="'+D.gray+'">');break;case"34":g.$('<font color="'+D.green+'">');break;case"35":g.$('<font color="'+D.pink+'">');break;case"36":g.$('<font color="'+D.purple+'">');break;case"37":g.$('<font color="'+D.orange+'">');break;case"38":g.$('<font color="'+D.red+'">');break;case"39":g.$('<font color="'+D.yellow+'">');break;case"4":g.$("<u>"),e++;break;case"l":g.$("<url>");break;case"x1":d&&(g.$("</b>"),d--);break;case"x2":f&&(g.$("</i>"),f--);break;case"x4":e&&(g.$("</u>"),e--);break;case"xc":g.$("</font>");break;case"xl":g.$("</url>");break;default:0===k.indexOf("#")?g.$('<font color="'+k+'">'):(g.$(i),l=!1)}j++,l&&j<i.length&&g.$(i.substring(j))}}return g.toString()}function q(a,c,d){for(var e=0,f=0,g="yahoo",i=b.emoticons[g],j=new h,k=0;k<a.length;k++){for(var l,n=8,o=0;!o&&n>=2;n--)l=a.substring(k,k+n),"eval"!==l&&(i.hasOwnProperty(l)?o=i[l]:i.hasOwnProperty(l.toUpperCase())?o=i[l.toUpperCase()]:i.hasOwnProperty(l.toLowerCase())&&(o=i[l.toLowerCase()]));if(o){f!==k&&j.$(m(a.substring(f,k),c));var p=l.replace('"',"&quot;"),q='<img border=0 src="'+t+o+'.gif" alt="'+p+'" title="'+p+'" data-emoticon="true"/>';if(j.$(q),k+=n,f=k+1,e++,e==u)break}}return f<a.length&&j.$(m(a.substring(f),c)),j.toString()}function r(a,b,c){var d,e,f,g,i=/(\b(www\.|https?:\/\/)[A-Z0-9][A-Z0-9\-_.!~*();\/?:@&=+$,#%]*)/gi,j=new h,k=0;for(d=i.exec(a);null!==d;)e=d[0],f=i.lastIndex-e.length,f>k&&j.$(q(a.substring(k,f),b,c)),k=i.lastIndex,g=0===e.toLowerCase().indexOf("http"),g?j.$('<a href="'+e+'" target="_blank" class="link">'+e+"</a>"):j.$('<a href="http://'+e+'" target="_blank" class="link">'+e+"</a>"),d=i.exec(a);return k<a.length&&j.$(q(a.substring(k),b,c)),j.toString()}function s(a,b,c,d,e){if(d=d||0,d===z)return!1;for(var f=o(a,0),g=0;f;){if(f.startPos>g&&b.$(r(a.substring(g,f.startPos),c,e)),f.treatAsText?b.$(r(f.startTag),c):b.$(f.startTag),f.content){var h=f.setRenderMode?{mode:f.setRenderMode,colors:f.colors}:c;if(!s(f.content,b,h,d+1,e))return!1}f.endTag&&(f.treatAsText?b.$(r(f.endTag,c,e)):b.$(f.endTag)),g=f.endPos,f=f.endPos<a.length?o(a,f.endPos):null}return g<a.length&&b.$(r(a.substring(g),c,e)),!0}var t="https:"===window.location.protocol?"https://s.yimg.com/pu/emoticon/v2/":"http://l.yimg.com/pu/emoticon/v2/",u=15,v=6,w=32,x=v,y=w,z=50,A=64,B=[],C=[],D={black:"#000000",red:"#ff0000",green:"#008200",yellow:"#848200",blue:"#0000ff",purple:"#840084",cyan:"#008284",orange:"#ff8000",pink:"#ff0084",gray:"#848284"},E=p(c),F=new h;return s(E,F,{mode:"normal"},null,f)?F.toString():l(c)},domToYml:function(c){a.UA.gecko&&c.innerHTML&&(c.innerHTML=b.removeTrailingBR(c.innerHTML));var d=b.domToYmlRaw(c);return b.addDefaultFont(d,!0,c.style).replace(/\u00a0/g," ")},domToYmlRaw:function(c){var d=["8","10","12","14","18","24","36"],e={"x-small":"1",small:"2",medium:"3",large:"4","x-large":"5","xx-large":"6"},f="",g=0,h=null,i=c.childNodes.length;if(i>0&&(h=c.childNodes),3==c.nodeType)return c.nodeValue;if(1==c.nodeType){switch(c.tagName){case"BR":f+="\n";break;case"B":case"STRONG":for(f+="<b>",g=0;i>g;g++)f+=b.domToYmlRaw(h[g]);f+="</b>";break;case"I":case"EM":for(f+="<i>",g=0;i>g;g++)f+=b.domToYmlRaw(h[g]);f+="</i>";break;case"U":for(f+="<u>",g=0;i>g;g++)f+=b.domToYmlRaw(h[g]);f+="</u>";break;case"DIV":case"SPAN":case"FONT":var j,k,l,m=!1,n=!1,o=!1,p=c.getAttribute("style"),q=!1;if(j=c.getAttribute("face"),k=c.getAttribute("size"),l=c.getAttribute("color"),p&&(c.style.fontFamily&&c.style.fontFamily.length>0&&(j=c.style.fontFamily),c.style.fontSize&&c.style.fontSize.length>0&&(q=!0,k=e[c.style.fontSize]?e[c.style.fontSize]:c.style.fontSize),c.style.color&&c.style.color.length>0&&(l=c.style.color),"bold"==c.style.fontWeight&&(m=!0),"underline"==c.style.textDecoration&&(n=!0),"italic"==c.style.fontStyle&&(o=!0)),j||k||l){if(f+="<font",j&&k?f+=' face="'+j+'" size="'+(q?k:d[k-1])+'"':j&&!k?f+=' face="'+j+'"':!j&&k&&(f+=k.match(/\D/)?' size="'+k+'"':' size="'+d[k-1]+'"'),l){l=l.replace(/\s/g,"");var r;if(r=l.match(/rgb\((\d*),(\d*),(\d*)\)/i)){l="#";var s=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"),t=Math.floor((r[1]-0)/16);l+=s[t]+s[r[1]-0-16*t],t=Math.floor((r[2]-0)/16),l+=s[t]+s[r[2]-0-16*t],t=Math.floor((r[3]-0)/16),l+=s[t]+s[r[3]-0-16*t]}f+=' color="'+l+'"'}f+=">"}for(m&&(f+="<b>"),n&&(f+="<u>"),o&&(f+="<i>"),l&&(f+="["+l+"m"),g=0;i>g;g++)f+=b.domToYmlRaw(h[g]);l&&(f+="[xcm"),o&&(f+="</i>"),n&&(f+="</u>"),m&&(f+="</b>"),(k||j||l)&&(f+="</font>"),a.UA.ie&&"DIV"==c.tagName&&c.parentNode&&c!==c.parentNode.lastChild&&(f+="\n");break;case"IMG":var u=c.getAttribute("alt"),v=c.getAttribute("data-emoticon");v&&u&&(f+=u);break;case"INPUT":case"TEXTAREA":var u=c.value;u&&(f+=u);break;default:for(g=0;i>g;g++)f+=b.domToYmlRaw(h[g])}return f}return""},addClosingTags:function(a){var b=a,c=a.split("<font"),d=c.length-1;c=a.split("</font>");for(var e=c.length-1,f=0;d-e>f;f++)b+="</font>";return b},removeTrailingBR:function(a){var b,c=a;return(b=a.match(/^(.*)<br>(.*)$/))&&(c=b[2].match(/>?[^<>]+?</)?b[1]+"<br>"+b[2]:b[1]+b[2]),c},addDefaultFont:function(a,b,c){if(a.match||(a=""+a),c){var d="",e="";return c.fontFamily&&""!==c.fontFamily&&(e='face="'+c.fontFamily+'"'),c.fontSize&&""!==c.fontSize&&(d='size="'+c.fontSize.replace(/pt/,"")+'"'),(d.length>0||e.length>0)&&(a="<font "+e+" "+d+">"+a+"</font>"),a}for(var f="",g="",h=a;h.match&&h.match(/^<(.*?)>/);){var i=RegExp.$1;if(h=h.replace(/^<(.*?)>/,""),0===i.indexOf("font")&&i.indexOf("size")<0){f=g+"<"+i+' size="'+(b?"12":"2")+'">'+h;break}if(0===i.indexOf("font")){f=g+"<"+i+">"+h;break}g+="<"+i+">"}return 0==f.length&&(f='<font size="'+(b?"12":"2")+'">'+g+h+"</font>"),f}};a.namespace("Messenger").YMLUtil=b},"1.0.0",{requires:["messenger-constants","messenger-utils"]});"use strict";YUI.add("messenger-xframetransport",function(a){function b(){var a,b,c,d=document.getElementsByTagName("script"),e="http://yui.yahooapis.com/combo?3.10.3/yui-base/yui-base-min.js&3.10.3/json-parse/json-parse-min.js&3.10.3/json-stringify/json-stringify-min.js";for(a=0,b=d.length;b>a;a++)if(c=d[a].src,c&&(c.indexOf("yui-min.js")>-1||c.indexOf("yui.js")>-1||c.indexOf("yui-debug.js")>-1)){e=c;break}return e}var c,d=a.Messenger.Common.Utils,e=a.Messenger.urlParams||{},f="https:"===location.protocol,g="xframe-proxy_20130927.html",h=e.ymsgrpws?e.ymsgrpws:f?"https://ycpi-mail-preferences.msg.yahoo.com":"http://preference.msg.yahoo.com",i={yim_core:{url:e.coreServer?e.coreServer:"",proxy_path:"/"+g+"?bc",parsed_url:null,proxy_url:null,xframe:null},yim_notify:{url:e.notifyServer?e.notifyServer:"",proxy_path:"/v2/xframe/"+g+"?bc",parsed_url:null,proxy_url:null,xframe:null},ssp:{url:h,proxy_path:"/"+g+"?cb",parsed_url:null,proxy_url:null,xframe:null}},j=d.parseURI(window.location.href),k=j.protocol+"://"+j.authority;a.namespace("Messenger.Common").Transport={updateServiceURL:function(e){var f;i[e].parsed_url=d.parseURI(i[e].url),i[e].proxy_url=i[e].parsed_url.protocol+"://"+i[e].parsed_url.authority+i[e].proxy_path,null!==i[e].xframe&&i[e].xframe.destroy&&i[e].xframe.destroy(),i[e].url&&""!==i[e].url&&(this.xframePath||(this.xframePath=a.Tictac.base.getBase()+a.Tictac.base.getAssetURL("js/","tictac-mim"),f=window.YUI_config.groups.mim_core.filter,"min"===f?this.xframePath+="xframe-min.js":"debug"===f?this.xframePath+="xframe-debug.js":this.xframePath+="xframe.js"),c||(c=b()),i[e].xframe=new a.Messenger.Xframe({yim_core:i[e].url,proxy:i[e].proxy_url,xframePath:this.xframePath,yuiPath:c,localDomain:k}))},initialize:function(){this.updateServiceURL("yim_core"),this.updateServiceURL("yim_notify")},setServiceURL:function(b,c){var d=this._getService(b);!a.Lang.isString(c)||d.xframe&&c===d.url?c||(d.url=null,d.xframe&&d.xframe.destroy(),d.xframe=null):(d.url=c,this.updateServiceURL(b))},getServiceURL:function(a){return i[a]?i[a].url:void 0},_getService:function(a){return i[a]?i[a]:null},_getServices:function(){return i},setLogoutURL:function(a){var b=this._getService("yim_core");b.xframe.sendLogoutURL(a)},issueRequest:function(b){var c,d=b.id,e=b.body,f=b.method,g=b.server,h=this._getService(g),i=b.path||"",j=b.args||[],k=h.xframe,l=b.timeout||1e4,m=this;k||(this.updateServiceURL(g),k=h.xframe),c=h.url+i+"?"+j.join("&"),a.log("RTCAPIXFRAME: Sending request: Medhod "+f+" url: "+c+" body "+e,"info"),k.send({method:f,timeout:l,url:c,body:e,callback:function(c){a.log("RTCAPIXFRAME: Raw response: "+(a.Lang.isObject(c)?JSON.stringify(c):c)),e=e||"";var f,h={};if("string"==typeof c){if(c=c.replace(/^\s+/,"").replace(/\s+$/,""),""!==c)try{f=JSON.parse(c)}catch(i){}}else f=c;if(f=f||{},f.responseText&&!f.responseObj)try{f.responseObj=JSON.parse(f.responseText)}catch(i){}if(f.responseObj&&f.responseObj.error&&(f.error=f.responseObj.error),""!==e)try{h=JSON.parse(e)}catch(i){}if(f.body=h,f.parameters=b.args,f.error&&701===f.error.code){if(!m._xframeRetryAttempted)return m._xframeRetryAttempted=!0,m.updateServiceURL(g),void m.issueRequest(b);f.error.code=600}b.callback&&b.callback(d,f)}})},killConnections:function(){a.each(this._getServices(),function(a){if(a.xframe)try{a.xframe.destroy()}catch(b){}})},cancelRequests:function(a){var b=this._getService(a).xframe;b&&b.cancelRequests()}}},"1.0.0",{requires:["tictac-base","messenger-utils","xframe"]});YUI.add("underscore", function () {
    (function(){var n=this,t=n._,r={},e=Array.prototype,u=Object.prototype,i=Function.prototype,a=e.push,o=e.slice,c=e.concat,l=u.toString,f=u.hasOwnProperty,s=e.forEach,p=e.map,v=e.reduce,h=e.reduceRight,g=e.filter,d=e.every,m=e.some,y=e.indexOf,b=e.lastIndexOf,x=Array.isArray,_=Object.keys,j=i.bind,w=function(n){return n instanceof w?n:this instanceof w?(this._wrapped=n,void 0):new w(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=w),exports._=w):n._=w,w.VERSION="1.4.3";var A=w.each=w.forEach=function(n,t,e){if(null!=n)if(s&&n.forEach===s)n.forEach(t,e);else if(n.length===+n.length){for(var u=0,i=n.length;i>u;u++)if(t.call(e,n[u],u,n)===r)return}else for(var a in n)if(w.has(n,a)&&t.call(e,n[a],a,n)===r)return};w.map=w.collect=function(n,t,r){var e=[];return null==n?e:p&&n.map===p?n.map(t,r):(A(n,function(n,u,i){e[e.length]=t.call(r,n,u,i)}),e)};var O="Reduce of empty array with no initial value";w.reduce=w.foldl=w.inject=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),v&&n.reduce===v)return e&&(t=w.bind(t,e)),u?n.reduce(t,r):n.reduce(t);if(A(n,function(n,i,a){u?r=t.call(e,r,n,i,a):(r=n,u=!0)}),!u)throw new TypeError(O);return r},w.reduceRight=w.foldr=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),h&&n.reduceRight===h)return e&&(t=w.bind(t,e)),u?n.reduceRight(t,r):n.reduceRight(t);var i=n.length;if(i!==+i){var a=w.keys(n);i=a.length}if(A(n,function(o,c,l){c=a?a[--i]:--i,u?r=t.call(e,r,n[c],c,l):(r=n[c],u=!0)}),!u)throw new TypeError(O);return r},w.find=w.detect=function(n,t,r){var e;return E(n,function(n,u,i){return t.call(r,n,u,i)?(e=n,!0):void 0}),e},w.filter=w.select=function(n,t,r){var e=[];return null==n?e:g&&n.filter===g?n.filter(t,r):(A(n,function(n,u,i){t.call(r,n,u,i)&&(e[e.length]=n)}),e)},w.reject=function(n,t,r){return w.filter(n,function(n,e,u){return!t.call(r,n,e,u)},r)},w.every=w.all=function(n,t,e){t||(t=w.identity);var u=!0;return null==n?u:d&&n.every===d?n.every(t,e):(A(n,function(n,i,a){return(u=u&&t.call(e,n,i,a))?void 0:r}),!!u)};var E=w.some=w.any=function(n,t,e){t||(t=w.identity);var u=!1;return null==n?u:m&&n.some===m?n.some(t,e):(A(n,function(n,i,a){return u||(u=t.call(e,n,i,a))?r:void 0}),!!u)};w.contains=w.include=function(n,t){return null==n?!1:y&&n.indexOf===y?-1!=n.indexOf(t):E(n,function(n){return n===t})},w.invoke=function(n,t){var r=o.call(arguments,2);return w.map(n,function(n){return(w.isFunction(t)?t:n[t]).apply(n,r)})},w.pluck=function(n,t){return w.map(n,function(n){return n[t]})},w.where=function(n,t){return w.isEmpty(t)?[]:w.filter(n,function(n){for(var r in t)if(t[r]!==n[r])return!1;return!0})},w.max=function(n,t,r){if(!t&&w.isArray(n)&&n[0]===+n[0]&&65535>n.length)return Math.max.apply(Math,n);if(!t&&w.isEmpty(n))return-1/0;var e={computed:-1/0,value:-1/0};return A(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a>=e.computed&&(e={value:n,computed:a})}),e.value},w.min=function(n,t,r){if(!t&&w.isArray(n)&&n[0]===+n[0]&&65535>n.length)return Math.min.apply(Math,n);if(!t&&w.isEmpty(n))return 1/0;var e={computed:1/0,value:1/0};return A(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;e.computed>a&&(e={value:n,computed:a})}),e.value},w.shuffle=function(n){var t,r=0,e=[];return A(n,function(n){t=w.random(r++),e[r-1]=e[t],e[t]=n}),e};var F=function(n){return w.isFunction(n)?n:function(t){return t[n]}};w.sortBy=function(n,t,r){var e=F(t);return w.pluck(w.map(n,function(n,t,u){return{value:n,index:t,criteria:e.call(r,n,t,u)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(e>r||void 0===e)return-1}return n.index<t.index?-1:1}),"value")};var k=function(n,t,r,e){var u={},i=F(t||w.identity);return A(n,function(t,a){var o=i.call(r,t,a,n);e(u,o,t)}),u};w.groupBy=function(n,t,r){return k(n,t,r,function(n,t,r){(w.has(n,t)?n[t]:n[t]=[]).push(r)})},w.countBy=function(n,t,r){return k(n,t,r,function(n,t){w.has(n,t)||(n[t]=0),n[t]++})},w.sortedIndex=function(n,t,r,e){r=null==r?w.identity:F(r);for(var u=r.call(e,t),i=0,a=n.length;a>i;){var o=i+a>>>1;u>r.call(e,n[o])?i=o+1:a=o}return i},w.toArray=function(n){return n?w.isArray(n)?o.call(n):n.length===+n.length?w.map(n,w.identity):w.values(n):[]},w.size=function(n){return null==n?0:n.length===+n.length?n.length:w.keys(n).length},w.first=w.head=w.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:o.call(n,0,t)},w.initial=function(n,t,r){return o.call(n,0,n.length-(null==t||r?1:t))},w.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:o.call(n,Math.max(n.length-t,0))},w.rest=w.tail=w.drop=function(n,t,r){return o.call(n,null==t||r?1:t)},w.compact=function(n){return w.filter(n,w.identity)};var R=function(n,t,r){return A(n,function(n){w.isArray(n)?t?a.apply(r,n):R(n,t,r):r.push(n)}),r};w.flatten=function(n,t){return R(n,t,[])},w.without=function(n){return w.difference(n,o.call(arguments,1))},w.uniq=w.unique=function(n,t,r,e){w.isFunction(t)&&(e=r,r=t,t=!1);var u=r?w.map(n,r,e):n,i=[],a=[];return A(u,function(r,e){(t?e&&a[a.length-1]===r:w.contains(a,r))||(a.push(r),i.push(n[e]))}),i},w.union=function(){return w.uniq(c.apply(e,arguments))},w.intersection=function(n){var t=o.call(arguments,1);return w.filter(w.uniq(n),function(n){return w.every(t,function(t){return w.indexOf(t,n)>=0})})},w.difference=function(n){var t=c.apply(e,o.call(arguments,1));return w.filter(n,function(n){return!w.contains(t,n)})},w.zip=function(){for(var n=o.call(arguments),t=w.max(w.pluck(n,"length")),r=Array(t),e=0;t>e;e++)r[e]=w.pluck(n,""+e);return r},w.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},w.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=w.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}if(y&&n.indexOf===y)return n.indexOf(t,r);for(;u>e;e++)if(n[e]===t)return e;return-1},w.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(b&&n.lastIndexOf===b)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var u=e?r:n.length;u--;)if(n[u]===t)return u;return-1},w.range=function(n,t,r){1>=arguments.length&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=0,i=Array(e);e>u;)i[u++]=n,n+=r;return i};var I=function(){};w.bind=function(n,t){var r,e;if(n.bind===j&&j)return j.apply(n,o.call(arguments,1));if(!w.isFunction(n))throw new TypeError;return r=o.call(arguments,2),e=function(){if(!(this instanceof e))return n.apply(t,r.concat(o.call(arguments)));I.prototype=n.prototype;var u=new I;I.prototype=null;var i=n.apply(u,r.concat(o.call(arguments)));return Object(i)===i?i:u}},w.bindAll=function(n){var t=o.call(arguments,1);return 0==t.length&&(t=w.functions(n)),A(t,function(t){n[t]=w.bind(n[t],n)}),n},w.memoize=function(n,t){var r={};return t||(t=w.identity),function(){var e=t.apply(this,arguments);return w.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},w.delay=function(n,t){var r=o.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},w.defer=function(n){return w.delay.apply(w,[n,1].concat(o.call(arguments,1)))},w.throttle=function(n,t){var r,e,u,i,a=0,o=function(){a=new Date,u=null,i=n.apply(r,e)};return function(){var c=new Date,l=t-(c-a);return r=this,e=arguments,0>=l?(clearTimeout(u),u=null,a=c,i=n.apply(r,e)):u||(u=setTimeout(o,l)),i}},w.debounce=function(n,t,r){var e,u;return function(){var i=this,a=arguments,o=function(){e=null,r||(u=n.apply(i,a))},c=r&&!e;return clearTimeout(e),e=setTimeout(o,t),c&&(u=n.apply(i,a)),u}},w.once=function(n){var t,r=!1;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t)}},w.wrap=function(n,t){return function(){var r=[n];return a.apply(r,arguments),t.apply(this,r)}},w.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},w.after=function(n,t){return 0>=n?t():function(){return 1>--n?t.apply(this,arguments):void 0}},w.keys=_||function(n){if(n!==Object(n))throw new TypeError("Invalid object");var t=[];for(var r in n)w.has(n,r)&&(t[t.length]=r);return t},w.values=function(n){var t=[];for(var r in n)w.has(n,r)&&t.push(n[r]);return t},w.pairs=function(n){var t=[];for(var r in n)w.has(n,r)&&t.push([r,n[r]]);return t},w.invert=function(n){var t={};for(var r in n)w.has(n,r)&&(t[n[r]]=r);return t},w.functions=w.methods=function(n){var t=[];for(var r in n)w.isFunction(n[r])&&t.push(r);return t.sort()},w.extend=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},w.pick=function(n){var t={},r=c.apply(e,o.call(arguments,1));return A(r,function(r){r in n&&(t[r]=n[r])}),t},w.omit=function(n){var t={},r=c.apply(e,o.call(arguments,1));for(var u in n)w.contains(r,u)||(t[u]=n[u]);return t},w.defaults=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)null==n[r]&&(n[r]=t[r])}),n},w.clone=function(n){return w.isObject(n)?w.isArray(n)?n.slice():w.extend({},n):n},w.tap=function(n,t){return t(n),n};var S=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof w&&(n=n._wrapped),t instanceof w&&(t=t._wrapped);var u=l.call(n);if(u!=l.call(t))return!1;switch(u){case"[object String]":return n==t+"";case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]==n)return e[i]==t;r.push(n),e.push(t);var a=0,o=!0;if("[object Array]"==u){if(a=n.length,o=a==t.length)for(;a--&&(o=S(n[a],t[a],r,e)););}else{var c=n.constructor,f=t.constructor;if(c!==f&&!(w.isFunction(c)&&c instanceof c&&w.isFunction(f)&&f instanceof f))return!1;for(var s in n)if(w.has(n,s)&&(a++,!(o=w.has(t,s)&&S(n[s],t[s],r,e))))break;if(o){for(s in t)if(w.has(t,s)&&!a--)break;o=!a}}return r.pop(),e.pop(),o};w.isEqual=function(n,t){return S(n,t,[],[])},w.isEmpty=function(n){if(null==n)return!0;if(w.isArray(n)||w.isString(n))return 0===n.length;for(var t in n)if(w.has(n,t))return!1;return!0},w.isElement=function(n){return!(!n||1!==n.nodeType)},w.isArray=x||function(n){return"[object Array]"==l.call(n)},w.isObject=function(n){return n===Object(n)},A(["Arguments","Function","String","Number","Date","RegExp"],function(n){w["is"+n]=function(t){return l.call(t)=="[object "+n+"]"}}),w.isArguments(arguments)||(w.isArguments=function(n){return!(!n||!w.has(n,"callee"))}),w.isFunction=function(n){return"function"==typeof n},w.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},w.isNaN=function(n){return w.isNumber(n)&&n!=+n},w.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==l.call(n)},w.isNull=function(n){return null===n},w.isUndefined=function(n){return void 0===n},w.has=function(n,t){return f.call(n,t)},w.noConflict=function(){return n._=t,this},w.identity=function(n){return n},w.times=function(n,t,r){for(var e=Array(n),u=0;n>u;u++)e[u]=t.call(r,u);return e},w.random=function(n,t){return null==t&&(t=n,n=0),n+(0|Math.random()*(t-n+1))};var T={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};T.unescape=w.invert(T.escape);var M={escape:RegExp("["+w.keys(T.escape).join("")+"]","g"),unescape:RegExp("("+w.keys(T.unescape).join("|")+")","g")};w.each(["escape","unescape"],function(n){w[n]=function(t){return null==t?"":(""+t).replace(M[n],function(t){return T[n][t]})}}),w.result=function(n,t){if(null==n)return null;var r=n[t];return w.isFunction(r)?r.call(n):r},w.mixin=function(n){A(w.functions(n),function(t){var r=w[t]=n[t];w.prototype[t]=function(){var n=[this._wrapped];return a.apply(n,arguments),z.call(this,r.apply(w,n))}})};var N=0;w.uniqueId=function(n){var t=""+ ++N;return n?n+t:t},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\t|\u2028|\u2029/g;w.template=function(n,t,r){r=w.defaults({},r,w.templateSettings);var e=RegExp([(r.escape||q).source,(r.interpolate||q).source,(r.evaluate||q).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(t,r,e,a,o){return i+=n.slice(u,o).replace(D,function(n){return"\\"+B[n]}),r&&(i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(i+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),a&&(i+="';\n"+a+"\n__p+='"),u=o+t.length,t}),i+="';\n",r.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var a=Function(r.variable||"obj","_",i)}catch(o){throw o.source=i,o}if(t)return a(t,w);var c=function(n){return a.call(this,n,w)};return c.source="function("+(r.variable||"obj")+"){\n"+i+"}",c},w.chain=function(n){return w(n).chain()};var z=function(n){return this._chain?w(n).chain():n};w.mixin(w),A(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=e[n];w.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],z.call(this,r)}}),A(["concat","join","slice"],function(n){var t=e[n];w.prototype[n]=function(){return z.call(this,t.apply(this._wrapped,arguments))}}),w.extend(w.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(window);
});YUI.add("backbone", function () {
// Backbone.js 0.9.10
// (c) 2010-2012 Jeremy Ashkenas, DocumentCloud Inc.
// Backbone may be freely distributed under the MIT license.
// For all details and documentation:
// http://backbonejs.org
(function(){var n=this,B=n.Backbone,h=[],C=h.push,u=h.slice,D=h.splice,g;g="undefined"!==typeof exports?exports:n.Backbone={};g.VERSION="0.9.10";var f=n._;!f&&"undefined"!==typeof require&&(f=require("underscore"));g.$=n.jQuery||n.Zepto||n.ender;g.noConflict=function(){n.Backbone=B;return this};g.emulateHTTP=!1;g.emulateJSON=!1;var v=/\s+/,q=function(a,b,c,d){if(!c)return!0;if("object"===typeof c)for(var e in c)a[b].apply(a,[e,c[e]].concat(d));else if(v.test(c)){c=c.split(v);e=0;for(var f=c.length;e<
f;e++)a[b].apply(a,[c[e]].concat(d))}else return!0},w=function(a,b){var c,d=-1,e=a.length;switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);break;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,b[0]);break;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,b[0],b[1]);break;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,b[0],b[1],b[2]);break;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}},h=g.Events={on:function(a,b,c){if(!q(this,"on",a,[b,c])||!b)return this;this._events||(this._events=
{});(this._events[a]||(this._events[a]=[])).push({callback:b,context:c,ctx:c||this});return this},once:function(a,b,c){if(!q(this,"once",a,[b,c])||!b)return this;var d=this,e=f.once(function(){d.off(a,e);b.apply(this,arguments)});e._callback=b;this.on(a,e,c);return this},off:function(a,b,c){var d,e,t,g,j,l,k,h;if(!this._events||!q(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;g=a?[a]:f.keys(this._events);j=0;for(l=g.length;j<l;j++)if(a=g[j],d=this._events[a]){t=[];if(b||
c){k=0;for(h=d.length;k<h;k++)e=d[k],(b&&b!==e.callback&&b!==e.callback._callback||c&&c!==e.context)&&t.push(e)}this._events[a]=t}return this},trigger:function(a){if(!this._events)return this;var b=u.call(arguments,1);if(!q(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;c&&w(c,b);d&&w(d,arguments);return this},listenTo:function(a,b,c){var d=this._listeners||(this._listeners={}),e=a._listenerId||(a._listenerId=f.uniqueId("l"));d[e]=a;a.on(b,"object"===typeof b?this:c,this);
return this},stopListening:function(a,b,c){var d=this._listeners;if(d){if(a)a.off(b,"object"===typeof b?this:c,this),!b&&!c&&delete d[a._listenerId];else{"object"===typeof b&&(c=this);for(var e in d)d[e].off(b,c,this);this._listeners={}}return this}}};h.bind=h.on;h.unbind=h.off;f.extend(g,h);var r=g.Model=function(a,b){var c,d=a||{};this.cid=f.uniqueId("c");this.attributes={};b&&b.collection&&(this.collection=b.collection);b&&b.parse&&(d=this.parse(d,b)||{});if(c=f.result(this,"defaults"))d=f.defaults({},
d,c);this.set(d,b);this.changed={};this.initialize.apply(this,arguments)};f.extend(r.prototype,h,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(){return f.clone(this.attributes)},sync:function(){return g.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return f.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,c){var d,e,g,p,j,l,k;if(null==a)return this;"object"===typeof a?(e=a,c=b):(e={})[a]=b;c||(c={});
if(!this._validate(e,c))return!1;g=c.unset;p=c.silent;a=[];j=this._changing;this._changing=!0;j||(this._previousAttributes=f.clone(this.attributes),this.changed={});k=this.attributes;l=this._previousAttributes;this.idAttribute in e&&(this.id=e[this.idAttribute]);for(d in e)b=e[d],f.isEqual(k[d],b)||a.push(d),f.isEqual(l[d],b)?delete this.changed[d]:this.changed[d]=b,g?delete k[d]:k[d]=b;if(!p){a.length&&(this._pending=!0);b=0;for(d=a.length;b<d;b++)this.trigger("change:"+a[b],this,k[a[b]],c)}if(j)return this;
if(!p)for(;this._pending;)this._pending=!1,this.trigger("change",this,c);this._changing=this._pending=!1;return this},unset:function(a,b){return this.set(a,void 0,f.extend({},b,{unset:!0}))},clear:function(a){var b={},c;for(c in this.attributes)b[c]=void 0;return this.set(b,f.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!f.isEmpty(this.changed):f.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?f.clone(this.changed):!1;var b,c=!1,d=this._changing?
this._previousAttributes:this.attributes,e;for(e in a)if(!f.isEqual(d[e],b=a[e]))(c||(c={}))[e]=b;return c},previous:function(a){return null==a||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return f.clone(this._previousAttributes)},fetch:function(a){a=a?f.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=a.success;a.success=function(a,d,e){if(!a.set(a.parse(d,e),e))return!1;b&&b(a,d,e)};return this.sync("read",this,a)},save:function(a,b,c){var d,e,g=this.attributes;
null==a||"object"===typeof a?(d=a,c=b):(d={})[a]=b;if(d&&(!c||!c.wait)&&!this.set(d,c))return!1;c=f.extend({validate:!0},c);if(!this._validate(d,c))return!1;d&&c.wait&&(this.attributes=f.extend({},g,d));void 0===c.parse&&(c.parse=!0);e=c.success;c.success=function(a,b,c){a.attributes=g;var k=a.parse(b,c);c.wait&&(k=f.extend(d||{},k));if(f.isObject(k)&&!a.set(k,c))return!1;e&&e(a,b,c)};a=this.isNew()?"create":c.patch?"patch":"update";"patch"===a&&(c.attrs=d);a=this.sync(a,this,c);d&&c.wait&&(this.attributes=
g);return a},destroy:function(a){a=a?f.clone(a):{};var b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};a.success=function(a,b,e){(e.wait||a.isNew())&&d();c&&c(a,b,e)};if(this.isNew())return a.success(this,null,a),!1;var e=this.sync("delete",this,a);a.wait||d();return e},url:function(){var a=f.result(this,"urlRoot")||f.result(this.collection,"url")||x();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},
isNew:function(){return null==this.id},isValid:function(a){return!this.validate||!this.validate(this.attributes,a)},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=f.extend({},this.attributes,a);var c=this.validationError=this.validate(a,b)||null;if(!c)return!0;this.trigger("invalid",this,c,b||{});return!1}});var s=g.Collection=function(a,b){b||(b={});b.model&&(this.model=b.model);void 0!==b.comparator&&(this.comparator=b.comparator);this.models=[];this._reset();this.initialize.apply(this,
arguments);a&&this.reset(a,f.extend({silent:!0},b))};f.extend(s.prototype,h,{model:r,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return g.sync.apply(this,arguments)},add:function(a,b){a=f.isArray(a)?a.slice():[a];b||(b={});var c,d,e,g,p,j,l,k,h,m;l=[];k=b.at;h=this.comparator&&null==k&&!1!=b.sort;m=f.isString(this.comparator)?this.comparator:null;c=0;for(d=a.length;c<d;c++)(e=this._prepareModel(g=a[c],b))?(p=this.get(e))?b.merge&&(p.set(g===
e?e.attributes:g,b),h&&(!j&&p.hasChanged(m))&&(j=!0)):(l.push(e),e.on("all",this._onModelEvent,this),this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e)):this.trigger("invalid",this,g,b);l.length&&(h&&(j=!0),this.length+=l.length,null!=k?D.apply(this.models,[k,0].concat(l)):C.apply(this.models,l));j&&this.sort({silent:!0});if(b.silent)return this;c=0;for(d=l.length;c<d;c++)(e=l[c]).trigger("add",e,this,b);j&&this.trigger("sort",this,b);return this},remove:function(a,b){a=f.isArray(a)?a.slice():[a];
b||(b={});var c,d,e,g;c=0;for(d=a.length;c<d;c++)if(g=this.get(a[c]))delete this._byId[g.id],delete this._byId[g.cid],e=this.indexOf(g),this.models.splice(e,1),this.length--,b.silent||(b.index=e,g.trigger("remove",g,this,b)),this._removeReference(g);return this},push:function(a,b){a=this._prepareModel(a,b);this.add(a,f.extend({at:this.length},b));return a},pop:function(a){var b=this.at(this.length-1);this.remove(b,a);return b},unshift:function(a,b){a=this._prepareModel(a,b);this.add(a,f.extend({at:0},
b));return a},shift:function(a){var b=this.at(0);this.remove(b,a);return b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){if(null!=a)return this._idAttr||(this._idAttr=this.model.prototype.idAttribute),this._byId[a.id||a.cid||a[this._idAttr]||a]},at:function(a){return this.models[a]},where:function(a){return f.isEmpty(a)?[]:this.filter(function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},sort:function(a){if(!this.comparator)throw Error("Cannot sort a set without a comparator");
a||(a={});f.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(f.bind(this.comparator,this));a.silent||this.trigger("sort",this,a);return this},pluck:function(a){return f.invoke(this.models,"get",a)},update:function(a,b){b=f.extend({add:!0,merge:!0,remove:!0},b);b.parse&&(a=this.parse(a,b));var c,d,e,g,h=[],j=[],l={};f.isArray(a)||(a=a?[a]:[]);if(b.add&&!b.remove)return this.add(a,b);d=0;for(e=a.length;d<e;d++)c=a[d],g=this.get(c),
b.remove&&g&&(l[g.cid]=!0),(b.add&&!g||b.merge&&g)&&h.push(c);if(b.remove){d=0;for(e=this.models.length;d<e;d++)c=this.models[d],l[c.cid]||j.push(c)}j.length&&this.remove(j,b);h.length&&this.add(h,b);return this},reset:function(a,b){b||(b={});b.parse&&(a=this.parse(a,b));for(var c=0,d=this.models.length;c<d;c++)this._removeReference(this.models[c]);b.previousModels=this.models.slice();this._reset();a&&this.add(a,f.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return this},fetch:function(a){a=
a?f.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=a.success;a.success=function(a,d,e){a[e.update?"update":"reset"](d,e);b&&b(a,d,e)};return this.sync("read",this,a)},create:function(a,b){b=b?f.clone(b):{};if(!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,d=b.success;b.success=function(a,b,f){f.wait&&c.add(a,f);d&&d(a,b,f)};a.save(null,b);return a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models.length=
0;this._byId={}},_prepareModel:function(a,b){if(a instanceof r)return a.collection||(a.collection=this),a;b||(b={});b.collection=this;var c=new this.model(a,b);return!c._validate(a,b)?!1:c},_removeReference:function(a){this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"===a||"remove"===a)&&c!==this||("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=
b)),this.trigger.apply(this,arguments))},sortedIndex:function(a,b,c){b||(b=this.comparator);var d=f.isFunction(b)?b:function(a){return a.get(b)};return f.sortedIndex(this.models,a,d,c)}});f.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without indexOf shuffle lastIndexOf isEmpty chain".split(" "),function(a){s.prototype[a]=function(){var b=
u.call(arguments);b.unshift(this.models);return f[a].apply(f,b)}});f.each(["groupBy","countBy","sortBy"],function(a){s.prototype[a]=function(b,c){var d=f.isFunction(b)?b:function(a){return a.get(b)};return f[a](this.models,d,c)}});var y=g.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},E=/\((.*?)\)/g,F=/(\(\?)?:\w+/g,G=/\*\w+/g,H=/[\-{}\[\]+?.,\\\^$|#\s]/g;f.extend(y.prototype,h,{initialize:function(){},route:function(a,b,c){f.isRegExp(a)||
(a=this._routeToRegExp(a));c||(c=this[b]);g.history.route(a,f.bind(function(d){d=this._extractParameters(a,d);c&&c.apply(this,d);this.trigger.apply(this,["route:"+b].concat(d));this.trigger("route",b,d);g.history.trigger("route",this,b,d)},this));return this},navigate:function(a,b){g.history.navigate(a,b);return this},_bindRoutes:function(){if(this.routes)for(var a,b=f.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])},_routeToRegExp:function(a){a=a.replace(H,"\\$&").replace(E,"(?:$1)?").replace(F,
function(a,c){return c?a:"([^/]+)"}).replace(G,"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,b){return a.exec(b).slice(1)}});var m=g.History=function(){this.handlers=[];f.bindAll(this,"checkUrl");"undefined"!==typeof window&&(this.location=window.location,this.history=window.history)},z=/^[#\/]|\s+$/g,I=/^\/+|\/+$/g,J=/msie [\w.]+/,K=/\/$/;m.started=!1;f.extend(m.prototype,h,{interval:50,getHash:function(a){return(a=(a||this).location.href.match(/#(.*)$/))?a[1]:""},getFragment:function(a,
b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=this.location.pathname;var c=this.root.replace(K,"");a.indexOf(c)||(a=a.substr(c.length))}else a=this.getHash();return a.replace(z,"")},start:function(a){if(m.started)throw Error("Backbone.history has already been started");m.started=!0;this.options=f.extend({},{root:"/"},this.options,a);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!(!this.options.pushState||
!this.history||!this.history.pushState);a=this.getFragment();var b=document.documentMode,b=J.exec(navigator.userAgent.toLowerCase())&&(!b||7>=b);this.root=("/"+this.root+"/").replace(I,"/");b&&this._wantsHashChange&&(this.iframe=g.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(a));if(this._hasPushState)g.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&!b)g.$(window).on("hashchange",this.checkUrl);
else this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=a;a=this.location;b=a.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!b)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&(this._hasPushState&&b&&a.hash)&&(this.fragment=this.getHash().replace(z,""),this.history.replaceState({},document.title,
this.root+this.fragment+a.search));if(!this.options.silent)return this.loadUrl()},stop:function(){g.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);m.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));if(a===this.fragment)return!1;this.iframe&&this.navigate(a);this.loadUrl()||this.loadUrl(this.getHash())},
loadUrl:function(a){var b=this.fragment=this.getFragment(a);return f.any(this.handlers,function(a){if(a.route.test(b))return a.callback(b),!0})},navigate:function(a,b){if(!m.started)return!1;if(!b||!0===b)b={trigger:b};a=this.getFragment(a||"");if(this.fragment!==a){this.fragment=a;var c=this.root+a;if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else if(this._wantsHashChange)this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&
(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace));else return this.location.assign(c);b.trigger&&this.loadUrl(a)}},_updateHash:function(a,b,c){c?(c=a.href.replace(/(javascript:|#).*$/,""),a.replace(c+"#"+b)):a.hash="#"+b}});g.history=new m;var A=g.View=function(a){this.cid=f.uniqueId("view");this._configure(a||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},L=/^(\S+)\s*(.*)$/,M="model collection el id attributes className tagName events".split(" ");
f.extend(A.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(a,b){this.$el&&this.undelegateEvents();this.$el=a instanceof g.$?a:g.$(a);this.el=this.$el[0];!1!==b&&this.delegateEvents();return this},delegateEvents:function(a){if(a||(a=f.result(this,"events"))){this.undelegateEvents();for(var b in a){var c=a[b];f.isFunction(c)||(c=this[a[b]]);
if(!c)throw Error('Method "'+a[b]+'" does not exist');var d=b.match(L),e=d[1],d=d[2],c=f.bind(c,this),e=e+(".delegateEvents"+this.cid);if(""===d)this.$el.on(e,c);else this.$el.on(e,d,c)}}},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid)},_configure:function(a){this.options&&(a=f.extend({},f.result(this,"options"),a));f.extend(this,f.pick(a,M));this.options=a},_ensureElement:function(){if(this.el)this.setElement(f.result(this,"el"),!1);else{var a=f.extend({},f.result(this,"attributes"));
this.id&&(a.id=f.result(this,"id"));this.className&&(a["class"]=f.result(this,"className"));a=g.$("<"+f.result(this,"tagName")+">").attr(a);this.setElement(a,!1)}}});var N={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};g.sync=function(a,b,c){var d=N[a];f.defaults(c||(c={}),{emulateHTTP:g.emulateHTTP,emulateJSON:g.emulateJSON});var e={type:d,dataType:"json"};c.url||(e.url=f.result(b,"url")||x());if(null==c.data&&b&&("create"===a||"update"===a||"patch"===a))e.contentType="application/json",
e.data=JSON.stringify(c.attrs||b.toJSON(c));c.emulateJSON&&(e.contentType="application/x-www-form-urlencoded",e.data=e.data?{model:e.data}:{});if(c.emulateHTTP&&("PUT"===d||"DELETE"===d||"PATCH"===d)){e.type="POST";c.emulateJSON&&(e.data._method=d);var h=c.beforeSend;c.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",d);if(h)return h.apply(this,arguments)}}"GET"!==e.type&&!c.emulateJSON&&(e.processData=!1);var m=c.success;c.success=function(a){m&&m(b,a,c);b.trigger("sync",b,a,c)};
var j=c.error;c.error=function(a){j&&j(b,a,c);b.trigger("error",b,a,c)};a=c.xhr=g.ajax(f.extend(e,c));b.trigger("request",b,a,c);return a};g.ajax=function(){return g.$.ajax.apply(g.$,arguments)};r.extend=s.extend=y.extend=A.extend=m.extend=function(a,b){var c=this,d;d=a&&f.has(a,"constructor")?a.constructor:function(){return c.apply(this,arguments)};f.extend(d,c,b);var e=function(){this.constructor=d};e.prototype=c.prototype;d.prototype=new e;a&&f.extend(d.prototype,a);d.__super__=c.prototype;return d};
var x=function(){throw Error('A "url" property or function must be specified');}}).call(window);}, "", {requires: ["underscore"]});YUI.add("messenger-requestmanager",function(a){"use strict";var b,c=110,d=12e4,e=12e5,f={KEEPALIVE:{method:"PUT",path:"/v1/session/keepalive",args:["notifyServerToken=2"]},GET_CRUMB:{method:"GET",path:"/v1/session",args:["amIOnline=0"]}},g=a.Messenger.Common.Constants.EVENTS,h=a.Messenger.Common.Utils,i="undefined"!=typeof navigator.onLine,j=0;b={appId:"mim",crumb:null,sessionId:null,imToken:null,primaryLoginId:null,transport:null,initialize:function(){this.transport=this.transport||a.Messenger.Common.Transport,this._notifyLog={},this._listeners={},this._watchers={},this._pendingRequests=[],i&&(this._boundOffline=a.bind(this._handleOffline,this),window.addEventListener?window.addEventListener("offline",this._boundOffline,!1):window.attachEvent("onoffline",this._boundOffline),this._boundOnline=a.bind(this._handleOnline,this),window.addEventListener?window.addEventListener("online",this._boundOnline,!1):window.attachEvent("ononline",this._boundOnline))},destroy:function(){i&&(window.removeEventListener?(window.removeEventListener("offline",this._boundOffline,!1),window.removeEventListener("online",this._boundOnline,!1)):(window.detachEvent("onoffline",this._boundOffline),window.detachEvent("ononline",this._boundOnline)))},setTransport:function(a){this.transport=a},setServerURL:function(b,c){a.log("Connecting to server "+b),this.transport.setServiceURL(b,c)},issueRequest:function(b,c){function d(d,e){if(a.log("Data received from "+k),e.error){if(i>c)return void p.issueRequest(b,++c);if(-1002===e.error.code||"HANGING_GET"===n&&403===e.httpStatus){if("GET_CRUMB"!==n)return p._refreshingCrumb?(p._refreshingCrumb=!1,void p._handleSessionExpired()):(p._refreshingCrumb=!0,p.crumb=null,p.getCrumb(),void p._pendingRequests.push(b))}else switch(e.error.code){case 28:p._handleSessionExpired();break;case 4:case 30:return p.trigger(g.FATAL_IO_ERROR),void p._clearState();case 600:return p.trigger(g.FATAL_IO_ERROR),void p._clearState();case 700:return void p.issueRequest(b)}}else"GET_CRUMB"!==n&&p._refreshingCrumb&&(a.log("Crumb refresh successful"),p._refreshingCrumb=!1);e.error?b.errorCallback&&b.errorCallback(e):("LOGIN"===n?p.processLoginData(e):"LOGOUT"===n&&p._clearState(),b.successCallback&&b.successCallback(e))}var e,f=this.transport,h=b.args?b.args.slice(0):[],i=b.retries||0,k=b.server||"yim_core",l=b.method,m=b.path,n=b.type,o=b.postBody,p=this,q="https:"===location.protocol,r=q?"https://ycpi-mail-rest-core.msg.yahoo.com":"http://prod.rest-core.msg.yahoo.com";if(c=c||0,!f)throw new Error("Attempt made to issue a request using RequestManager without setting a transport");if("yim_core"===k||"yim_notify"===k)if(this.crumb){if(!this.sessionId&&"LOGIN"!==n)return void a.log("Attempted "+n+" request without session ID!","warn","RequestManager")}else if("GET_CRUMB"!==n)return this.sessionId||"LOGIN"===n?(this.getCrumb(),void this._pendingRequests.push(b)):void a.log("Attempted "+n+" request without session ID!","warn","RequestManager");"yim_notify"===k&&h.push("imtoken="+encodeURIComponent(this.imToken)),this.crumb&&h.push("c="+encodeURIComponent(this.crumb)),this.sessionId&&"GET_CRUMB"!==n&&h.push("sid="+encodeURIComponent(this.sessionId)),e="object"==typeof o?JSON.stringify(o):o,"yim_core"!==k||f.getServiceURL(k)||this.setServerURL("yim_core",r),"DELETE"===l&&"ssp"!==k&&(h.push("_method=delete"),l="POST"),h.push("msgrAppId="+this.appId),h.push("cache="+(new Date).getTime()),f.issueRequest({args:h,body:e,method:l,server:k,path:m,id:++j,timeout:b.timeout,callback:d})},startListening:function(){this._listening||(this._listening=!0,this._notifySequence=0,this._getNotifications(),this._keepaliveTimer=a.later(e,this,this._keepAlive,null,!0))},processLoginData:function(b){var c=this,d=a.Messenger.urlParams||{};this.sessionId=b.sessionId,this.primaryLoginId=b.primaryLoginId,this.imToken=b.notifyServerToken.token,d.coreServer?this.setServerURL("yim_core",a.Messenger.urlParams.coreServer):this.setServerURL("yim_core",window.location.protocol+"//"+b.server),d.notifyServer?this.setServerURL("yim_notify",d.notifyServer):this.setServerURL("yim_notify",window.location.protocol+"//"+b.notifyServer),this.startListening(),a.later(0,null,function(){var a=window.location.protocol+"//"+b.server+"/v1/session/delete?logoffType=0";a+="&sid="+encodeURIComponent(b.sessionId),a+="&c="+encodeURIComponent(c.crumb),a+="&msgrAppId=mim&blocking=0",c.setLogoutURL(a)})},addListener:function(a,b){if(this._listeners[a]=this._listeners[a]||[],this._listeners[a].push(b),this._notifyLog[a])for(;this._notifyLog[a].length;)b(this._notifyLog[a].pop());return function(a,b,c){return{detach:function(){a._listeners[b].splice(c,1)}}}(this,a,this._listeners[a].length-1)},addListeners:function(a){var b,c;for(b=0,c=a.length;c>b;b++)this.addListener(a[b].id,a[b].callback)},watchNotifications:function(a,b){var c,d;if(this._watchers[a]=this._watchers[a]||[],this._watchers[a].push(b),this._notifyLog[a])for(c=0,d=this._notifyLog[a].length;d>c;c++)b(this._notifyLog[a][c]);return function(a,b,c){return{detach:function(){a._watchers[b].splice(c,1)}}}(this,a,this._watchers[a].length-1)},getCrumb:function(a){var b=f.GET_CRUMB,c=this;a=a||{},a.checkStatus&&(b.args=["amIOnline=1"]),c._crumbPending||(c._crumbPending=!0,c.crumb=null,c.issueRequest({type:"GET_CRUMB",method:b.method,path:b.path,args:b.args,successCallback:function(b){for(c.crumb=b.crumb;c._pendingRequests.length;)c.issueRequest(c._pendingRequests.pop());c._crumbPending=!1,a.successCallback&&a.successCallback(b)},errorCallback:function(){c._crumbPending=!1,c.trigger(g.FATAL_IO_ERROR),c._clearState()}}))},killConnections:function(){if(this._logoutUrl){var a=new Image;a.src=this._logoutUrl,this._logoutUrl=null}this.transport.killConnections()},setLogoutURL:function(a){this._logoutUrl=a,this.transport.setLogoutURL(a)},_getNotifications:function(){this._notifySequence=this._notifySequence||0,this._notifyPending||(this._notifyPending=!0,this.issueRequest({type:"HANGING_GET",timeout:d,server:"yim_notify",method:"GET",path:"/v1/pushchannel/"+this.primaryLoginId,args:["seq="+this._notifySequence,"format=json","idle="+c],successCallback:a.bind(this._getNotificationsSuccessCallback,this),errorCallback:a.bind(this._getNotificationsErrorCallback,this)}))},_getNotificationsSuccessCallback:function(b){this._notifyPending=!1;var c=this,d=b.responses||[];c._hgRetryCount&&(c._hgRetryCount=0,c.trigger(g.NETWORK_ERROR_RESOLVED)),a.Messenger.logPerf("Processing "+d.length+" notifications in RequestManager"),h.doLongWork(d,function(b){var d,e,f;for(d in b)if(b.hasOwnProperty(d)){if(c._notifySequence++,"disconnect"===d&&c._clearState(),c._listeners[d])for(e=0,f=c._listeners[d].length;f>e;e++)try{c._listeners[d][e](b[d])}catch(g){a.log("Error invoking notification handler for notification "+d+":  "+g.message)}else c._notifyLog[d]=c._notifyLog[d]||[],c._notifyLog[d].push(b[d]);if(c._watchers[d])for(e=0,f=c._watchers[d].length;f>e;e++)c._watchers[d][e](b[d])}},function(){a.Messenger.logPerf("Finished processing "+d.length+" notifications"),c._listening&&c._getNotifications()})},_getNotificationsErrorCallback:function(){this._notifyPending=!1;var b;this._listening&&(this._hgRetryCount||(this._hgRetryCount=0,this.trigger(g.TEMP_NETWORK_ERROR)),this._hgRetryCount++,b=this._hgRetryCount<10?500:5e3,a.later(b,this,this._getNotifications))},_handleSessionExpired:function(){this._clearState(),this.trigger(g.SESSION_EXPIRED)},_clearState:function(){this.crumb=this.sessionId=this.imToken=null,this._pendingRequests=[],this._listening=!1,this._notifySequence=0,this._crumbPending=!1,this._notifyPending=!1,this._keepaliveTimer&&(this._keepaliveTimer.cancel(),delete this._keepaliveTimer),this.transport.cancelRequests("yim_notify")},_handleOffline:function(){this._listening&&(this._listening=!1,this.transport.cancelRequests("yim_notify"))},_handleOnline:function(){this._keepaliveTimer&&(this._listening=!0,this._getNotifications())},_keepAlive:function(){var b=f.KEEPALIVE,c=this;this.issueRequest({type:"KEEPALIVE",method:b.method,path:b.path,args:b.args,successCallback:a.bind(function(a){a.notifyServerToken&&a.notifyServerToken.token&&(c.imToken=a.notifyServerToken.token)},c)})}},_.extend(b,Backbone.Events),a.namespace("Messenger.Common").RequestManager=b,b.initialize()},"@VERSION@",{requires:["messenger-constants","oop","backbone","messenger-utils"]});YUI.add("tictac-base-model",function(a){"use strict";a.namespace("Tictac.base").Model=Backbone.Model.extend({initialize:function(){var a=this;a.trackChanges&&(a.changedProperties={},a._previousState={},a.on("change",a._handleChange,a))},_handleChange:function(b){var c=this;a.mix(c.changedProperties,c.changedAttributes(),!0),a.each(b.changed,function(a,b){b in c._previousState||(c._previousState[b]=c.previous(b))})},isDirty:function(){return this.trackChanges&&!_.isEmpty(this.changedProperties)},getChanges:function(){return this.changedProperties},resetChanges:function(){this.changedProperties={},this._previousState={}},undoChanges:function(){var a=this;a.trackChanges&&!_.isEmpty(a._previousState)&&(a.set(a._previousState,{silent:!0}),a.resetChanges())},destroy:function(a){a=a||{},a.wait=!1,Backbone.Model.prototype.destroy.apply(this,arguments),this.off()},sync:function(a,b,c){if("delete"!==a)throw new Error("Sync called for unsupported method");c&&c.success&&c.success(this,null,c)}})},"@VERSION@",{requires:["backbone"]});YUI.add("messenger-contact",function(a){"use strict";var b=a.Messenger.Common.Constants,c=a.Messenger.Common.Utils,d={ACCEPT_ADD:{method:"POST",path:"/v1/buddyrequest/{{network}}/{{adderId}}"},ADD_USER:{method:"PUT",path:"/v1/group/{{groupname}}/contact/{{network}}/{{user}}"},DENY_ADD:{method:"DELETE",path:"/v1/buddyrequest/{{network}}/{{adderId}}"},IGNORE_USER:{method:"PUT",path:"/v1/ignorelist/{{network}}/{{user}}"},UNIGNORE_USER:{method:"DELETE",path:"/v1/ignorelist/{{network}}/{{user}}"},REPORT_SPAM:{method:"POST",path:"/v1/abuse/spim"},DELETE_USER:{method:"DELETE",path:"/v1/group/{{group}}/contact/{{network}}/{{user}}"},EDIT_CONTACT:{method:"PUT",path:"/v1/contact/{{network}}/{{contactId}}"},VISIBLE_LIST_ADD:{method:"PUT",path:"/v1/stealth/visiblelist"},VISIBLE_LIST_DELETE:{method:"DELETE",path:"/v1/stealth/visiblelist"},INVISIBLE_LIST_ADD:{method:"PUT",path:"/v1/stealth/invisiblelist"},INVISIBLE_LIST_DELETE:{method:"DELETE",path:"/v1/stealth/invisiblelist"}};a.namespace("Messenger.Model").Contact=a.Tictac.base.Model.extend({defaults:{presenceState:b.STATE.OFFLINE,presenceMessage:"",customDNDStatus:null,firstName:"",lastName:"",nickname:"",mobileno:null,email:"",user:"",displayName:"",network:"yahoo",image:c.getDefaultBuddyImage(),authorized:!1,incomingAddRequest:!1,onVisibleList:!1,onInvisibleList:!1,ignored:!1,type:"unknown",score:0,clientType:"0",addressbook:{},topContact:!1,groups:[],clientCapabilities:{richText:!0,smileys:!0,buzz:!0,fileXfer:!0,voice:!0,video:!0,typing:!0,videoDevice:!0}},requestManager:a.Messenger.Common.RequestManager,initialize:function(){this.get("displayName")||this.set({displayName:this.get("user")})},sendAddResponse:function(b){var e={authReason:b.message||""},f=b.accept?d.ACCEPT_ADD:d.DENY_ADD;b.alias&&(e.authAs=b.alias),a.Messenger.Common.RequestManager.issueRequest({method:f.method,path:c.substitute(f.path,{network:encodeURIComponent(this.get("network")),adderId:encodeURIComponent(this.get("user"))}),postBody:e,successCallback:b.success||null,errorCallback:b.err||null}),this.set("incomingAddRequest",!1),b.accept&&"buddy"!==this.get("type")&&this.sendAddRequest(b)},sendAddRequest:function(e){var f={message:e.message||""},g=d.ADD_USER,h=this.get("network"),i=this.get("user"),j=this;return"buddy"===this.get("type")?void a.log("Attempted to send an add request to an existing buddy.","warn","contact"):(e.addAs&&(f.addAs=e.addAs),f.addressbook=this._getAddressbook(),-1===_.indexOf(this.get("groups"),e.group)&&this.get("groups").push(e.group),void a.Messenger.Common.RequestManager.issueRequest({method:g.method,path:c.substitute(g.path,{user:encodeURIComponent(i),network:encodeURIComponent(h),groupname:encodeURIComponent(e.group)}),postBody:f,successCallback:function(){j.set({type:"buddy"}),a.Messenger.GlobalEvents.trigger(b.EVENTS.ADD_REQUEST_SENT,j),e.successCallback&&e.successCallback()},errorCallback:e.errorCallback}))},ignoreUser:function(b){b=b||{};var e=this.get("user"),f=this.get("network"),g=d.IGNORE_USER,h=this;a.Messenger.Common.RequestManager.issueRequest({method:g.method,path:c.substitute(g.path,{network:encodeURIComponent(f),user:encodeURIComponent(e)}),postBody:{},successCallback:function(){h.set("ignored",!0),b.success&&b.success()},errorCallback:b.err||null}),this.declinePendingAddRequest()},unignoreUser:function(b){b=b||{};var e=this.get("user"),f=this.get("network"),g=d.UNIGNORE_USER,h=this;a.Messenger.Common.RequestManager.issueRequest({method:g.method,path:c.substitute(g.path,{network:encodeURIComponent(f),user:encodeURIComponent(e)}),postBody:{},successCallback:function(){h.set("ignored",!1),b.success&&b.success()},errorCallback:b.err||null})},deleteContact:function(b){b=b||{};var e=this,f=b.groups||e.get("groups").slice(0),g=d.DELETE_USER,h=0;_.each(f,function(d){var i=c.substitute(g.path,{group:encodeURIComponent(d.name||d),network:encodeURIComponent(e.get("network")),user:encodeURIComponent(e.get("user"))});a.Messenger.Common.RequestManager.issueRequest({method:g.method,path:i,successCallback:function(){var a=e.get("groups");a.splice(_.indexOf(a,d),1),e.set("groups",a),h++,h===f.length&&b.successCallback&&(0===a.length&&e.set("type","unknown"),b.successCallback())},errorCallback:function(a){b.errorCallback&&b.errorCallback(a)}})})},reportSpam:function(b){var c=d.REPORT_SPAM;a.Messenger.Common.RequestManager.issueRequest({method:c.method,path:c.path,postBody:{spammerId:this.get("user"),spammedAs:b.alias,initiatedBy:b.initiatedBy,network:this.get("network"),spims:b.spims},successCallback:b.success||null,errorCallback:b.err||null}),this.declinePendingAddRequest()},declinePendingAddRequest:function(){this.get("incomingAddRequest")&&this.sendAddResponse({accept:!1})},_getAddressbook:function(){var a={email:this.get("email")||"",firstname:this.get("firstName")||"",lastname:this.get("lastName")||"",nickname:this.get("nickname")||"",mobileno:this.get("mobileno")||"",homeno:this.get("homeno")||"",workno:this.get("workno")||""};return this.get("addressbookId")&&(a.id=this.get("addressbookId")),a},editContact:function(b){b=b||{};var e=d.EDIT_CONTACT;a.Messenger.Common.RequestManager.issueRequest({method:e.method,path:c.substitute(e.path,{network:encodeURIComponent(b.network||this.get("network")),contactId:encodeURIComponent(b.user||this.get("user"))}),postBody:{addressbook:b.addressbook||this._getAddressbook()},successCallback:b.success||null,errorCallback:b.failure||null})},addToVisibleList:function(b){var c=this,e=d.VISIBLE_LIST_ADD;b=b||{},this.get("isInvisible")&&this.removeFromInvisibleList(b),a.Messenger.Common.RequestManager.issueRequest({method:e.method,path:e.path,postBody:{members:[{id:c.get("user"),network:c.get("network")}]},successCallback:a.bind(function(a){this.set("isVisible",!0),b.successCallback&&b.successCallback(a)},this),errorCallback:b.errorCallback})},removeFromVisibleList:function(b){var c=this,e=d.VISIBLE_LIST_DELETE;b=b||{},a.Messenger.Common.RequestManager.issueRequest({method:e.method,path:e.path,postBody:{members:[{id:c.get("user"),network:c.get("network")}]},successCallback:a.bind(function(a){this.set("isVisible",!1),b.successCallback&&b.successCallback(a)},this),errorCallback:b.errorCallback})},addToInvisibleList:function(b){var c=this,e=d.INVISIBLE_LIST_ADD;b=b||{},this.get("isVisible")&&this.removeFromVisibleList(b),a.Messenger.Common.RequestManager.issueRequest({method:e.method,path:e.path,postBody:{members:[{id:c.get("user"),network:c.get("network")}]},successCallback:a.bind(function(a){this.set("isInvisible",!0),b.successCallback&&b.successCallback(a)},this),errorCallback:b.errorCallback})},removeFromInvisibleList:function(b){var c=this,e=d.INVISIBLE_LIST_DELETE;b=b||{},a.Messenger.Common.RequestManager.issueRequest({method:e.method,path:e.path,postBody:{members:[{id:c.get("user"),network:c.get("network")}]},successCallback:a.bind(function(a){this.set("isInvisible",!1),b.successCallback&&b.successCallback(a)},this),errorCallback:b.errorCallback})}})},"@VERSION@",{requires:["messenger-constants","messenger-utils","messenger-requestmanager","tictac-base-model"]});YUI.add("messenger-stats",function(a){"use strict";a.namespace("Messenger.Common").Stats={stat:function(b,c){if(this.statsImpl)try{this.statsImpl.stat(b,c)}catch(d){a.log("Error trying to make a stats call - "+d.message,"warn","stats")}},setStatsAPI:function(a){this.statsImpl=a}}},"@VERSION@",{requires:[]});YUI.add("messenger-systemsettings",function(a){"use strict";a.namespace("Messenger.Model").SystemSettings=new a.Tictac.base.Model({defaults:{smsEnabled:!0,topContactsEnabled:!1,isRTL:!1}})},"@VERSION@",{requires:["tictac-base-model"]});YUI.add("messenger-session",function(a){"use strict";var b,c=a.Messenger.Common.Constants,d=c.EVENTS,e=a.Messenger.Common.Stats,f=a.Messenger.Model.SystemSettings,g=a.Messenger.Common.Utils,h={LOGIN:{method:"POST",path:"/v1/session"},LOGOUT:{method:"DELETE",path:"/v1/session"},SET_PRESENCE:{method:"PUT",path:"/v1/presence"},WAKEUP:{method:"PUT",path:"/v1/session",args:["action=mpop-activate"]}};b=a.Tictac.base.Model.extend({initialize:function(){var b=a.Messenger.Common.RequestManager,e=this;b.addListeners([{id:"buddyStatus",callback:a.bind(this._processBuddyStatus,this)},{id:"disconnect",callback:a.bind(this._processDisconnect,this)},{id:"endPointState",callback:a.bind(this._processEndPointState,this)},{id:"setVisibilityState",callback:a.bind(this._processVisibilityState,this)}]),b.on(d.SESSION_EXPIRED,a.bind(this._processSessionExpired,this)),b.on(d.TEMP_NETWORK_ERROR,function(){e.set("presenceState",c.STATE.PENDING)}),b.on(d.NETWORK_ERROR_RESOLVED,function(){e.set("presenceState",e.previous("presenceState"))}),b.on(d.FATAL_IO_ERROR,function(){e._processDisconnect()}),e.on("change:presenceState",function(a){var b=a.previous("presenceState");b!==c.STATE.PENDING&&e.set("prevPresenceState",b)})},login:function(b,d,g){if(this.isOnline())return void(d&&d());e.stat("login"),e.stat("toggle",{ltxt:"signin"}),b=b||{},this.set("presenceState",c.STATE.PENDING);var i,j,k=a.Messenger.Common.RequestManager,l=b.state||0,m=b.message||"",n=h.LOGIN,o=[{clientCapability:"smiley"},{clientCapability:"mpop"},{clientCapability:"richText"},{clientCapability:"interop"},{clientCapability:"activateSSA"},{clientCapability:"typing"}];f.get("smsEnabled")&&o.push({clientCapability:"sms"}),i={presenceState:l,presenceMessage:m,profileLogin:0,clientCapabilities:o,mpopLoginInfo:{loginType:b.dormant?1:0}},i.loginTriggers=[{loginTrigger:"mpopStateTransfer"},{loginTrigger:"ignoreList"},{loginTrigger:"invisibleList"}],j=["notifyServerToken=2","fieldsBuddyList="+encodeURIComponent("+groups"),"fieldsBuddyList="+encodeURIComponent("-uri")],k.issueRequest({type:"LOGIN",method:n.method,path:n.path,args:j,postBody:i,successCallback:a.bind(function(a){this.set({presenceState:l,presenceMessage:m}),this.processLoginData(a),d&&d(a)},this),errorCallback:a.bind(function(){this.set("presenceState",c.STATE.OFFLINE),g&&g()},this)})},logout:function(b){var e,f=a.Messenger.Common.RequestManager,g=h.LOGOUT,i=this.get("presenceState");e={logoffType:"global"===b?2:0},this.set("presenceState",c.STATE.PENDING),f.issueRequest({type:"LOGOUT",method:g.method,path:g.path,postBody:e,successCallback:a.bind(function(){this.set({presenceState:c.STATE.OFFLINE,presenceMessage:"",online:!1})},this),errorCallback:a.bind(function(){this.set("presenceState",i)},this)}),this.trigger(d.LOGOUT_LOCAL)},processLoginData:function(a){var b,c,d=a.primaryLoginId,e=this.get("loggedInId"),f=[];if(a.profileLoginIds)for(b=0,c=a.profileLoginIds.length;c>b;b++)f.push(a.profileLoginIds[b].profileLoginId),a.profileLoginIds[b].default&&(d=a.profileLoginIds[b].profileLoginId);e&&d!==e?this.logout():this.set({primaryId:a.primaryLoginId,loggedInId:d,aliases:f,mpopInfo:a.mpopInfo||{},image:g.generateImgURL({user:d,network:"yahoo",displayImagePrefs:a.displayInfo}),presenceSubscriptionsMaxPerRequest:a.constants.presenceSubscriptionsMaxPerRequest,buddies:a.contacts})},isOnline:function(){return this.get("presenceState")!==c.STATE.OFFLINE},isInvisible:function(){return this.get("presenceState")===c.STATE.INVISIBLE},becomePrimary:function(b){var d=h.WAKEUP,e=this,f=this.get("mpopInfo"),g=a.Messenger.Common.RequestManager;this.isOnline()&&f&&0!==f.state&&g.issueRequest({type:"MPOP_ACTIVATE",method:d.method,path:d.path,args:d.args,successCallback:function(a){f=e.get("mpopInfo"),f.state=0,e.set("mpopInfo",f),e.get("presenceState")===c.STATE.IDLE&&e.setPresence(e.get("prevPresenceState")||c.STATE.AVAILABLE,e.get("presenceMessage")),b&&b(a)}})},isPrimary:function(){return 0===this.get("mpopInfo").state?!0:!1},isMyself:function(b){var c=this,d=c.get("aliases"),e=c.get("primaryId");return b===e?!0:d&&-1!==a.Array.indexOf(d,b)},quickLogout:function(){this.isOnline()&&a.Messenger.Common.RequestManager.killConnections()},setPresence:function(b,d,e){var f=this;if(b===c.STATE.OFFLINE)f.logout();else if(f.isOnline())if(f.isPrimary()){var g=h.SET_PRESENCE,i={presenceState:b},j=a.Messenger.Common.RequestManager;"undefined"!=typeof d&&(i.presenceMessage=d),j.issueRequest({type:"PRESENCE",method:g.method,path:g.path,postBody:i,successCallback:function(){f.set({presenceState:b,presenceMessage:d||""})}})}else e|=0,3>e?f.becomePrimary(function(){f.setPresence(b,d,e+1)}):a.log("Session::setPresence - failed after trying "+e+" times");else f.login({state:b,message:d})},_processBuddyStatus:function(a){if(a.echo){var b=this.get("presenceState"),c=this.get("presenceMessage"),d=a.presenceMessage,e=g.normalizePresenceState(a);(e!==b||d!==c)&&(this.set("presenceState",e),"undefined"!=typeof d&&this.set("presenceMessage",d))}},_processDisconnect:function(){this.set("presenceState",c.STATE.OFFLINE),this.set("presenceMessage","")},_processSessionExpired:function(){var a=this.get("presenceState"),b=this.get("presenceMessage");this._processDisconnect(),this.login(a,b)},_processEndPointState:function(a){var b=a.endPointInfo;b&&(b.totalEndpoints=b.totalEndpoints||b.numberOfEndPoints,this.set("mpopInfo",b),0!==b.state&&1===b.numberOfEndPoints&&this.becomePrimary())},_processVisibilityState:function(a){var b=this.get("presenceState");2===a.state?b!==c.STATE.INVISIBLE&&(this._previousState={state:b,message:this.get("presenceMessage")},this.set("presenceState",c.STATE.INVISIBLE),this.set("presenceMessage","")):b===c.STATE.INVISIBLE&&(this._previousState?(this.set("presenceState",this._previousState.state),this.set("presenceMessage",this._previousState.message)):this.set("presenceState",c.STATE.AVAILABLE))}}),a.namespace("Messenger.Model").Session=new b({presenceState:c.STATE.OFFLINE,presenceMessage:"",prevPresenceState:c.STATE.OFFLINE,primaryId:null,loggedInId:null,aliases:null,mpopInfo:{},image:null})},"@VERSION@",{requires:["messenger-constants","messenger-requestmanager","messenger-utils","tictac-base-model","messenger-stats","messenger-systemsettings"]});YUI.add("messenger-usersettings",function(a){"use strict";var b;b=a.Tictac.base.Model.extend({_prefStores:[],_prefMapping:{},addKeys:function(a,b){var c=this;if(!b||!b.get||!b.set)throw new Error("Invalid prefStore set for UserSettings");c._prefStores.push(b),_.each(a,function(a,d){c._prefMapping[d]={defaultVal:a,store:b}})},getPreference:function(a,b){var c=this;if(!c._prefMapping[a])throw new Error("Get called for unsupported preference "+a);var d,e=c._prefMapping[a];if(c.has(a))d=c.get(a);else{if(e.store.async)return void e.store.get(a,function(d){"undefined"==typeof d&&(d=e.defaultVal),c.set(a,d),b(d)});d=e.store.get(a),"undefined"==typeof d&&(d=e.defaultVal),c.set(a,d)}return b&&b(d),d},setPreference:function(a,b){var c=a,d=this;"object"!=typeof c&&(c={},c[a]=b),_.each(c,function(a,b){var c,e=d._prefMapping[b];if("undefined"==typeof e)throw new Error("Unsupported key value "+b+" passed to UserSettings set method");c=e.store,("object"==typeof a||d.get(b)!==a)&&(c.save&&(c._dirty=!0),d.set(b,a),c.set(b,a))})},save:function(a){function b(){c--,0===c&&a&&a()}var c=0;_.each(this._prefStores,function(a){a._dirty&&(a._dirty=!1,c++,a.save(b))})}}),a.namespace("Messenger.Model").UserSettings=new b},"@VERSION@",{requires:["tictac-base-model","underscore"]});YUI.add("messenger-smsutils",function(a){"use strict";function b(a){var b;switch(a){case"e1":case"":b="us";break;case"cf":b="ca";break;case"hi":b="in";break;default:b=a}return b}function c(a){var c=b(a);return e[c]?e[c]:null}function d(a,b){var c;if(b&&b.length>0)for(c=0;c<b.length;c++)if(0===a.indexOf(b[c]))return a.slice(b[c].length);return null}var e={us:{name:"united_states",code:"1",idd:["011"],ndd:["1"]},ca:{name:"canada",code:"1",idd:["011"],ndd:["1"]},hk:{name:"hong_kong",code:"852",idd:["001"],ndd:[]},id:{name:"indonesia",code:"62",idd:["001","008"],ndd:["0"]},"in":{name:"india",code:"91",idd:["00"],ndd:["0"]},kr:{name:"south_korea",code:"82",idd:["001","002"],ndd:["0"]},kw:{name:"kuwait",code:"965",idd:["00"],ndd:["0"]},my:{name:"malaysia",code:"60",idd:["00"],ndd:["0"]},ph:{name:"philippines",code:"63",idd:["00"],ndd:["0"]},pk:{name:"pakistan",code:"92",idd:["00"],ndd:["0"]},th:{name:"thailand",code:"66",idd:["001"],ndd:["0"]},vn:{name:"vietnam",code:"84",idd:["00"],ndd:["0"]}},f=a.Messenger.Model.UserSettings;a.namespace("Messenger.Common").SMSUtils={getCountries:function(){var b,c=[];for(b in e)e.hasOwnProperty(b)&&c.push(a.merge({key:b},e[b]));return c},getIntlCode:b,normalizeNumber:function(a,b){var e,g,h="undefined"!=typeof NeoConfig?NeoConfig.intl:"";return b||(b=f.getPreference("mimHomeCountryPref"),b=""===b&&h&&0===_.indexOf(_.map(this.getCountries(),function(a){return a.key}),h)?h:b),a=a.replace(/^\s+|\s+$/g,""),0===a.indexOf("+")?a.replace(/[^0-9]/g,""):(a=a.replace(/[^0-9]/g,""),(e=c(b))?(g=d(a,e.idd),g?g:e.code?(g=d(a,e.ndd),g?e.code+g:e.code+a):null):null)},countUtf8Bytes:function(a){var b,c=a.length,d=0;for(b=0;c>b;b++)d+=this.charToBytes(a.charCodeAt(b));return d},splitStrBytes:function(a,b){var c,d,e,f,g="",h=0;for(d=0,e=a.length;e>d&&b>h&&(f=this.charToBytes(a.charCodeAt(d)),b>=h+f);d++)h+=f,g+=a.charAt(d);return c=a.substring(g.length),[g,c]},charToBytes:function(a){return 128>a?1:2048>a?2:3}}},"1.0.0",{requires:["underscore","messenger-constants","messenger-utils","messenger-usersettings"]});YUI.add("messenger-abutils",function(a){"use strict";var b=a.Messenger.Common.SMSUtils;a.namespace("Messenger.Common").ABUtils={parseContacts:function(c,d){var e=_.keys(c),f=[],g=this;return 0===e.length?[]:void a.Messenger.Common.Utils.doLongWork(e,function(a){var d=c[a],e=[],h={};d.fields&&(_.each(d.fields,function(a){var c,d;switch(a.type){case"name":h.firstName=a.value.givenName||"",h.lastName=a.value.familyName||"";break;case"nickname":h.nickname=a.value;break;case"email":h.email=a.value,h.mail_score=a.sc_score||0,d=g.extractYidFromEmail(h.email),d&&e.push({id:d.id,network:d.network}),h.sc_score=a.sc_score;break;case"phone":if(a.flags&&a.flags[0])switch(c=a.flags[0]){case"HOME":h.homeno=a.value;break;case"WORK":h.workno=a.value;break;case"MOBILE":h.mobileno=a.value,h.normalizedNumber=b.normalizeNumber(h.mobileno),e.length||e.push({id:h.mobileno,network:"sms"})}break;case"guid":h.guid=a.value;break;case"yahooid":a.value&&a.value.length>=4&&a.value.length<=32&&e.push({id:a.value,network:"yahoo"})}}),h.addressbookId=d.id,e.length>1&&"sms"===e[0].network&&e.shift(),_.each(e,function(a){f.push(_.extend(a,h))}))},function(){d&&d(f)})},extractYidFromEmail:function(b){if("string"==typeof b){var c=a.Tictac.base.mailutils.getYahooIdFromEmail(b);return c?{id:c,network:"yahoo"}:void 0}}}},"1.0.0",{requires:["underscore","messenger-constants","messenger-utils","messenger-smsutils","tictac-base-mailutils"]});YUI.add("messenger-contactlist",function(a){"use strict";var b,c=a.Messenger.Common.Constants,d=c.EVENTS,e=a.Messenger.Common.RequestManager,f=a.Messenger.Model.Session,g=a.Messenger.Common.Utils,h=a.Messenger.Common.SMSUtils,i=null,j={SUBSCRIBE_PRESENCE:{method:"PUT",path:"/v1/subscription/presence",args:["blocking=0"]},UNSUBSCRIBE_PRESENCE:{method:"DELETE",path:"/v1/subscription/presence",args:["blocking=0"]}};b=Backbone.Collection.extend({model:a.Messenger.Model.Contact,requestManager:e,utils:g,initialize:function(b,c){var g=this;c=c||{},g._displayNameTemplate=c.displayNameTemplate||"{{firstName}} {{lastName}}",g.ABParsed=!1,g.parseBuddies(),f.on("change:buddies",g.parseBuddies,g),f.on("change:presenceState",g._handlePresenceChange,g),f.on(d.OFFLINE,g.reset,g),e.addListeners([{id:"buddyInfo",callback:a.bind(g._handleBuddyInfo,g)},{id:"buddyStatus",callback:a.bind(g._handleBuddyStatus,g)},{id:"logOff",callback:a.bind(g._handleBuddyLogout,g)},{id:"buddyAuthorize",callback:a.bind(g._handleBuddyAuthorize,g)},{id:"displayImagePrefs",callback:a.bind(g._handleDisplayImagePrefs,g)},{id:"ignoreList",callback:a.bind(g._handleIgnoreList,g)},{id:"editIgnoreList",callback:a.bind(g._handleEditIgnore,g)},{id:"editInvisibleList",callback:a.bind(g._handleEditInvisible,g)},{id:"editVisibleList",callback:a.bind(g._handleEditVisible,g)}]),g.on("change:firstName change:lastName",g._handleNameChange,g)},setDisplayNameTemplate:function(a){this._displayNameTemplate=a},parseAddressBook:function(b){var c=this,e=[],f=a.Messenger.Model.UserSettings.getPreference("mimShowOnlyBuddies")?"unsubscribe":"subscribe";a.Messenger.Common.ABUtils.parseContacts(b,function(a){_.each(a,function(a){var b;a.user=a.user||a.id,a.id=g.getUserId(a.user,a.network),b=c.get(a.id),b&&"unknown"!==b.get("type")?_.extend(a,c._generateDisplayName(a)):(a.type="addressbook",a=c.normalizeContact(a)),e.push(a)}),c.add(e,{merge:!0}),c.handleABPresence(f),c.ABParsed=!0,c.trigger(d.AB_PARSING_COMPLETE)})},handleAddressBookContactRemoval:function(a){var b=this;_.each(a,function(a){b.remove(b.where({addressbookId:a.id,type:"addressbook"}))})},parseBuddies:function(){function b(b){b=b.contact||b,c=e.get(g.getUserId(b.id,b.network||"yahoo")),c&&a.mix(b,c.attributes),b=e.normalizeContact(b),b.type="buddy",h.push(b)}var c,d=f.get("buddies"),e=this,h=[];d&&d.length&&(a.Messenger.logPerf("Starting parsing of buddies"),g.doLongWork(d,b,function(){a.Messenger.logPerf("Finished parsing "+d.length+" buddies"),e.add(h,{merge:!0})}))},_handlePresenceChange:function(a){a.get("presenceState")===c.STATE.OFFLINE?_.each(this.filter(function(a){return a.get("presenceState")!==c.STATE.OFFLINE}),function(a){a.set("presenceState",c.STATE.OFFLINE)}):(a.previous("presenceState")===c.STATE.OFFLINE||a.previous("presenceState")===c.STATE.PENDING)&&this.handleABPresence("subscribe")},_handleNameChange:function(a){var b=this,c=b._generateDisplayName({firstName:a.get("firstName"),lastName:a.get("lastName"),user:a.get("user")});a.set({displayName:c.displayName})},_generateDisplayName:function(b){var c,d;return c=b.firstName&&b.lastName?g.substitute(this._displayNameTemplate,{firstName:b.firstName,lastName:b.lastName}):b.firstName||b.lastName||b.user,d=g.unescapeHTML(c),c=a.Escape.html(d),{displayName:c,displayNameRaw:d}},normalizeContact:function(a){var b,c;return a.contact&&(a=a.contact),a.user=a.user||a.sender||a.id,a.network=a.network||"yahoo",a.id=g.getUserId(a.user,a.network),_.extend(a,this._generateDisplayName(a)),"undefined"!=typeof a.presence&&(a.presenceState=a.presence.presenceState,a.presenceMessage=a.presence.presenceMessage),a.presenceMessage=a.presenceMessage?g.normalizePresenceMessage(a.presenceMessage):"",a.presenceState=g.normalizePresenceState(a),"undefined"!=typeof a.authorized&&(a.authorized=0===a.authorized?!1:!0),b=a.clientCapabilities,"undefined"!=typeof b&&(a.clientCapabilities={},a.clientCapabilities.richText=!!(1&b),a.clientCapabilities.smileys=!!(2&b),a.clientCapabilities.buzz=!!(4&b),a.clientCapabilities.fileXfer=!!(32768&b),a.clientCapabilities.voice=!!(65536&b),a.clientCapabilities.video=!!(4194304&b),a.clientCapabilities.typing=!!(8388608&b),a.clientCapabilities.videoDevice=!!(16777216&b)),c=g.generateImgURL(a,!0),c&&(a.image=c),this.get(a.id)&&"buddy"===this.get(a.id).get("type")&&(a.type="buddy"),"sms"===a.network&&(a.mobileno=a.mobileno||a.user,a.normalizedNumber=a.normalizedNumber||h.normalizeNumber(a.mobileno)),a},getContact:function(a,b){b=b||"yahoo";var c=g.getUserId(a,b),d=this.get(c);return a?(d||(this.add(this.normalizeContact({user:a,network:b})),d=this.get(c)),d):null},deleteContact:function(b){var c=this.get(b),d=c.get("addressbookId");if("addressbook"===c.type?this.handleABPresence("unsubscribe",[c]):c.deleteContact(),d)try{yui.contacts.api.deleteContacts([d])}catch(e){a.log("Error trying to delete user from AB: "+d,"warn")}this.remove(c)},_handleBuddyInfo:function(b){var c=b.contact,d=this,e=[];return this._presenceReceived||(a.Messenger.logPerfStats("t4"),this._presenceReceived=!0,a.Messenger.logPerf("*** First contact presence received")),c?(c.length||(c=[c]),a.Array.each(c,function(a){var b=a.sender||a.id||a.user,c=a.network||"yahoo";"yahoo"===c&&(a.id=g.getUserId(b,c),d.get(a.id)?("undefined"!=typeof a.presence&&(a.presenceState=a.presence.presenceState,a.presenceMessage=a.presence.presenceMessage),a.presenceState=g.normalizePresenceState(a),a.presenceMessage=g.normalizePresenceMessage(a.presenceMessage)):a=d.normalizeContact(a),e.push(a))}),void d.update(e,{remove:!1})):void a.log("buddyInfo: no buddies received","warn","contactlist")},_handleBuddyStatus:function(b){var c={user:b.sender,network:b.network||"yahoo",presenceState:g.normalizePresenceState(b),presenceMessage:g.normalizePresenceMessage(b.presenceMessage),id:g.getUserId(b.sender,b.network||"yahoo")};b.echo||"yahoo"===c.network&&(a.log("BuddyStatus notification received","debug","ContactList"),this.get(c.id)||(c=this.normalizeContact(c)),this.update([c],{remove:!1}))},_handleBuddyLogout:function(a){var b={user:a.buddy,network:a.network||"yahoo"};b=this.find(function(a){return a.get("user")===b.user&&a.get("network")===b.network}),b&&b.set("presenceState",c.STATE.OFFLINE)},_handleBuddyAuthorize:function(a){var b,c,e,g;a.echo||(c=a.network||"yahoo","yahoo"===c&&(e=a.user||a.id||a.sender,g=this.getContact(e,c),0===a.status||3===a.status?(g.set("incomingAddRequest",!0),b=a.receiver||f.get("loggedInId"),this.trigger(d.ADD_REQUEST_RECEIVED,{alias:b,user:e,network:c,msg:a.msg||""})):1===a.status&&(2===a.authState?(g&&this.remove(g),this.trigger(d.ADD_REJECTED,a)):(g&&g.set({authorized:!0}),this.trigger(d.ADD_ACCEPTED,a)))))},_handleDisplayImagePrefs:function(b){var c=this,d=b.sender,e=b.network||"yahoo",h=c.get(g.getUserId(d,e));a.log("DisplayImagePrefs notification received","debug","ContactList"),f.isMyself(d)?f.set("image",b.url):h&&h.set("image",g.generateImgURL({user:d,network:e,displayImagePrefs:b}))},handleABPresence:function(a,b){var d=j.SUBSCRIBE_PRESENCE,e="PRESENCE",g=[],h=f.get("presenceSubscriptionsMaxPerRequest")||50,i=this;b=b||this.where({type:"addressbook"}),f.isOnline()&&("unsubscribe"===a&&(d=j.UNSUBSCRIBE_PRESENCE,e="PRESENCE_OFF"),_.each(b,function(b){var d,e=b.get("network"),h=b.get("user");"unsubscribe"===a&&(b.set("presenceState",c.STATE.OFFLINE),b.set("presenceMessage","")),"sms"===e||f.isMyself(h)||(d={id:h},e&&"yahoo"!==e&&(d.network=e),g.push(d))}),i.utils.slicer(g,h,function(a){i.requestManager.issueRequest({type:e,method:d.method,path:d.path,args:d.args,postBody:{members:a}})}))},_unsubscribeABPresence:function(a){var b=j.UNSUBSCRIBE_PRESENCE;f.isOnline()&&"addressbook"===a.get("type")&&this.requestManager.issueRequest({type:"PRESENCE_OFF",method:b.method,path:b.path,args:b.args,postBody:{members:[a.get("user")]}})},_handleIgnoreList:function(a){var b,c,d,e=a.ignoredUsers;for(_.each(this.where({ignored:!0}),function(a){a.set("ignored",!1)}),b=0,c=e.length;c>b;b++)d=this.getContact(e[b].ignoredUser.id,e[b].ignoredUser.network||"yahoo"),d.set("ignored",!0)},_handleEditIgnore:function(a){var b,c=a.userName,d=a.network||"yahoo";!a.errorCode&&1===a.type&&c&&(b=this.getContact(c,d),1===a.state?b.set("ignored",!0):b.set("ignored",!1))},_handleEditVisible:function(a){var b=this,c=a.buddyList;a.errorCode||1!==a.type||(3===a.command?b.where({isVisible:!0}).set("isVisible",!1):_.each(c,function(c){var d=c.buddy,e=c.network||"yahoo",f=b.getContact(d,e);f&&f.set("isVisible",1===a.command)}))},_handleEditInvisible:function(a){var b=this,c=a.buddyList;a.errorCode||1!==a.type||(3===a.command?b.where({isInvisible:!0}).set("isInvisible",!1):_.each(c,function(c){var d=c.buddy,e=c.network||"yahoo",f=b.getContact(d,e);f&&f.set("isInvisible",1===a.command)}))}}),a.namespace("Messenger.Model").ContactList={getInstance:function(a){return i||(i=new b(null,a)),i}}},"@VERSION@",{requires:["messenger-contact","messenger-session","messenger-systemsettings","messenger-utils","messenger-abutils","escape","messenger-smsutils","messenger-constants"]});"use strict";YUI.add("messenger-msdb-user-preferences",function(a){a.Messenger.Common.MSDBUserPreferences=function(){var b=yui.mail.persist.MetaData,c=a.Messenger.Common.Constants,d=a.Tictac.base.mailpreferences;return{get:function(a){var b=d.get(a);return"cg.pref.im.loginpref"===a&&(b=this._decodeLoginPref(b)),b},set:function(a,c){return"cg.pref.im.loginpref"===a?(c=this._encodeLoginPref(c),"undefined"==typeof b.get("cg")&&b.addAttr("cg",{pref:{im:{}}}),d.set("cg",{pref:{im:{loginpref:c+""}}})):d.set(a,c),this},save:function(a){return d.save(a)},_decodeLoginPref:function(a){return a=parseInt(a,10),isNaN(a)?a=c.STATE.OFFLINE:12===a&&(a=c.STATE.INVISIBLE),a},_encodeLoginPref:function(a){return a=parseInt(a,10),isNaN(a)?a=c.STATE.OFFLINE:a===c.STATE.INVISIBLE&&(a=12),a}}}()},"@VERSION@",{requires:["mail-persist-meta-data","messenger-constants","tictac-base-mailpreferences"]});YUI.add("tictac-mim-rollups",function(a){a.namespace("Tictac.mim.rollups"),a.Tictac.mim.rollups.audiotag=a.Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<audio id="mim-messageReceivedAudioTag" hidden="hidden">    <source src="',(f=c.mp3Source)?f=f.call(b,{hash:{},data:e}):(f=b.mp3Source,f=typeof f===h?f.apply(b):f),g+=i(f)+'" type="audio/mp3"/>    <source src="',(f=c.wavSource)?f=f.call(b,{hash:{},data:e}):(f=b.wavSource,f=typeof f===h?f.apply(b):f),g+=i(f)+'" type="audio/wav"/></audio>'}),a.Tictac.mim.rollups.addrequests=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='            <li data-id="',(d=c.id)?d=d.call(a,{hash:{},data:b}):(d=a.id,d=typeof d===j?d.apply(a):d),e+=k(d)+'" class="mim-addreq-contact cf">                <div>',(d=c.user)?d=d.call(a,{hash:{},data:b}):(d=a.user,d=typeof d===j?d.apply(a):d),e+=k(d)+'</div>                <ul class="cf">                    <li><button class="mim-accept-btn mim-notification-button mim-button-small" type="button" data-autodestroy="true">Accept</button></li>                    <li><button class="mim-decline-btn mim-notification-button mim-button-small" type="button" data-autodestroy="true">Decline</button></li>                    <li><button class="mim-block-btn mim-notification-button mim-button-small" type="button" data-autodestroy="true">Block</button></li>                    <li class="mim-right"><button class="mim-im-btn mim-notification-button mim-button-small" type="button" data-autodestroy="false">IM</button></li>                </ul>            </li>            '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h,i="",j="function",k=this.escapeExpression,l=this,m=c.blockHelperMissing;return i+='<div class="mim-addrequestsview mim-conversation"><div class="mim-conversation-top-bar primary-bg" data-mover="true">        <div class="mim-addreq-title">Add Requests</div>    </div>    <div class="mim-grouped-requests">        <div class="mim-addreq-header">            <span>These people would like to add you to their ',(g=c.str_msgr_messenger)?g=g.call(b,{hash:{},data:e}):(g=b.str_msgr_messenger,g=typeof g===j?g.apply(b):g),i+=k(g)+' list.</span>            <div><button class="mim-block-all-btn mim-notification-button mim-button-small" type="button" data-autodestroy="true">Block All</button></div>        </div>        <ul class="mim-addreq-container">            ',h={hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e},(g=c.contacts)?g=g.call(b,h):(g=b.contacts,g=typeof g===j?g.apply(b):g),c.contacts||(g=m.call(b,g,h)),(g||0===g)&&(i+=g),i+="        </ul>            </div></div>"}),a.Tictac.mim.rollups.message=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return"mim-message-self"}function g(a,b){return"mim-message-other"}function h(a,b){return"&rlm;"}function i(a,b){return"&lrm;"}function j(a,b){return'dir="ltr"'}function k(a,b){return'dir="rtl"'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var l,m,n="",o="function",p=this.escapeExpression,q=this,r=c.blockHelperMissing;return n+='<li class="mim-message ',(l=c.rtlClass)?l=l.call(b,{hash:{},data:e}):(l=b.rtlClass,l=typeof l===o?l.apply(b):l),n+=p(l)+" ",m={hash:{},inverse:q.noop,fn:q.program(1,f,e),data:e},(l=c.fromSelf)?l=l.call(b,m):(l=b.fromSelf,l=typeof l===o?l.apply(b):l),c.fromSelf||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),m={hash:{},inverse:q.program(3,g,e),fn:q.noop,data:e},(l=c.fromSelf)?l=l.call(b,m):(l=b.fromSelf,l=typeof l===o?l.apply(b):l),c.fromSelf||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+='" dir="',(l=c.messageDir)?l=l.call(b,{hash:{},data:e}):(l=b.messageDir,l=typeof l===o?l.apply(b):l),n+=p(l)+'">    ',m={hash:{},inverse:q.noop,fn:q.program(5,h,e),data:e},(l=c.isRTL)?l=l.call(b,m):(l=b.isRTL,l=typeof l===o?l.apply(b):l),c.isRTL||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+='<span class="mim-message-sender">',(l=c.displayName)?l=l.call(b,{hash:{},data:e}):(l=b.displayName,l=typeof l===o?l.apply(b):l),(l||0===l)&&(n+=l),n+="</span>:",m={hash:{},inverse:q.program(7,i,e),fn:q.noop,data:e},(l=c.isRTL)?l=l.call(b,m):(l=b.isRTL,l=typeof l===o?l.apply(b):l),c.isRTL||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),m={hash:{},inverse:q.noop,fn:q.program(5,h,e),data:e},(l=c.isRTL)?l=l.call(b,m):(l=b.isRTL,l=typeof l===o?l.apply(b):l),c.isRTL||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+='<span class="mim-message-nameSeparator"></span>    ',m={hash:{},inverse:q.noop,fn:q.program(5,h,e),data:e},(l=c.isRTL)?l=l.call(b,m):(l=b.isRTL,l=typeof l===o?l.apply(b):l),c.isRTL||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+='<span class="mim-message-content" ',m={hash:{},inverse:q.program(9,j,e),fn:q.noop,data:e},(l=c.isTextRTL)?l=l.call(b,m):(l=b.isTextRTL,l=typeof l===o?l.apply(b):l),c.isTextRTL||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),m={hash:{},inverse:q.noop,fn:q.program(11,k,e),data:e},(l=c.isTextRTL)?l=l.call(b,m):(l=b.isTextRTL,l=typeof l===o?l.apply(b):l),c.isTextRTL||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+=">",(l=c.message)?l=l.call(b,{hash:{},data:e}):(l=b.message,l=typeof l===o?l.apply(b):l),(l||0===l)&&(n+=l),n+="</span>",m={hash:{},inverse:q.noop,fn:q.program(5,h,e),data:e},(l=c.isRTL)?l=l.call(b,m):(l=b.isRTL,l=typeof l===o?l.apply(b):l),c.isRTL||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+='<span class="mim-message-timestamp ',(l=c.rtlTimestampClass)?l=l.call(b,{hash:{},data:e}):(l=b.rtlTimestampClass,l=typeof l===o?l.apply(b):l),n+=p(l)+'">',(l=c.timestamp)?l=l.call(b,{hash:{},data:e}):(l=b.timestamp,l=typeof l===o?l.apply(b):l),(l||0===l)&&(n+=l),n+="</span></li>"}),a.Tictac.mim.rollups.confirm_dialog=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return"hidden"}function g(a,b){var d,e="";return e+=' id="',(d=c.formId)?d=d.call(a,{hash:{},data:b}):(d=a.formId,d=typeof d===n?d.apply(a):d),e+=o(d)+'"'}function h(a,b){var d,e="";return e+='<div class="mim-alert-icon"><img src="',(d=c.iconSrc)?d=d.call(a,{hash:{},data:b}):(d=a.iconSrc,d=typeof d===n?d.apply(a):d),e+=o(d)+'" alt="',(d=c.iconAlt)?d=d.call(a,{hash:{},data:b}):(d=a.iconAlt,d=typeof d===n?d.apply(a):d),e+=o(d)+'"/></div>'}function i(a,b){return"        <br/>        "}function j(a,b){var d,e,g="";return g+='    <div class="mim-dialog-buttons modal-ft">        <span class="btn left right default mim-button-ok">            <a href="#" title="OK" data-action="continue">OK</a>        </span>        <span class="btn left right mim-button-cancel ',e={hash:{},inverse:p.noop,fn:p.program(1,f,b),data:b},(d=c.hideCancel)?d=d.call(a,e):(d=a.hideCancel,d=typeof d===n?d.apply(a):d),c.hideCancel||(d=q.call(a,d,e)),(d||0===d)&&(g+=d),g+='">            <a href="#" title="Cancel" data-action="cancel">Cancel</a>        </span>    </div>    '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var k,l,m="",n="function",o=this.escapeExpression,p=this,q=c.blockHelperMissing;return m+='<div class="modal mim-dialog mim-view">    <h2 class="modal-hd mim-dialog-header" data-mover="true">        <span class="mim-dialog-header-text">',(k=c.title)?k=k.call(b,{hash:{},data:e}):(k=b.title,k=typeof k===n?k.apply(b):k),m+=o(k)+'</span>        <span class="close mim-button-cancel ',l={hash:{},inverse:p.noop,fn:p.program(1,f,e),data:e},(k=c.hideCancel)?k=k.call(b,l):(k=b.hideCancel,k=typeof k===n?k.apply(b):k),c.hideCancel||(k=q.call(b,k,l)),(k||0===k)&&(m+=k),m+='" data-action="cancel"              data-move="false" title="Close"></span>    </h2>    <div class="mim-dialog-body">    <form class="dialog-form"',l={hash:{},inverse:p.noop,fn:p.program(3,g,e),data:e},(k=c.hasFormId)?k=k.call(b,l):(k=b.hasFormId,k=typeof k===n?k.apply(b):k),c.hasFormId||(k=q.call(b,k,l)),(k||0===k)&&(m+=k),m+=">    ",l={hash:{},inverse:p.noop,fn:p.program(5,h,e),data:e},(k=c.iconSrc)?k=k.call(b,l):(k=b.iconSrc,k=typeof k===n?k.apply(b):k),c.iconSrc||(k=q.call(b,k,l)),(k||0===k)&&(m+=k),m+='    <div class="mim-error hidden"></div>    <div class="mim-alert-text">',(k=c.message)?k=k.call(b,{hash:{},data:e}):(k=b.message,k=typeof k===n?k.apply(b):k),(k||0===k)&&(m+=k),m+="</div>",l={hash:{},inverse:p.program(7,i,e),fn:p.noop,data:e},(k=c.newDialogTheme)?k=k.call(b,l):(k=b.newDialogTheme,k=typeof k===n?k.apply(b):k),c.newDialogTheme||(k=q.call(b,k,l)),(k||0===k)&&(m+=k),m+="    ",l={hash:{},inverse:p.noop,fn:p.program(9,j,e),data:e},(k=c.showButtons)?k=k.call(b,l):(k=b.showButtons,k=typeof k===n?k.apply(b):k),c.showButtons||(k=q.call(b,k,l)),(k||0===k)&&(m+=k),m+="</form>    </div></div>"}),a.Tictac.mim.rollups.report_abuse_spam=a.Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<form class="report-abuse-form">    <label>        <input type="radio" id="mim-report-spam" title="',(f=c.reportSpamText)?f=f.call(b,{hash:{},data:e}):(f=b.reportSpamText,f=typeof f===h?f.apply(b):f),g+=i(f)+'"               name="abuseType" value="spam" checked="checked">',(f=c.reportSpamText)?f=f.call(b,{hash:{},data:e}):(f=b.reportSpamText,f=typeof f===h?f.apply(b):f),g+=i(f)+"    </label>    <p>",(f=c.reportSpamDesc)?f=f.call(b,{hash:{},data:e}):(f=b.reportSpamDesc,f=typeof f===h?f.apply(b):f),g+=i(f)+'</p>    <label>        <input type="radio" id="mim-report-abuse" title="',(f=c.reportAbuseText)?f=f.call(b,{hash:{},data:e}):(f=b.reportAbuseText,f=typeof f===h?f.apply(b):f),g+=i(f)+'"               name="abuseType" value="abuse">',(f=c.reportAbuseText)?f=f.call(b,{hash:{},data:e}):(f=b.reportAbuseText,f=typeof f===h?f.apply(b):f),g+=i(f)+"    </label>    <p>",(f=c.reportAbuseDesc)?f=f.call(b,{hash:{},data:e}):(f=b.reportAbuseDesc,f=typeof f===h?f.apply(b):f),g+=i(f)+"</p></form>"}),a.Tictac.mim.rollups.custom_status_dialog=a.Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<form>    <textarea id="mim-custom-status-input" name="mim-custom-status-input" placeholder="What\'s on your mind?"></textarea>    <label class="mim-custom-status-label"><input type="checkbox" name="mim-custom-busy" id="mim-custom-busy" class="mim-option-checkbox"/>Appear Busy</label></form>'}),a.Tictac.mim.rollups.contact_menu=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='<li class="mim-menu-item mim-user-statusmsg mim-menu-item-noclick"><i>',(d=c.presenceMessage)?d=d.call(a,{hash:{},data:b}):(d=a.presenceMessage,d=typeof d===s?d.apply(a):d),e+=t(d)+"</i></li>"}function g(a,b){return'<li class="mim-menu-item" data-action="sms" title="New SMS">New SMS</li>'}function h(a,b){return'<li class="mim-menu-item" data-action="email" title="New Email">New Email</li>'}function i(a,b){var d,e,f="";return f+='    <li class="mim-menu-divider"></li>    ',e={hash:{},inverse:u.program(8,j,b),fn:u.noop,data:b},(d=c.isInvisible)?d=d.call(a,e):(d=a.isInvisible,d=typeof d===s?d.apply(a):d),c.isInvisible||(d=v.call(a,d,e)),(d||0===d)&&(f+=d),f+="    ",e={hash:{},inverse:u.noop,fn:u.program(11,l,b),data:b},(d=c.isInvisible)?d=d.call(a,e):(d=a.isInvisible,d=typeof d===s?d.apply(a):d),c.isInvisible||(d=v.call(a,d,e)),(d||0===d)&&(f+=d),f+="    "}function j(a,b){var d,e,f="";return f+='    <li class="mim-menu-item',e={hash:{},inverse:u.noop,fn:u.program(9,k,b),data:b},(d=c.onInvisibleList)?d=d.call(a,e):(d=a.onInvisibleList,d=typeof d===s?d.apply(a):d),c.onInvisibleList||(d=v.call(a,d,e)),(d||0===d)&&(f+=d),f+='" title="',(d=c.appearOfflineMsg)?d=d.call(a,{hash:{},data:b}):(d=a.appearOfflineMsg,d=typeof d===s?d.apply(a):d),f+=t(d)+'" data-action="visibility">        <a href="#" tabindex="-1">',(d=c.appearOfflineMsg)?d=d.call(a,{hash:{},data:b}):(d=a.appearOfflineMsg,d=typeof d===s?d.apply(a):d),f+=t(d)+'</a>        <i class="icon icon-checkmark"></i>    </li>    '}function k(a,b){return" checked"}function l(a,b){var d,e,f="";return f+='    <li class="mim-menu-item',e={hash:{},inverse:u.noop,fn:u.program(9,k,b),data:b},(d=c.onVisibleList)?d=d.call(a,e):(d=a.onVisibleList,d=typeof d===s?d.apply(a):d),c.onVisibleList||(d=v.call(a,d,e)),(d||0===d)&&(f+=d),f+='" title="',(d=c.appearOnlineMsg)?d=d.call(a,{hash:{},data:b}):(d=a.appearOnlineMsg,d=typeof d===s?d.apply(a):d),f+=t(d)+'" data-action="visibility">        <a href="#" tabindex="-1">',(d=c.appearOnlineMsg)?d=d.call(a,{hash:{},data:b}):(d=a.appearOnlineMsg,d=typeof d===s?d.apply(a):d),f+=t(d)+'</a>        <i class="icon icon-checkmark"></i>    </li>    '}function m(a,b){var d,e,f="";return f+='        <li class="mim-menu-divider"></li>        ',e={hash:{},inverse:u.noop,fn:u.program(14,n,b),data:b},(d=c.isFavorite)?d=d.call(a,e):(d=a.isFavorite,d=typeof d===s?d.apply(a):d),c.isFavorite||(d=v.call(a,d,e)),(d||0===d)&&(f+=d),f+="        ",e={hash:{},inverse:u.program(16,o,b),fn:u.noop,data:b},(d=c.isFavorite)?d=d.call(a,e):(d=a.isFavorite,d=typeof d===s?d.apply(a):d),c.isFavorite||(d=v.call(a,d,e)),(d||0===d)&&(f+=d),f+="    "}function n(a,b){return'        <li class="mim-menu-item" data-action="unfavorite">Remove from Favorites</li>        '}function o(a,b){return'        <li class="mim-menu-item" data-action="favorite">Add to Favorites</li>        '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var p,q,r="",s="function",t=this.escapeExpression,u=this,v=c.blockHelperMissing;return r+='<ul id="mim-contact-menu" class="mim-menu optionMenu hidden" data-id="',(p=c.id)?p=p.call(b,{hash:{},data:e}):(p=b.id,p=typeof p===s?p.apply(b):p),r+=t(p)+'">    <li class="mim-menu-item mim-user-opi mim-menu-item-noclick">',(p=c.user)?p=p.call(b,{hash:{},data:e}):(p=b.user,p=typeof p===s?p.apply(b):p),r+=t(p)+"</li>    ",q={hash:{},inverse:u.noop,fn:u.program(1,f,e),data:e},(p=c.hasMessage)?p=p.call(b,q):(p=b.hasMessage,p=typeof p===s?p.apply(b):p),c.hasMessage||(p=v.call(b,p,q)),(p||0===p)&&(r+=p),r+='    <li class="mim-menu-divider"></li>    <li class="mim-menu-item" data-action="im" title="New Instant Message">New Instant Message</li>    ',q={hash:{},inverse:u.noop,fn:u.program(3,g,e),data:e},(p=c.hasSMS)?p=p.call(b,q):(p=b.hasSMS,p=typeof p===s?p.apply(b):p),c.hasSMS||(p=v.call(b,p,q)),(p||0===p)&&(r+=p),r+="    ",q={hash:{},inverse:u.noop,fn:u.program(5,h,e),data:e},(p=c.hasEmail)?p=p.call(b,q):(p=b.hasEmail,p=typeof p===s?p.apply(b):p),c.hasEmail||(p=v.call(b,p,q)),(p||0===p)&&(r+=p),r+='    <li class="mim-menu-divider"></li>    <li class="mim-menu-item" data-action="edit">Edit...</li>    <li class="mim-menu-item" data-action="delete">Delete...</li>    ',q={hash:{},inverse:u.noop,fn:u.program(7,i,e),data:e},(p=c.isBuddy)?p=p.call(b,q):(p=b.isBuddy,p=typeof p===s?p.apply(b):p),c.isBuddy||(p=v.call(b,p,q)),(p||0===p)&&(r+=p),r+="    ",q={hash:{},inverse:u.noop,fn:u.program(13,m,e),data:e},(p=c.hasFavorites)?p=p.call(b,q):(p=b.hasFavorites,p=typeof p===s?p.apply(b):p),c.hasFavorites||(p=v.call(b,p,q)),(p||0===p)&&(r+=p),r+="</ul>"}),a.Tictac.mim.rollups.newconversation=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='        <li role="presentation" class="',(d=c.className)?d=d.call(a,{hash:{},data:b}):(d=a.className,d=typeof d===j?d.apply(a):d),e+=k(d)+'" data-id="',(d=c.id)?d=d.call(a,{hash:{},data:b}):(d=a.id,d=typeof d===j?d.apply(a):d),e+=k(d)+'" data-network="',(d=c.network)?d=d.call(a,{hash:{},data:b}):(d=a.network,d=typeof d===j?d.apply(a):d),e+=k(d)+'" title="',(d=c.displayName)?d=d.call(a,{hash:{},data:b}):(d=a.displayName,d=typeof d===j?d.apply(a):d),(d||0===d)&&(e+=d),e+='">    <a role="option" tabindex="0" href="#" title="',(d=c.displayName)?d=d.call(a,{hash:{},data:b}):(d=a.displayName,d=typeof d===j?d.apply(a):d),(d||0===d)&&(e+=d),e+='">',(d=c.mergedDisplayName)?d=d.call(a,{hash:{},data:b}):(d=a.mergedDisplayName,d=typeof d===j?d.apply(a):d),(d||0===d)&&(e+=d),e+='</a>    <div class="mim-newconversation-overlay cf">        <a class="mim-newconversation-overlay-btn mim-newconversation-overlay-more" data-action="moremenu" title="More actions for this contact"></a>    </div> </li>        '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h,i="",j="function",k=this.escapeExpression,l=this,m=c.blockHelperMissing;return i+='<div class="mim-newconversation mim-conversation presenceUI" id="mim-cl-view"  data-state="',(g=c.stateName)?g=g.call(b,{hash:{},data:e}):(g=b.stateName,g=typeof g===j?g.apply(b):g),i+=k(g)+'">    <div class="listnav-label"  data-mover="true">    <div class="mim-presence-state-full itemlist">        <button class="mim-presence-state" type="button" data-move="false" title="Click to change status"><i class="mim-presence-message icon" data-move="false">',(g=c.presenceMessage)?g=g.call(b,{hash:{},data:e}):(g=b.presenceMessage,g=typeof g===j?g.apply(b):g),(g||0===g)&&(i+=g),i+='</i><span class="mim-dropdown-arrow" data-move="false"></span></button>    </div>    <div id="mim-user-location" class="hidden">    </div></div><div class="mim-conversation-top-bar primary-bg" data-mover="true">        <div class="mim-contact-input-wrapper">            <button class="mim-contact-input-clear" data-move="false"  data-search="true" disabled="disabled"></button>            <input type="text" placeholder="Start a conversation with..." class="mim-contact-input square" data-move="false"/>        </div>    </div>        <div class="mim-newconversation-area">        <ul id="mim-newconversation-contact-list" class="mim-contact-list" role="listbox" class="lg">        ',h={hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e},(g=c.contacts)?g=g.call(b,h):(g=b.contacts,g=typeof g===j?g.apply(b):g),c.contacts||(g=m.call(b,g,h)),(g||0===g)&&(i+=g),i+="    </ul>   </div></div>"}),a.Tictac.mim.rollups.addignore=a.Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<form name="addIgnoreForm" id="addIgnoreForm">    <label id="userNameLabel" for="userNameInput" >Type the ID of the user you want to ignore.</label>    <div class="mim-addignore-inputs">      <input name="mim-ignore-user" id="mim-ignore-user" type="text" maxlength="100" value=""/>    </div></form>'}),a.Tictac.mim.rollups.conversationtab=a.Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<li class="mim-menu-item mim-conv-tab tt-hover tt-inactive-tab-bg" data-id="',(f=c.convId)?f=f.call(b,{hash:{},data:e}):(f=b.convId,f=typeof f===h?f.apply(b):f),g+=i(f)+'">    <div class="mim-contact-name" title="',(f=c.displayTitle)?f=f.call(b,{hash:{},data:e}):(f=b.displayTitle,f=typeof f===h?f.apply(b):f),(f||0===f)&&(g+=f),g+='">',(f=c.displayName)?f=f.call(b,{hash:{},data:e}):(f=b.displayName,f=typeof f===h?f.apply(b):f),(f||0===f)&&(g+=f),g+='</div>    <div class="mim-msg-badge">0</div>    <span data-action="closeconversation" class="btn-close-conversation">        <a title="Close this conversation window" draggable="false" role="button"></a>    </span></li>'}),a.Tictac.mim.rollups.addcontact=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='        <label for="mim-lastname" class="',e={hash:{},inverse:m.program(2,g,b),fn:m.noop,data:b},(d=c.isIE)?d=d.call(a,e):(d=a.isIE,d=typeof d===n?d.apply(a):d),c.isIE||(d=o.call(a,d,e)),(d||0===d)&&(f+=d),f+='">Last:</label>        <input type="text" name="lastName" id="mim-lastname" placeholder="Last" value="',(d=c.lastName)?d=d.call(a,{hash:{},data:b}):(d=a.lastName,d=typeof d===n?d.apply(a):d),f+=p(d)+'"/>        <label for="mim-firstname" class="',e={hash:{},inverse:m.program(2,g,b),fn:m.noop,data:b},(d=c.isIE)?d=d.call(a,e):(d=a.isIE,d=typeof d===n?d.apply(a):d),c.isIE||(d=o.call(a,d,e)),(d||0===d)&&(f+=d),f+='">First:</label>    <input type="text" name="firstName" id="mim-firstname" placeholder="First" value="',(d=c.firstName)?d=d.call(a,{hash:{},data:b}):(d=a.firstName,d=typeof d===n?d.apply(a):d),f+=p(d)+'"/>    '}function g(a,b){return"offscreen"}function h(a,b){var d,e,f="";return f+='        <label for="mim-firstname" class="',e={hash:{},inverse:m.program(2,g,b),fn:m.noop,data:b},(d=c.isIE)?d=d.call(a,e):(d=a.isIE,d=typeof d===n?d.apply(a):d),c.isIE||(d=o.call(a,d,e)),(d||0===d)&&(f+=d),f+='">First:</label>    <input type="text" name="firstName" id="mim-firstname" placeholder="First" value="',(d=c.firstName)?d=d.call(a,{hash:{},data:b}):(d=a.firstName,d=typeof d===n?d.apply(a):d),f+=p(d)+'"/>    <label for="mim-lastname" class="',e={hash:{},inverse:m.program(2,g,b),fn:m.noop,data:b},(d=c.isIE)?d=d.call(a,e):(d=a.isIE,d=typeof d===n?d.apply(a):d),c.isIE||(d=o.call(a,d,e)),(d||0===d)&&(f+=d),f+='">Last:</label>    <input type="text" name="lastName" id="mim-lastname" placeholder="Last" value="',(d=c.lastName)?d=d.call(a,{hash:{},data:b}):(d=a.lastName,d=typeof d===n?d.apply(a):d),f+=p(d)+'"/>    '}function i(a,b){return'disabled="disabled" '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k,l="",m=this,n="function",o=c.blockHelperMissing,p=this.escapeExpression;return l+='<form id="mim-edit-contact">    ',k={hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e},(j=c.lastNameFirst)?j=j.call(b,k):(j=b.lastNameFirst,j=typeof j===n?j.apply(b):j),c.lastNameFirst||(j=o.call(b,j,k)),(j||0===j)&&(l+=j),l+="    ",k={hash:{},inverse:m.program(4,h,e),fn:m.noop,data:e},(j=c.lastNameFirst)?j=j.call(b,k):(j=b.lastNameFirst,j=typeof j===n?j.apply(b):j),c.lastNameFirst||(j=o.call(b,j,k)),(j||0===j)&&(l+=j),l+='    <label for="mim-email">Email:</label><input name="email" id="mim-email" value="',(j=c.email)?j=j.call(b,{hash:{},data:e}):(j=b.email,j=typeof j===n?j.apply(b):j),l+=p(j)+'"/><br/>    <label for="mim-user">Instant Message:</label><input type="text" id="mim-user" name="user" ',k={hash:{},inverse:m.noop,fn:m.program(6,i,e),data:e},(j=c.user)?j=j.call(b,k):(j=b.user,j=typeof j===n?j.apply(b):j),c.user||(j=o.call(b,j,k)),(j||0===j)&&(l+=j),l+='value="',(j=c.user)?j=j.call(b,{hash:{},data:e}):(j=b.user,j=typeof j===n?j.apply(b):j),l+=p(j)+'"/>    <br/>    <label for="mim-mobileno">Mobile:</label><input name="mobileno" id="mim-mobileno" value="',(j=c.mobileno)?j=j.call(b,{hash:{},data:e}):(j=b.mobileno,j=typeof j===n?j.apply(b):j),l+=p(j)+'"/></form>'}),a.Tictac.mim.rollups.sms_input=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='            <option value="',(d=c.val)?d=d.call(a,{hash:{},data:b}):(d=a.val,d=typeof d===k?d.apply(a):d),f+=l(d)+'" ',e={hash:{},inverse:m.noop,fn:m.program(2,g,b),data:b},(d=c.selected)?d=d.call(a,e):(d=a.selected,d=typeof d===k?d.apply(a):d),c.selected||(d=n.call(a,d,e)),(d||0===d)&&(f+=d),f+=">",(d=c.label)?d=d.call(a,{hash:{},data:b}):(d=a.label,d=typeof d===k?d.apply(a):d),f+=l(d)+"</option>        "}function g(a,b){return'selected="selected"'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i,j="",k="function",l=this.escapeExpression,m=this,n=c.blockHelperMissing;return j+='<form>    <label for="mim-mobileno-input">',(h=c.sms_label)?h=h.call(b,{hash:{},data:e}):(h=b.sms_label,h=typeof h===k?h.apply(b):h),(h||0===h)&&(j+=h),j+='</label>    <br/>    <br/>    <select name="country" id="mim-phone-country">        ',i={hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e},(h=c.countries)?h=h.call(b,i):(h=b.countries,h=typeof h===k?h.apply(b):h),c.countries||(h=n.call(b,h,i)),(h||0===h)&&(j+=h),j+='    </select>    <input name="mobileno" id="mim-mobileno-input" type="text" placeholder="" value="',(h=c.mobileno)?h=h.call(b,{hash:{},data:e}):(h=b.mobileno,h=typeof h===k?h.apply(b):h),j+=l(h)+'"/></form>'}),a.Tictac.mim.rollups.conv_section_notification=a.Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<li class="mim-notification mim-section-notification ',(f=c.notifyClass)?f=f.call(b,{hash:{},data:e}):(f=b.notifyClass,f=typeof f===h?f.apply(b):f),g+=i(f)+'">    <span class="mim-notification-text">',(f=c.message)?f=f.call(b,{hash:{},data:e}):(f=b.message,f=typeof f===h?f.apply(b):f),(f||0===f)&&(g+=f),g+="</span></li>"}),a.Tictac.mim.rollups.conversationlist=a.Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div data-action="hideconversations" class="btn-close-conversations" role="button">    <a class="secondary" href="#" title="Close" draggable="false" role="button" tabindex="0">Close</a></div><ul class="mim-conversations-list mim-dialog-border"></ul><ul class="mim-conversations-tabs tt-toolbar-color cf"><li class="mim-new-tab tt-hover tt-inactive-tab-bg" data-id="new"><div class="secondary">&nbsp;</div></li><li class="mim-overflow-tab tt-hover tt-inactive-tab-bg"><div class="secondary">&nbsp;</div><div class="mim-msg-badge">0</div></li></ul><div class="mim-resizer" data-resizer="true"></div><ul class="mim-menu mim-overflow-tabs hidden"></ul>'}),a.Tictac.mim.rollups.flashaudio=a.Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<object id="mimflashaudio" type="application/x-shockwave-flash" data="',(f=c.src)?f=f.call(b,{hash:{},data:e}):(f=b.src,f=typeof f===h?f.apply(b):f),g+=i(f)+'" width="100%" height="100%">    <param name="allowFullScreen" value="true">    <param name="scale" value="noscale">    <param name="allowScriptAccess" value="always">    <param name="allowNetworking" value="all">    <param name="flashVars" value="allowedDomain=',(f=c.domain)?f=f.call(b,{hash:{},data:e}):(f=b.domain,f=typeof f===h?f.apply(b):f),g+=i(f)+'&amp;autoplay=messagereceived"></object>'}),a.Tictac.mim.rollups.conversation=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return"&rlm;"}function g(a,b){var d,e="";return e+='                <li unselectable="on" class="mim-emoticon" tabindex="0" title="',(d=c.emoteSmiley)?d=d.call(a,{hash:{},data:b}):(d=a.emoteSmiley,d=typeof d===k?d.apply(a):d),e+=l(d)+" ",(d=c.emoteLabel)?d=d.call(a,{hash:{},data:b}):(d=a.emoteLabel,d=typeof d===k?d.apply(a):d),e+=l(d)+'" data-emotekey="',(d=c.emotekey)?d=d.call(a,{hash:{},data:b}):(d=a.emotekey,d=typeof d===k?d.apply(a):d),e+=l(d)+'"></li>                '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i,j="",k="function",l=this.escapeExpression,m=this,n=c.blockHelperMissing;return j+='<div class="mim-conversation">    <div class="mim-conversation-top-bar primary-bg" data-mover="true">        <div class="mim-user">            <img class="mim-user-photo" alt="',(h=c.displayName)?h=h.call(b,{hash:{},data:e}):(h=b.displayName,h=typeof h===k?h.apply(b):h),(h||0===h)&&(j+=h),j+='" src="',(h=c.image)?h=h.call(b,{hash:{},data:e}):(h=b.image,h=typeof h===k?h.apply(b):h),j+=l(h)+'" width="32" height="32" />            <div class="mim-sms-icon"></div>            <div class="mim-user-opi">                ',i={hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e},(h=c.isRTL)?h=h.call(b,i):(h=b.isRTL,h=typeof h===k?h.apply(b):h),c.isRTL||(h=n.call(b,h,i)),(h||0===h)&&(j+=h),j+='<b class="mim-user-status-name ',(h=c.presenceClassName)?h=h.call(b,{hash:{},data:e}):(h=b.presenceClassName,h=typeof h===k?h.apply(b):h),j+=l(h)+'">',(h=c.displayName)?h=h.call(b,{hash:{},data:e}):(h=b.displayName,h=typeof h===k?h.apply(b):h),(h||0===h)&&(j+=h),j+="</b>                ",i={hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e},(h=c.isRTL)?h=h.call(b,i):(h=b.isRTL,h=typeof h===k?h.apply(b):h),c.isRTL||(h=n.call(b,h,i)),(h||0===h)&&(j+=h),j+='<span class="mim-user-statusmsg">',(h=c.presenceMessage)?h=h.call(b,{hash:{},data:e}):(h=b.presenceMessage,h=typeof h===k?h.apply(b):h),(h||0===h)&&(j+=h),j+="</span>                ",i={hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e},(h=c.isRTL)?h=h.call(b,i):(h=b.isRTL,h=typeof h===k?h.apply(b):h),c.isRTL||(h=n.call(b,h,i)),(h||0===h)&&(j+=h),j+='<span class="mim-user-mobileno">',(h=c.mobileno)?h=h.call(b,{hash:{},data:e}):(h=b.mobileno,h=typeof h===k?h.apply(b):h),j+=l(h)+'</span>            </div>        </div>    </div>    <div class="mim-conversation-area" aria-live="assertive">        <ul class="mim-notification-area hidden"></ul>        <div class="mim-message-area">            <ul class="mim-recent-message-list hidden">                <li class="mim-recent-message-spinner"></li>            </ul>            <ul class="mim-message-list"></ul>            <div class="mim-typing-notification">',(h=c.typingMessage)?h=h.call(b,{hash:{},data:e}):(h=b.typingMessage,h=typeof h===k?h.apply(b):h),(h||0===h)&&(j+=h),j+='</div>        </div>    </div>    <div class="mim-conversation-input">    <div class="mim-conversation-input-toolbar">        <ul class="cf">            <li class="mim-character-counter"></li>                <li class="mim-format-link mim-rich-text-link mim-toolbar-item"><a data-action="format" aria-label="Change fonts" role="button" href="#" title="Change fonts"><b class="mim-rich-text secondary">Format</b></a></li>            <li class="mim-emoticons-link mim-toolbar-item"><a data-action="emoticons" aria-label="Insert emoticons" role="button" href="#" title="Insert emoticons"><b class="mim-emoticons secondary">Emoticons</b></a></li>                <li class="mim-mode-toggle mim-mode-sms hidden" style="display:none;"><a data-action="conv-mode" data-mode="sms" href="#" title="Switch to SMS"><b class="mim-sms">Switch to SMS</b></a></li>            <li class="mim-mode-toggle mim-mode-im hidden" style="display:none;"><a data-action="conv-mode" data-mode="im" href="#" title="Switch to instant message"><b class="mim-im">Switch to instant message</b></a></li>        </ul>    </div>    <div class="mim-rte-pane mim-emoticons-pane hidden">        <ul class="mim-emoticon-list">                ',i={hash:{},inverse:m.noop,fn:m.program(3,g,e),data:e},(h=c.emoticons)?h=h.call(b,i):(h=b.emoticons,h=typeof h===k?h.apply(b):h),c.emoticons||(h=n.call(b,h,i)),(h||0===h)&&(j+=h),j+='        </ul>    </div>    <div class="mim-rte-pane mim-format-pane hidden">    </div>    <div class="mim-conversation-rte">    </div>    </div></div>'}),a.Tictac.mim.rollups.logout_options=a.Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<form class="logout-options-form">    <p>You are signed in to Yahoo Messenger in multiple places. Where do you want to sign out?</p>    <input class="mim-option-radio" type="radio" title="Sign out here" name="mim-logoutType" value="local" id="mim-logoutLocal" checked="checked"/>    <label class="mim-radioLabel" for="mim-logoutLocal">Sign out here</label><br/>    <input class="mim-option-radio" type="radio" title="Sign out everywhere" name="mim-logoutType" value="global" id="mim-logoutGlobal"/>    <label class="mim-radioLabel" for="mim-logoutGlobal">Sign out everywhere</label><br/>        <br/>        <input type="checkbox" id="mim-rememberLogoutPref" class="mim-option-checkbox" title="Remember this preference" name="mim-rememberLogoutPref" />    <label  class="mim-checkboxLabel" for="mim-rememberLogoutPref">Remember this preference</label></form>'}),a.Tictac.mim.rollups.conv_section_modechange=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return"   IM   "}function g(a,b){return"   SMS   "}function h(a,b){return"&rlm;"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j,k="",l=this,m="function",n=c.blockHelperMissing;return k+='<span class="mim-notification-mode-change">   ',j={hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e},(i=c.IM)?i=i.call(b,j):(i=b.IM,i=typeof i===m?i.apply(b):i),c.IM||(i=n.call(b,i,j)),(i||0===i)&&(k+=i),k+="   ",j={hash:{},inverse:l.program(3,g,e),fn:l.noop,data:e},(i=c.IM)?i=i.call(b,j):(i=b.IM,i=typeof i===m?i.apply(b):i),c.IM||(i=n.call(b,i,j)),(i||0===i)&&(k+=i),k+="</span>",j={hash:{},inverse:l.noop,fn:l.program(5,h,e),data:e},(i=c.isRTL)?i=i.call(b,j):(i=b.isRTL,i=typeof i===m?i.apply(b):i),c.isRTL||(i=n.call(b,i,j)),
(i||0===i)&&(k+=i),k+='<span class="mim-notification-datetime">',(i=c.dateTime)?i=i.call(b,{hash:{},data:e}):(i=b.dateTime,i=typeof i===m?i.apply(b):i),(i||0===i)&&(k+=i),k+="</span>"}),a.Tictac.mim.rollups.badge=a.Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},' <span class="mim-msg-badge"></span>'}),a.Tictac.mim.rollups.emoticon_item=a.Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<li unselectable="on" class="mim-emoticon" tabindex="0" title="',(f=c.emoteSmiley)?f=f.call(b,{hash:{},data:e}):(f=b.emoteSmiley,f=typeof f===h?f.apply(b):f),g+=i(f)+" ",(f=c.emoteLabel)?f=f.call(b,{hash:{},data:e}):(f=b.emoteLabel,f=typeof f===h?f.apply(b):f),g+=i(f)+'" data-emotekey="',(f=c.emotekey)?f=f.call(b,{hash:{},data:e}):(f=b.emotekey,f=typeof f===h?f.apply(b):f),g+=i(f)+'"></li>'}),a.Tictac.mim.rollups.newconv_contact_entry=a.Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<li role="presentation" class="',(f=c.className)?f=f.call(b,{hash:{},data:e}):(f=b.className,f=typeof f===h?f.apply(b):f),g+=i(f)+'" data-id="',(f=c.id)?f=f.call(b,{hash:{},data:e}):(f=b.id,f=typeof f===h?f.apply(b):f),g+=i(f)+'" data-network="',(f=c.network)?f=f.call(b,{hash:{},data:e}):(f=b.network,f=typeof f===h?f.apply(b):f),g+=i(f)+'" title="',(f=c.displayName)?f=f.call(b,{hash:{},data:e}):(f=b.displayName,f=typeof f===h?f.apply(b):f),(f||0===f)&&(g+=f),g+='">    <a role="option" tabindex="0" href="#" title="',(f=c.displayName)?f=f.call(b,{hash:{},data:e}):(f=b.displayName,f=typeof f===h?f.apply(b):f),(f||0===f)&&(g+=f),g+='">',(f=c.mergedDisplayName)?f=f.call(b,{hash:{},data:e}):(f=b.mergedDisplayName,f=typeof f===h?f.apply(b):f),(f||0===f)&&(g+=f),g+='</a>    <div class="mim-newconversation-overlay cf">        <a class="mim-newconversation-overlay-btn mim-newconversation-overlay-more" data-action="moremenu" title="More actions for this contact"></a>    </div> </li>'}),a.Tictac.mim.rollups.conv_notification_btn=a.Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<button class="',(f=c.buttonClass)?f=f.call(b,{hash:{},data:e}):(f=b.buttonClass,f=typeof f===h?f.apply(b):f),g+=i(f)+' mim-notification-button mim-button-small" type="button" data-autodestroy="',(f=c.autoDestroy)?f=f.call(b,{hash:{},data:e}):(f=b.autoDestroy,f=typeof f===h?f.apply(b):f),g+=i(f)+'">',(f=c.buttonLabel)?f=f.call(b,{hash:{},data:e}):(f=b.buttonLabel,f=typeof f===h?f.apply(b):f),g+=i(f)+"</button>"}),a.Tictac.mim.rollups.conv_notification=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return"hidden"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h,i="",j="function",k=this.escapeExpression,l=this,m=c.blockHelperMissing;return i+='<li id="',(g=c.notifyId)?g=g.call(b,{hash:{},data:e}):(g=b.notifyId,g=typeof g===j?g.apply(b):g),i+=k(g)+'" class="',(g=c.notifyClass)?g=g.call(b,{hash:{},data:e}):(g=b.notifyClass,g=typeof g===j?g.apply(b):g),i+=k(g)+' mim-notification">    <span class="mim-notification-close ',h={hash:{},inverse:l.program(1,f,e),fn:l.noop,data:e},(g=c.showClose)?g=g.call(b,h):(g=b.showClose,g=typeof g===j?g.apply(b):g),c.showClose||(g=m.call(b,g,h)),(g||0===g)&&(i+=g),i+='"></span>    <span class="mim-notification-message">',(g=c.messageText)?g=g.call(b,{hash:{},data:e}):(g=b.messageText,g=typeof g===j?g.apply(b):g),(g||0===g)&&(i+=g),i+='</span>    <div class="mim-notification-buttons hidden"></div></li>'}),a.Tictac.mim.rollups.form_dialog=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='<div class="mim-alert-icon"><img src="',(d=c.iconSrc)?d=d.call(a,{hash:{},data:b}):(d=a.iconSrc,d=typeof d===m?d.apply(a):d),e+=n(d)+'" alt="',(d=c.iconAlt)?d=d.call(a,{hash:{},data:b}):(d=a.iconAlt,d=typeof d===m?d.apply(a):d),e+=n(d)+'"/></div>'}function g(a,b){return"        <br/>        "}function h(a,b){var d,e,f="";return f+='    <div class="mim-dialog-buttons modal-ft">        <span class="btn left right default mim-button-ok">            <a href="#" title="OK" data-action="continue">OK</a>        </span>        <span class="btn left right mim-button-cancel ',e={hash:{},inverse:o.noop,fn:o.program(6,i,b),data:b},(d=c.hideCancel)?d=d.call(a,e):(d=a.hideCancel,d=typeof d===m?d.apply(a):d),c.hideCancel||(d=p.call(a,d,e)),(d||0===d)&&(f+=d),f+='">            <a href="#" title="Cancel" data-action="cancel">Cancel</a>        </span>    </div>    '}function i(a,b){return"hidden"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k,l="",m="function",n=this.escapeExpression,o=this,p=c.blockHelperMissing;return l+='<div class="modal mim-form-dialog">    <h2 class="modal-hd mim-dialog-header">        <span class="mim-dialog-header-text">',(j=c.title)?j=j.call(b,{hash:{},data:e}):(j=b.title,j=typeof j===m?j.apply(b):j),l+=n(j)+'</span>    </h2>    <div class="mim-dialog-body">    ',k={hash:{},inverse:o.noop,fn:o.program(1,f,e),data:e},(j=c.iconSrc)?j=j.call(b,k):(j=b.iconSrc,j=typeof j===m?j.apply(b):j),c.iconSrc||(j=p.call(b,j,k)),(j||0===j)&&(l+=j),l+="    ",(j=c.form)?j=j.call(b,{hash:{},data:e}):(j=b.form,j=typeof j===m?j.apply(b):j),(j||0===j)&&(l+=j),k={hash:{},inverse:o.program(3,g,e),fn:o.noop,data:e},(j=c.newDialogTheme)?j=j.call(b,k):(j=b.newDialogTheme,j=typeof j===m?j.apply(b):j),c.newDialogTheme||(j=p.call(b,j,k)),(j||0===j)&&(l+=j),l+="    ",k={hash:{},inverse:o.noop,fn:o.program(5,h,e),data:e},(j=c.showButtons)?j=j.call(b,k):(j=b.showButtons,j=typeof j===m?j.apply(b):j),c.showButtons||(j=p.call(b,j,k)),(j||0===j)&&(l+=j),l+="</form>    </div></div>"}),a.Tictac.mim.rollups.dialog_header=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return"hidden"}function g(a,b){var d,e="";return e+=' id="',(d=c.formId)?d=d.call(a,{hash:{},data:b}):(d=a.formId,d=typeof d===k?d.apply(a):d),e+=l(d)+'"'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i,j="",k="function",l=this.escapeExpression,m=this,n=c.blockHelperMissing;return j+='<div class="modal mim-dialog mim-view">    <h2 class="modal-hd mim-dialog-header" data-mover="true">        <span class="mim-dialog-header-text">',(h=c.title)?h=h.call(b,{hash:{},data:e}):(h=b.title,h=typeof h===k?h.apply(b):h),j+=l(h)+'</span>        <span class="close mim-button-cancel ',i={hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e},(h=c.hideCancel)?h=h.call(b,i):(h=b.hideCancel,h=typeof h===k?h.apply(b):h),c.hideCancel||(h=n.call(b,h,i)),(h||0===h)&&(j+=h),j+='" data-action="cancel"              data-move="false" title="Close"></span>    </h2>    <div class="mim-dialog-body">    <form class="dialog-form"',i={hash:{},inverse:m.noop,fn:m.program(3,g,e),data:e},(h=c.hasFormId)?h=h.call(b,i):(h=b.hasFormId,h=typeof h===k?h.apply(b):h),c.hasFormId||(h=n.call(b,h,i)),(h||0===h)&&(j+=h),j+=">"}),a.Tictac.mim.rollups.presence_menu=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='    <li class="mim-menu-item mim-opi" data-state="',(d=c.state)?d=d.call(a,{hash:{},data:b}):(d=a.state,d=typeof d===l?d.apply(a):d),e+=m(d)+'" data-message="',(d=c.message)?d=d.call(a,{hash:{},data:b}):(d=a.message,d=typeof d===l?d.apply(a):d),e+=m(d)+'" data-action="setStateCustom">        <a href="#" tabindex="-1">',(d=c.message)?d=d.call(a,{hash:{},data:b}):(d=a.message,d=typeof d===l?d.apply(a):d),e+=m(d)+'</a>        <i class="icon icon-checkmark"></i>    </li>    '}function g(a,b){return'    <li class="mim-menu-item" id="mim-menu-signout" data-state="9999" data-action="setState"><a href="#" tabindex="-1">Sign Out of Messenger</a></li>    '}function h(a,b){return'    <li class="mim-menu-divider"></li>    <li class="mim-menu-item mim-contacts-filter" data-action="topContacts">        <a href="#" tabindex="-1">Favorites</a>        <i class="icon icon-checkmark"></i>    </li>    <li class="mim-menu-item mim-contacts-filter" data-action="onlineContacts">        <a href="#" tabindex="-1">Online Contacts</a>        <i class="icon icon-checkmark"></i>    </li>    '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j,k="",l="function",m=this.escapeExpression,n=this,o=c.blockHelperMissing;return k+='<ul id="mim-presence-menu" class="mim-menu optionMenu">    <li class="mim-menu-item mim-opi ymsg-available" data-state="0" data-action="setState">        <a href="#" tabindex="-1">Available</a>        <i class="icon icon-checkmark"></i>    </li>    <li class="mim-menu-item mim-opi ymsg-busy" data-state="2" data-action="setState">        <a href="#" tabindex="-1">Busy</a>        <i class="icon icon-checkmark"></i>    </li>    <li class="mim-menu-item mim-opi ymsg-invisible" data-state="-1" data-action="setState">        <a href="#" tabindex="-1">Invisible</a>        <i class="icon icon-checkmark"></i>    </li>    ',j={hash:{},inverse:n.noop,fn:n.program(1,f,e),data:e},(i=c.customPresenceArr)?i=i.call(b,j):(i=b.customPresenceArr,i=typeof i===l?i.apply(b):i),c.customPresenceArr||(i=o.call(b,i,j)),(i||0===i)&&(k+=i),k+='    <li class="mim-menu-item" id="mim-menu-custom" data-action="newCustomStatus"><a href="#" tabindex="-1">Custom Status...</a></li>    ',j={hash:{},inverse:n.noop,fn:n.program(3,g,e),data:e},(i=c.isOnline)?i=i.call(b,j):(i=b.isOnline,i=typeof i===l?i.apply(b):i),c.isOnline||(i=o.call(b,i,j)),(i||0===i)&&(k+=i),k+="    ",j={hash:{},inverse:n.noop,fn:n.program(5,h,e),data:e},(i=c.hasTopContacts)?i=i.call(b,j):(i=b.hasTopContacts,i=typeof i===l?i.apply(b):i),c.hasTopContacts||(i=o.call(b,i,j)),(i||0===i)&&(k+=i),k+='    <li class="mim-menu-divider"></li>    <li class="mim-menu-item mim-messenger-history" data-action="history"><a href="#" tabindex="-1">Conversation History</a></li>    <li class="mim-menu-item mim-messenger-options" data-action="messengeroptions"><a href="#" tabindex="-1">Messenger Settings</a></li></ul>'}),a.Tictac.mim.rollups.newconvcontlist=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='        <li role="presentation" class="',(d=c.className)?d=d.call(a,{hash:{},data:b}):(d=a.className,d=typeof d===j?d.apply(a):d),e+=k(d)+'" data-id="',(d=c.id)?d=d.call(a,{hash:{},data:b}):(d=a.id,d=typeof d===j?d.apply(a):d),e+=k(d)+'" data-network="',(d=c.network)?d=d.call(a,{hash:{},data:b}):(d=a.network,d=typeof d===j?d.apply(a):d),e+=k(d)+'" title="',(d=c.displayName)?d=d.call(a,{hash:{},data:b}):(d=a.displayName,d=typeof d===j?d.apply(a):d),(d||0===d)&&(e+=d),e+='">    <a role="option" tabindex="0" href="#" title="',(d=c.displayName)?d=d.call(a,{hash:{},data:b}):(d=a.displayName,d=typeof d===j?d.apply(a):d),(d||0===d)&&(e+=d),e+='">',(d=c.mergedDisplayName)?d=d.call(a,{hash:{},data:b}):(d=a.mergedDisplayName,d=typeof d===j?d.apply(a):d),(d||0===d)&&(e+=d),e+='</a>    <div class="mim-newconversation-overlay cf">        <a class="mim-newconversation-overlay-btn mim-newconversation-overlay-more" data-action="moremenu" title="More actions for this contact"></a>    </div> </li>        '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h,i="",j="function",k=this.escapeExpression,l=this,m=c.blockHelperMissing;return i+='    <div class="mim-newconversation-area">        <ul id="mim-newconversation-contact-list" class="mim-contact-list" role="listbox" class="lg">        ',h={hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e},(g=c.contacts)?g=g.call(b,h):(g=b.contacts,g=typeof g===j?g.apply(b):g),c.contacts||(g=m.call(b,g,h)),(g||0===g)&&(i+=g),i+="    </ul>   </div>"}),a.Tictac.mim.rollups.options=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return'selected="selected"'}function g(a,b){return'checked="checked"'}function h(a,b){var d,e,f="";return f+='  <li class="cf">    <div class="options-label">        SMS Message Home Country    </div>    <div class="options-content">      <div class="custom-select">      <select name="mim-homeCountrySelect" id="mim-homeCountrySelect">      ',e={hash:{},inverse:o.noop,fn:o.program(6,i,b),data:b},(d=c.countries)?d=d.call(a,e):(d=a.countries,d=typeof d===m?d.apply(a):d),c.countries||(d=p.call(a,d,e)),(d||0===d)&&(f+=d),f+="      </select>      </div<    </div>  </li>  "}function i(a,b){var d,e,g="";return g+='      <option value="',(d=c.val)?d=d.call(a,{hash:{},data:b}):(d=a.val,d=typeof d===m?d.apply(a):d),g+=n(d)+'" ',e={hash:{},inverse:o.noop,fn:o.program(1,f,b),data:b},(d=c.selected)?d=d.call(a,e):(d=a.selected,d=typeof d===m?d.apply(a):d),c.selected||(d=p.call(a,d,e)),(d||0===d)&&(g+=d),g+=">",(d=c.label)?d=d.call(a,{hash:{},data:b}):(d=a.label,d=typeof d===m?d.apply(a):d),g+=n(d)+"</option>      "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k,l="",m="function",n=this.escapeExpression,o=this,p=c.blockHelperMissing;return l+='<ul>  <li class="cf">    <div class="options-label">        Sign Out    </div>    <div class="options-content">    <p>If you are signed in to Yahoo in multiple places, you can choose where to sign out.</p>      <div class="custom-select">      <select name="mim-logoutSelect" id="mim-logoutSelect">          <option value="local" ',k={hash:{},inverse:o.noop,fn:o.program(1,f,e),data:e},(j=c.localSelected)?j=j.call(b,k):(j=b.localSelected,j=typeof j===m?j.apply(b):j),c.localSelected||(j=p.call(b,j,k)),(j||0===j)&&(l+=j),l+='>Always sign out here</option>          <option value="global" ',k={hash:{},inverse:o.noop,fn:o.program(1,f,e),data:e},(j=c.globalSelected)?j=j.call(b,k):(j=b.globalSelected,j=typeof j===m?j.apply(b):j),c.globalSelected||(j=p.call(b,j,k)),(j||0===j)&&(l+=j),l+='>Always sign out everywhere</option>          <option value="prompt" ',k={hash:{},inverse:o.noop,fn:o.program(1,f,e),data:e},(j=c.promptSelected)?j=j.call(b,k):(j=b.promptSelected,j=typeof j===m?j.apply(b):j),c.promptSelected||(j=p.call(b,j,k)),(j||0===j)&&(l+=j),l+='>Ask every time</option>      </select>      </div>    </div>  </li>  <li class="cf">    <div class="options-label">        Sound Alerts    </div>    <div class="options-content">      <label class="cbox"><input type="checkbox" name="mim-enableSoundsCheckbox" id="mim-enableSoundsCheckbox" ',k={hash:{},inverse:o.noop,fn:o.program(3,g,e),data:e},(j=c.enableSounds)?j=j.call(b,k):(j=b.enableSounds,j=typeof j===m?j.apply(b):j),c.enableSounds||(j=p.call(b,j,k)),(j||0===j)&&(l+=j),l+='/>        Play a sound when a new chat or text message is received        <span class="icon"></span>      </label>    </div>  </li>  <li class="cf">    <div class="options-label">        Visible Contacts    </div>    <div class="options-content">      <label class="cbox">    <input type="checkbox" name="mim-showOnlyBuddiesCheckbox" id="mim-showOnlyBuddiesCheckbox" ',k={hash:{},inverse:o.noop,fn:o.program(3,g,e),data:e},(j=c.showOnlyBuddies)?j=j.call(b,k):(j=b.showOnlyBuddies,j=typeof j===m?j.apply(b):j),c.showOnlyBuddies||(j=p.call(b,j,k)),(j||0===j)&&(l+=j),l+='/>    Show only Yahoo Messenger List Contacts        <span class="icon"></span>    </label>    </div>  </li>  <li class="cf mim-options-ignore">    <div class="options-label">        Block Users    </div>    <div class="options-content">   <div>      <label class="rbtn">    <input class="mim-option-radio" type="radio" title="Click to ignore incoming messages from anyone who is not in my Contacts List" name="mim-blockPreference" id="mim-blockNonBuddies" value="nonBuddies"/>          <span class="icon"></span>    Block all users not in my Contact List. I will not be able to send or receive messages from users not in my Contact List.        </label>      </div>      <div>        <label class="rbtn">    <input class="mim-option-radio" type="radio" title="Click to allow incoming messages from anyone" name="mim-blockPreference" value="selectedUsers" id="mim-blockSelected" checked="checked"/>          <span class="icon"></span>    Block users in the Block list below. I will not be able to send or receive instant messages from users in this list.        </label>      </div>      <div>    <p id="mim-offlineError" class="mim-error hidden">You must be signed in to Yahoo Messenger to manage your block list.</p>    </div>        <select id="mim-blocklist" name="mim-blocklist" multiple="multiple" size="6">    </select>    <div class="mim-blocklist-buttons">        <button class="btn small left right" title="Add" id="mim-addBlockedUserButton">Add</button>        <button class="btn small left right" title="Remove" id="mim-removeBlockedUserButton">Remove</button>   </div>   </div>  </li>  <li class="cf">    <div class="options-label">        Conversation History    </div>    <div class="options-content">    <label class="cbox">    <input type="checkbox" id="mim-enableSSACheckbox" title="Click to disable conversation archiving" checked="checked" disabled="disabled"/>    Keep a history of my conversations    <span class="icon"></span>    </label>    </div>  </li>  ',k={hash:{},inverse:o.noop,fn:o.program(5,h,e),data:e},(j=c.smsEnabled)?j=j.call(b,k):(j=b.smsEnabled,j=typeof j===m?j.apply(b):j),c.smsEnabled||(j=p.call(b,j,k)),(j||0===j)&&(l+=j),l+="</ul>"}),a.Tictac.mim.rollups.dialog_footer=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return"        <br/>        "}function g(a,b){var d,e,f="";return f+='    <div class="mim-dialog-buttons modal-ft">        <span class="btn left right default mim-button-ok">            <a href="#" title="OK" data-action="continue">OK</a>        </span>        <span class="btn left right mim-button-cancel ',e={hash:{},inverse:l.noop,fn:l.program(4,h,b),data:b},(d=c.hideCancel)?d=d.call(a,e):(d=a.hideCancel,d=typeof d===m?d.apply(a):d),c.hideCancel||(d=n.call(a,d,e)),(d||0===d)&&(f+=d),f+='">            <a href="#" title="Cancel" data-action="cancel">Cancel</a>        </span>    </div>    '}function h(a,b){return"hidden"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j,k="",l=this,m="function",n=c.blockHelperMissing;return j={hash:{},inverse:l.program(1,f,e),fn:l.noop,data:e},(i=c.newDialogTheme)?i=i.call(b,j):(i=b.newDialogTheme,i=typeof i===m?i.apply(b):i),c.newDialogTheme||(i=n.call(b,i,j)),(i||0===i)&&(k+=i),k+="    ",j={hash:{},inverse:l.noop,fn:l.program(3,g,e),data:e},(i=c.showButtons)?i=i.call(b,j):(i=b.showButtons,i=typeof i===m?i.apply(b):i),c.showButtons||(i=n.call(b,i,j)),(i||0===i)&&(k+=i),k+="</form>    </div></div>"}),a.Tictac.mim.rollups.presence=a.Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function";return g+='<div class="listnav-label"  data-mover="true">    <div class="mim-presence-state-full itemlist">        <button class="mim-presence-state" type="button" data-move="false" title="Click to change status"><i class="mim-presence-message icon" data-move="false">',(f=c.presenceMessage)?f=f.call(b,{hash:{},data:e}):(f=b.presenceMessage,f=typeof f===h?f.apply(b):f),(f||0===f)&&(g+=f),g+='</i><span class="mim-dropdown-arrow" data-move="false"></span></button>    </div>    <div id="mim-user-location" class="hidden">    </div></div>'}),a.Tictac.mim.rollups.form_dialog_header=a.Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<div class="modal mim-form-dialog">    <h2 class="modal-hd mim-dialog-header">        <span class="mim-dialog-header-text">',(f=c.title)?f=f.call(b,{hash:{},data:e}):(f=b.title,f=typeof f===h?f.apply(b):f),g+=i(f)+'</span>    </h2>    <div class="mim-dialog-body">'})},"1.0.0",{requires:["handlebars-base"]});YUI.add("tictac-base-rollups",function(a){a.namespace("Tictac.base.rollups"),a.Tictac.base.rollups.rte_storm_color=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return"title='No color'"}function g(a,b){return"    <a class='icon icon-none'></a>    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i,j="",k="function",l=this.escapeExpression,m=this,n=c.blockHelperMissing;return j+='<li unselectable="on" style="background-color: ',(h=c.color)?h=h.call(b,{hash:{},data:e}):(h=b.color,h=typeof h===k?h.apply(b):h),j+=l(h)+';" ',i={hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e},(h=c.transparent)?h=h.call(b,i):(h=b.transparent,h=typeof h===k?h.apply(b):h),c.transparent||(h=n.call(b,h,i)),(h||0===h)&&(j+=h),j+=' data-value="',(h=c.color)?h=h.call(b,{hash:{},data:e}):(h=b.color,h=typeof h===k?h.apply(b):h),j+=l(h)+'" role="presentation">    ',i={hash:{},inverse:m.noop,fn:m.program(3,g,e),data:e},(h=c.transparent)?h=h.call(b,i):(h=b.transparent,h=typeof h===k?h.apply(b):h),c.transparent||(h=n.call(b,h,i)),(h||0===h)&&(j+=h),j+='<a href="#" role="menuitem" tabindex="-1"></a></li>'}),a.Tictac.base.rollups.richselect_button=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return"neo-tooltip"}function g(a,b){return'<span class="arrow-down"></span>'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i="",j="function",k=this.escapeExpression,l=this;return i+='<button aria-haspopup="true" data-value="',(h=c.value)?h=h.call(b,{hash:{},data:e}):(h=b.value,h=typeof h===j?h.apply(b):h),i+=k(h)+'" data-name="',(h=c.name)?h=h.call(b,{hash:{},data:e}):(h=b.name,h=typeof h===j?h.apply(b):h),i+=k(h)+'" class="small richselect ',h=c.if.call(b,b.tooltip,{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+='" type="button" title="',(h=c.tooltip)?h=h.call(b,{hash:{},data:e}):(h=b.tooltip,h=typeof h===j?h.apply(b):h),i+=k(h)+'">    <span class="btn-text">',(h=c.buttonText)?h=h.call(b,{hash:{},data:e}):(h=b.buttonText,h=typeof h===j?h.apply(b):h),i+=k(h)+"</span>    ",h=c.if.call(b,b.showArrow,{hash:{},inverse:l.noop,fn:l.program(3,g,e),data:e}),(h||0===h)&&(i+=h),i+="</button>"}),a.Tictac.base.rollups.confirm_dialog=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return'data-mover="true"'}function g(a,b){return"hidden"}function h(a,b){var d,e="";return e+='<p class="description">',(d=c.description)?d=d.call(a,{hash:{},data:b}):(d=a.description,d=typeof d===o?d.apply(a):d),e+=p(d)+"</p>"}function i(a,b){var d,e="";return e+='<div class="alert-icon"><img src="',(d=c.iconSrc)?d=d.call(a,{hash:{},data:b}):(d=a.iconSrc,d=typeof d===o?d.apply(a):d),e+=p(d)+'" alt="',(d=c.iconAlt)?d=d.call(a,{hash:{},data:b}):(d=a.iconAlt,d=typeof d===o?d.apply(a):d),e+=p(d)+'"/></div>'}function j(a,b){var d,e,f="";return f+='        <button type="button" class="left right default btn" data-action="continue">',(d=c.okLabel)?d=d.call(a,{hash:{},data:b}):(d=a.okLabel,d=typeof d===o?d.apply(a):d),f+=p(d)+'</button>        <button type="button" class="left right ',e={hash:{},inverse:q.noop,fn:q.program(3,g,b),data:b},(d=c.hideCancel)?d=d.call(a,e):(d=a.hideCancel,d=typeof d===o?d.apply(a):d),c.hideCancel||(d=r.call(a,d,e)),(d||0===d)&&(f+=d),f+=' btn" data-action="cancel">',(d=c.cancelLabel)?d=d.call(a,{hash:{},data:b}):(d=a.cancelLabel,d=typeof d===o?d.apply(a):d),f+=p(d)+"</button>    "}function k(a,b){return'    <div data-resizer="true"></div>    '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var l,m,n="",o="function",p=this.escapeExpression,q=this,r=c.blockHelperMissing;return n+='<div class="modal xxl base-dialog hidden"><h2 class="modal-hd" ',m={hash:{},inverse:q.noop,fn:q.program(1,f,e),data:e},(l=c.movable)?l=l.call(b,m):(l=b.movable,l=typeof l===o?l.apply(b):l),c.movable||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+=">    ",(l=c.title)?l=l.call(b,{hash:{},data:e}):(l=b.title,l=typeof l===o?l.apply(b):l),n+=p(l)+'    <span class="icon close ',m={hash:{},inverse:q.noop,fn:q.program(3,g,e),data:e},(l=c.hideClose)?l=l.call(b,m):(l=b.hideClose,l=typeof l===o?l.apply(b):l),c.hideClose||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+='" data-action="cancel" data-move="false" title="Close"></span></h2>',m={hash:{},inverse:q.noop,fn:q.program(5,h,e),data:e},(l=c.hasDescription)?l=l.call(b,m):(l=b.hasDescription,l=typeof l===o?l.apply(b):l),c.hasDescription||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+='<div class="modal-bd">    ',m={hash:{},inverse:q.noop,fn:q.program(7,i,e),data:e},(l=c.iconSrc)?l=l.call(b,m):(l=b.iconSrc,l=typeof l===o?l.apply(b):l),c.iconSrc||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+='    <p class="error-msg hidden"></p>    <div class="confirm-body">',(l=c.message)?l=l.call(b,{hash:{},data:e}):(l=b.message,l=typeof l===o?l.apply(b):l),(l||0===l)&&(n+=l),n+='</div></div><div class="modal-ft">    ',m={hash:{},inverse:q.program(9,j,e),fn:q.noop,data:e},(l=c.hideButtons)?l=l.call(b,m):(l=b.hideButtons,l=typeof l===o?l.apply(b):l),c.hideButtons||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+="    ",m={hash:{},inverse:q.noop,fn:q.program(11,k,e),data:e},(l=c.resizable)?l=l.call(b,m):(l=b.resizable,l=typeof l===o?l.apply(b):l),c.resizable||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+="</div></div>"}),a.Tictac.base.rollups.richselect_menu=a.Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div class="richselect-menu optionMenu hidden" tabindex="-1"></div>'}),a.Tictac.base.rollups.richselect_option=a.Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<li class="richselect-option" unselectable="on" tabindex="0" data-index="',(f=c.index)?f=f.call(b,{hash:{},data:e}):(f=b.index,f=typeof f===h?f.apply(b):f),g+=i(f)+'" style="',(f=c.css)?f=f.call(b,{hash:{},data:e}):(f=b.css,f=typeof f===h?f.apply(b):f),g+=i(f)+'" data-value="',(f=c.value)?f=f.call(b,{hash:{},data:e}):(f=b.value,f=typeof f===h?f.apply(b):f),g+=i(f)+'">',(f=c.text)?f=f.call(b,{hash:{},data:e}):(f=b.text,f=typeof f===h?f.apply(b):f),g+=i(f)+"</li>"}),a.Tictac.base.rollups.rte_color=a.Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<li unselectable="on" class="rte-color-selection" role="presentation" data-action="forecolor" data-value="',(f=c.color)?f=f.call(b,{hash:{},data:e}):(f=b.color,f=typeof f===h?f.apply(b):f),g+=i(f)+'" style="background-color: ',(f=c.color)?f=f.call(b,{hash:{},data:e}):(f=b.color,f=typeof f===h?f.apply(b):f),g+=i(f)+';">    <a unselectable="on" href="#" role="menuitem" tabindex="-1"></a></li>'}),a.Tictac.base.rollups.dialog_view=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return'data-mover="true"'}function g(a,b){return"hidden"}function h(a,b){var d,e="";return e+='<p class="description">',(d=c.description)?d=d.call(a,{hash:{},data:b}):(d=a.description,d=typeof d===n?d.apply(a):d),e+=o(d)+"</p>"}function i(a,b){var d,e,f="";return f+='        <button type="button" class="left right default btn" data-action="continue">',(d=c.okLabel)?d=d.call(a,{hash:{},data:b}):(d=a.okLabel,d=typeof d===n?d.apply(a):d),f+=o(d)+'</button>        <button type="button" class="left right ',e={hash:{},inverse:p.noop,fn:p.program(3,g,b),data:b},(d=c.hideCancel)?d=d.call(a,e):(d=a.hideCancel,d=typeof d===n?d.apply(a):d),c.hideCancel||(d=q.call(a,d,e)),(d||0===d)&&(f+=d),f+=' btn" data-action="cancel">',(d=c.cancelLabel)?d=d.call(a,{hash:{},data:b}):(d=a.cancelLabel,d=typeof d===n?d.apply(a):d),f+=o(d)+"</button>    "}function j(a,b){return'    <div data-resizer="true"></div>    '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var k,l,m="",n="function",o=this.escapeExpression,p=this,q=c.blockHelperMissing;return m+='<div class="modal xxl base-dialog hidden"><h2 class="modal-hd" ',l={hash:{},inverse:p.noop,fn:p.program(1,f,e),data:e},(k=c.movable)?k=k.call(b,l):(k=b.movable,k=typeof k===n?k.apply(b):k),c.movable||(k=q.call(b,k,l)),(k||0===k)&&(m+=k),m+=">    ",(k=c.title)?k=k.call(b,{hash:{},data:e}):(k=b.title,k=typeof k===n?k.apply(b):k),m+=o(k)+'    <span class="icon close ',l={hash:{},inverse:p.noop,fn:p.program(3,g,e),data:e},(k=c.hideClose)?k=k.call(b,l):(k=b.hideClose,k=typeof k===n?k.apply(b):k),c.hideClose||(k=q.call(b,k,l)),(k||0===k)&&(m+=k),m+='" data-action="cancel" data-move="false" title="Close"></span></h2>',l={hash:{},inverse:p.noop,fn:p.program(5,h,e),data:e},(k=c.hasDescription)?k=k.call(b,l):(k=b.hasDescription,k=typeof k===n?k.apply(b):k),c.hasDescription||(k=q.call(b,k,l)),(k||0===k)&&(m+=k),m+='<div class="modal-bd"></div><div class="modal-ft">    ',l={hash:{},inverse:p.program(7,i,e),fn:p.noop,data:e},(k=c.hideButtons)?k=k.call(b,l):(k=b.hideButtons,k=typeof k===n?k.apply(b):k),c.hideButtons||(k=q.call(b,k,l)),(k||0===k)&&(m+=k),m+="    ",l={hash:{},inverse:p.noop,fn:p.program(9,j,e),data:e},(k=c.resizable)?k=k.call(b,l):(k=b.resizable,k=typeof k===n?k.apply(b):k),c.resizable||(k=q.call(b,k,l)),(k||0===k)&&(m+=k),m+="</div></div>"}),a.Tictac.base.rollups.rte_toolbar=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return'    <button aria-haspopup="true" class="small rte-color-back left right neo-tooltip"        title="Set text highlight color" type="button" data-action="color-back"><span class="btn-text">Text highlight color</span></button>    </li>    '}function g(a,b){return'    <li class="unselected rte-list-type">    <button aria-haspopup="true" class="small rte-bulleted left right neo-tooltip"        title="Bulleted List" type="button" data-action="bulleted"><span class="btn-text">Bulleted List</span></button>    </li>    <li class="unselected rte-list-type">    <button aria-haspopup="true" class="small rte-numbered left right neo-tooltip"        title="Numbered List" type="button" data-action="numbered"><span class="btn-text">Numbered List</span></button>    </li>    '}function h(a,b){return'    <li class="unselected rte-layout">    <button aria-haspopup="true" class="small rte-indent left right neo-tooltip"        title="Indent More" type="button" data-action="indent"><span class="btn-text">Indent More</span></button>    </li>    <li class="unselected rte-layout">    <button aria-haspopup="true" class="small rte-align-left left right neo-tooltip"        title="Align Left" type="button" data-action="align-left"><span class="btn-text">Align Left</span></button>    </li>      <li class="unselected rte-layout">    <button aria-haspopup="true" class="small rte-align-center left right neo-tooltip"        title="Align Center" type="button" data-action="align-center"><span class="btn-text">Align Center</span></button>    </li>      '}function i(a,b){return'    <li class="unselected">    <button aria-haspopup="true" class="small rte-link left right neo-tooltip"        title="Insert Link" type="button" data-action="link"><span class="btn-text">Insert Link</span></button>    </li>    '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k,l="",m=this,n="function",o=c.blockHelperMissing;return l+='<ul class="rte-toolbar">    <li class="unselected rte-font-select"></li>    <li class="unselected rte-fontsize-select"></li>    <li class="unselected">    <button class="small rte-bold left neo-tooltip" title="Bold" type="button"        data-action="bold"><span class="btn-text">Bold</span></button>    </li>    <li class="unselected">    <button class="small rte-italic neo-tooltip" title="Italicize" type="button"        data-action="italic"><span class="btn-text">Italic</span></button>    </li>    <li class="unselected">    <button aria-haspopup="true" class="small rte-color left right neo-tooltip"        title="Set text color" type="button" data-action="color"><span class="btn-text">Text color</span></button>    </li>    <li class="unselected">    ',k={hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e},(j=c.showBackgroundColor)?j=j.call(b,k):(j=b.showBackgroundColor,j=typeof j===n?j.apply(b):j),c.showBackgroundColor||(j=o.call(b,j,k)),(j||0===j)&&(l+=j),l+="    ",k={hash:{},inverse:m.noop,fn:m.program(3,g,e),data:e},(j=c.showLists)?j=j.call(b,k):(j=b.showLists,j=typeof j===n?j.apply(b):j),c.showLists||(j=o.call(b,j,k)),(j||0===j)&&(l+=j),l+="    ",k={hash:{},inverse:m.noop,fn:m.program(5,h,e),data:e},(j=c.showLayout)?j=j.call(b,k):(j=b.showLayout,j=typeof j===n?j.apply(b):j),c.showLayout||(j=o.call(b,j,k)),(j||0===j)&&(l+=j),l+="    ",k={hash:{},inverse:m.noop,fn:m.program(7,i,e),data:e},(j=c.showLink)?j=j.call(b,k):(j=b.showLink,j=typeof j===n?j.apply(b):j),c.showLink||(j=o.call(b,j,k)),(j||0===j)&&(l+=j),l+="</ul>"}),a.Tictac.base.rollups.dialog_header=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return'data-mover="true"'}function g(a,b){return"hidden"}function h(a,b){var d,e="";return e+='<p class="description">',(d=c.description)?d=d.call(a,{hash:{},data:b}):(d=a.description,d=typeof d===l?d.apply(a):d),e+=m(d)+"</p>"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j,k="",l="function",m=this.escapeExpression,n=this,o=c.blockHelperMissing;return k+='<div class="modal xxl base-dialog hidden"><h2 class="modal-hd" ',j={hash:{},inverse:n.noop,fn:n.program(1,f,e),data:e},(i=c.movable)?i=i.call(b,j):(i=b.movable,i=typeof i===l?i.apply(b):i),c.movable||(i=o.call(b,i,j)),(i||0===i)&&(k+=i),k+=">    ",(i=c.title)?i=i.call(b,{hash:{},data:e}):(i=b.title,i=typeof i===l?i.apply(b):i),k+=m(i)+'    <span class="icon close ',j={hash:{},inverse:n.noop,fn:n.program(3,g,e),data:e},(i=c.hideClose)?i=i.call(b,j):(i=b.hideClose,i=typeof i===l?i.apply(b):i),c.hideClose||(i=o.call(b,i,j)),(i||0===i)&&(k+=i),k+='" data-action="cancel" data-move="false" title="Close"></span></h2>',j={hash:{},inverse:n.noop,fn:n.program(5,h,e),data:e},(i=c.hasDescription)?i=i.call(b,j):(i=b.hasDescription,i=typeof i===l?i.apply(b):i),c.hasDescription||(i=o.call(b,i,j)),(i||0===i)&&(k+=i),k+='<div class="modal-bd">'}),a.Tictac.base.rollups.dialog_footer=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='        <button type="button" class="left right default btn" data-action="continue">',(d=c.okLabel)?d=d.call(a,{hash:{},data:b}):(d=a.okLabel,d=typeof d===l?d.apply(a):d),f+=m(d)+'</button>        <button type="button" class="left right ',e={hash:{},inverse:n.noop,fn:n.program(2,g,b),data:b},(d=c.hideCancel)?d=d.call(a,e):(d=a.hideCancel,d=typeof d===l?d.apply(a):d),c.hideCancel||(d=o.call(a,d,e)),(d||0===d)&&(f+=d),f+=' btn" data-action="cancel">',(d=c.cancelLabel)?d=d.call(a,{hash:{},data:b}):(d=a.cancelLabel,d=typeof d===l?d.apply(a):d),f+=m(d)+"</button>    "}function g(a,b){return"hidden"}function h(a,b){return'    <div data-resizer="true"></div>    '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j,k="",l="function",m=this.escapeExpression,n=this,o=c.blockHelperMissing;return k+='</div><div class="modal-ft">    ',j={hash:{},inverse:n.program(1,f,e),fn:n.noop,data:e},(i=c.hideButtons)?i=i.call(b,j):(i=b.hideButtons,i=typeof i===l?i.apply(b):i),c.hideButtons||(i=o.call(b,i,j)),(i||0===i)&&(k+=i),k+="    ",j={hash:{},inverse:n.noop,fn:n.program(4,h,e),data:e},(i=c.resizable)?i=i.call(b,j):(i=b.resizable,i=typeof i===l?i.apply(b):i),c.resizable||(i=o.call(b,i,j)),(i||0===i)&&(k+=i),k+="</div></div>"})},"1.0.0",{requires:["handlebars-base"]});"use strict";YUI.add("tictac-base-viewutils",function(a){var b=a.Tictac.base.rollups,c=a.Tictac.base.strings,d=a.one("html");a.namespace("Tictac.base").ViewUtils={alert:function(a){return a.hideCancel=!0,a.title="undefined"==typeof a.title?c.str_conv_dialog_alert:a.title,this.confirm(a)},confirm:function(d){function e(){a.Array.each(w,function(a){a&&a.detach&&a.detach()}),d&&d.refocusNode?d.refocusNode.focus():x&&x.focus()}function f(b){a.later(0,null,function(){n=l.one("input[value='']"),n||(n=l.one("textarea")),n?n.focus():b&&b.focus()})}function g(b){var c;d&&d.focusNodeSelector?(c=a.one(d.focusNodeSelector),c&&c.focus()):f(b)}function h(b){var c=l.one(".error-msg");b?(c.setHTML(a.Escape.html(b)),c.removeClass("hidden")):(v.hideModalBacker(),e(),l.remove(!0))}function i(a){if(9===a.keyCode){var b=l.one("input, textarea, button, a"),c=l.one('.modal-ft [data-action="cancel"]')||l.one('.modal-ft [data-action="continue"]');document.activeElement!==c.getDOMNode()||a.shiftKey?document.activeElement===b.getDOMNode()&&a.shiftKey&&((c||l).focus(),a.halt()):((b||l).focus(),a.halt())}}function j(b){var e,f,g=l.one(".error-msg");if(g.addClass("hidden"),d.callback){e=l.one("form"),e&&(e=v.serializeForm(e));try{d.async?(v.showModalBacker(),d.callback(e,function(a){h(a),v.hideModalBacker()})):h(d.callback(e))}catch(i){a.log("Error caught when invoking OK callback: "+i.message,"warn","viewutils"),f=c.str_msgr_server_error_1}}else h();b.preventDefault()}function k(a){e(),d.cancelCallback&&d.cancelCallback(),v.hideModalBacker(),l.remove(!0),a.preventDefault()}var l,m,n,o,p,q,r,s,t,u,v=this,w=[],x=document.activeElement;return d.title="undefined"==typeof d.title?c.str_conv_dialog_confirm:d.title,d.showButtons=!0,d.okLabel=d.okLabel||c.str_ok,d.cancelLabel=d.cancelLabel||c.str_cancel,l=a.Node.create(b.confirm_dialog(d)),l.all("input.bidi-auto-detection").each(function(b){b.plug(a.Plugin.BidiTextEntry).setAttribute("dir",a.Intl.detectDirection(b.get("value")))}),d.movable=!0,d.cssClass&&l.addClass(d.cssClass),p=l.one('button[data-action="continue"]'),q=l.one('button[data-action="cancel"]'),s=l.one(".modal-ft").all("button"),w.push(l.on("keydown",i)),w.push(a.on("resize",function(){v.limitToViewport(l)},window)),w.push(l.all('[data-action="continue"]').on("click",j)),w.push(l.all('[data-action="cancel"]').on("click",k)),t=this.showModalBacker()+1,l.setStyle("zIndex",t),l.removeClass("hidden"),u=a.one("div.modal"),u&&!u.hasClass("hidden")&&l.addClass("opaque"),l.addClass("confirm-dialog"),a.one(document.body).append(l),m=l.getDOMNode(),d.left?a.Tictac.base.isRTL?l.setStyle("right",d.left):l.setStyle("left",d.left):(o=-m.offsetWidth/2,a.Tictac.base.isRTL?l.setStyle("marginRight",o+"px"):l.setStyle("marginLeft",o+"px")),d.top?l.setStyle("top",d.top):(r=-m.offsetHeight/2,l.setStyle("marginTop",r+"px")),d.rearrangeCallback&&d.rearrangeCallback(),w.push(l.on("keydown",function(a){13===a.keyCode?a.target!==q&&j(a):27===a.keyCode&&k(a)})),this.limitToViewport(l),g(p),l},limitToViewport:function(a){if(!a.hasClass("hidden")){var b,c,d,e,f,g=this.getWindowSize();e=a.one("div.base-dialog-body"),e&&e.setStyle("height","auto"),b={left:a.get("offsetLeft"),top:a.get("offsetTop"),width:a.get("clientWidth"),height:a.get("clientHeight")},b.right=b.left+b.width,b.bottom=b.top+b.height,b.left<0?c="0px":b.right>g.width&&(c=g.width-b.width+"px"),g.height-b.height<=50?(d="25px",e&&(f=e.get("region"),e.setStyle("height",g.height-(b.height-f.height)-50+"px"))):b.top<g.scrollTop?d="0px":b.bottom>g.height+g.scrollTop&&(d=g.height-b.height+"px"),a.setStyle("maxHeight",g.height-50+"px"),c&&(a.setStyle("left",c),a.setStyle("marginLeft","0px"),a.setStyle("marginRight","0px")),d&&(a.setStyle("top",d),a.setStyle("marginTop","0px"))}},getWindowSize:function(){var a,b,c=document.body.scrollTop,d=document.body.scrollHeight;return a=window,b="inner","innerWidth"in window||(b="client",a=document.documentElement||document.body),{height:a[b+"Height"],width:a[b+"Width"],scrollTop:c,scrollHeight:d}},showModalBacker:function(){var b=a.Node.create("<div class='modal-backing-div'></div>");return b.on("click",function(a){a.halt()}),b.on("mousedown",function(a){a.halt()}),b.on("mouseup",function(a){a.halt()}),a.one(".modal-backing-div")&&b.addClass("stacked"),a.one(document.body).append(b),d.addClass("dlg-show"),this.bringToFront(b)},hideModalBacker:function(){var b,c,e=a.all(".modal-backing-div"),f=null;if(e.size()){for(b=0,c=e.size();c>b;b++)f?e.item(b).getComputedStyle("zIndex")>f.getComputedStyle("zIndex")&&(f=e.item(b)):f=e.item(b);f.remove(!0),1===e.size()&&d.removeClass("dlg-show")}},bringToFront:function(b){var c=a.all(".base-dialog, .modal-backing-div, #yucs-top-bar, .yucs-fl-left"),d=29e3;return c.each(function(a){if(b!==a){var c=+a.getStyle("zIndex");!isNaN(c)&&c>=d&&(d=c+1)}}),b.setStyle("zIndex",d),d},serializeForm:function(b){var c,d={};if(b.one)c=b;else{if(c=document.forms[b]||document.getElementById(b),!c)return null;c=a.Node(c)}return c.get("elements").each(function(a){var b=a.get("name")||a.getAttribute("data-name"),c=a.get("type").toLowerCase();switch(c){case"text":case"hidden":case"textarea":case"password":d[b]=a.get("value");break;case"radio":case"checkbox":a.get("checked")===!0&&(d[b]=a.get("value"));break;case"select-one":a.all("option").each(function(a){a.get("selected")&&(d[b]=a.get("value"))});break;case"button":a.hasClass("richselect")&&b&&(d[b]=a.getAttribute("data-value"))}}),d},disableSelection:function(b){var c=b.getDOMNode();b.setStyle("WebkitUserSelect","none"),b.setStyle("MozUserSelect","none"),b.setStyle("msUserSelect","none"),b.setStyle("userSelect","none"),a.UA.ie&&a.UA.ie<=8&&(c.__onselectstart__=c.onselectstart,c.__ondragstart__=c.ondragstart,c.onselectstart=function(){return!1},c.ondragstart=function(){return!1})},enableSelection:function(b){var c=b.getDOMNode();b.setStyle("WebkitUserSelect","text"),b.setStyle("MozUserSelect","text"),b.setStyle("msUserSelect","text"),b.setStyle("userSelect","text"),a.UA.ie&&a.UA.ie<=8&&(c.onselectstart=c.__onselectstart__,c.ondragstart=c.__ondragstart__)}}},"1.0.0",{requires:["tictac-base-rollups","tictac-base-strings","comms-bidi-textentry","comms-intl-bidi","base-viewutils-css"]});YUI.add("tictac-base-view",function(a){"use strict";function b(b){var c=this;c.options=b||{},c.attributes={},c._previous={},b.parent?(c.parent=b.parent,"string"==typeof c.parent?c.parent=a.one(c.parent):c.parent.one||(c.parent=a.one(c.parent))):b.nextSibling||b.prevSibling||(c.parent=a.one("body")),b.model?c.model=b.model:c.collection=b.collection,c._listeners=[],_.extend(c,Backbone.Events),c.initialize&&c.initialize(b),c.constructor.plugins&&_.each(c.constructor.plugins,function(a){a.initialize(c)}),c._destroyed=!1}b.prototype={events:{},template:"<div></div>",get:function(a){return this.attributes[a]},set:function(a,b){b!==this.attributes[a]&&(this._previous[a]=this.attributes[a],this.attributes[a]=b,this.trigger("change:"+a,this))},previous:function(a){return this._previous[a]},createDOMNode:function(){return a.Node.create(this.template)},render:function(){var b,c=this;if(c.rendered)throw new Error("Render called twice for view object");c.node=c.createDOMNode(),c.options.container&&(b="string"==typeof c.options.container?a.Node.create(c.options.container):c.options.container,b.append(c.node),c.node=b),a.UA.ie>0&&c.node.setAttribute("unselectable","on"),c.options.attributes&&c.node.setAttrs(c.options.attributes),c.node.addClass("base-view"),a.Tictac.base.isRTL&&c.node.addClass("base-bidi"),a.UA.ie>0?(c.node.addClass("IE"),7===a.UA.ie&&navigator.userAgent.indexOf("Trident/")>0?(c.node.addClass("IE8"),c.node.addClass("IE8Compat")):c.node.addClass("IE"+a.UA.ie)):a.UA.gecko>0?c.node.addClass("FF"):a.UA.webkit>0&&c.node.addClass("Webkit"),c.parent?c.options.index?c.parent.insert(c.node,c.options.index):c.parent.append(c.node):c.options.prevSibling?c.options.prevSibling.insert(c.node,"after"):c.options.nextSibling.insert(c.node,"before"),c._attachEvents(),c.postRender&&c.postRender(),c.visible=!c.node.hasClass("hidden"),c.rendered=!0,c.trigger("render",c)},_attachEvents:function(){var b,c,d,e,f=this;for(b in f.events)if(f.events.hasOwnProperty(b)){if(d=f.events[b],!d||!f[d]){a.log("Error - attempted to map an event to a callback that does not exist","error","view");continue}b=b.split(" "),e=b.shift(),c=b.join(" "),f._listeners.push(f.node.delegate(e,a.bind(f[d],f),c))}if(f._listeners.push(f.node.on("focus",f._onFocus)),f._listeners.push(f.node.on("blur",f._onBlur)),a.UA.ie&&a.UA.ie<9){var g='input[type="checkbox"], input[type="radio"]';f._listeners.push(f.node.delegate("click",f._ie8ChangeEvtWorkaround,g))}},show:function(){var a=this;a.node&&a.node.removeClass("hidden"),a.visible=!0,a.trigger("show",a)},hide:function(){this.isVisible()&&(this.node.addClass("hidden"),this.visible=!1,this.trigger("hide",this))},isVisible:function(){return this.visible},destroy:function(){for(this.onDestroy&&this.onDestroy(),this.node&&(this.node.remove(),this.node.destroy(!0),delete this.node);this._listeners.length;)this._listeners.pop().detach();this.trigger("destroy",this),this.off(),this._destroyed=!0},_ie8ChangeEvtWorkaround:function(a){a.target.blur(),a.target.focus()},_onFocus:function(b){var c=b.target.getDOMNode(),d=c.parentNode;"LABEL"===d.nodeName&&a.one(d).addClass("focus")},_onBlur:function(b){var c=b.target.getDOMNode(),d=c.parentNode;"LABEL"===d.nodeName&&a.one(d).removeClass("focus")}},b.extend=Backbone.Model.extend,a.namespace("Tictac.base").View=b},"@VERSION@",{requires:["node","tictac-base-css","tictac-base-viewutils","backbone"]});YUI.add("tictac-base-dialogview",function(a){"use strict";var b,c=a.Tictac.base.View,d=a.Tictac.base.ViewUtils,e=a.Tictac.base.rollups,f=a.Tictac.base.strings;b=c.extend({render:function(){var b=this;c.prototype.render.apply(b,arguments),"undefined"==typeof b.options.limitToViewport&&(b.options.limitToViewport=!0),b.options.resizable&&(b.minHeight=b.options.minHeight||100,b.minWidth=b.options.minWidth||100,b._enableResize()),b.options.movable&&b._enableMove(),"undefined"==typeof b.options.modal&&("undefined"==typeof b.modal?b.options.modal=!0:b.options.model=b.modal),"undefined"==typeof b.options.centerOnShow&&(b.options.centerOnShow=!0),b._listeners.push(b.node.on("mousedown",function(){b.onActivate()})),b._listeners.push(b.node.on("keydown",function(a){27===a.keyCode&&(b.hide(),a.halt()),a.stopPropagation()})),b.options.limitToViewport&&b._listeners.push(a.on("resize",function(){b.visible&&d.limitToViewport(b.node)},window))},createDOMNode:function(){var b=this,c={title:b.title||"",hideClose:b.hideClose||!1,description:b.description||"",hasDescription:!!b.description,hideButtons:b.hideButtons||!1,hideCancel:b.hideCancel||!1,okLabel:b.okLabel||f.str_ok,cancelLabel:b.cancelLabel||f.str_cancel,resizable:b.options.resizable,movable:b.options.movable},d=a.Node.create(e.dialog_view(c));return b.renderContent(d.one(".modal-bd")),b._listeners.push(d.all('[data-action="cancel"]').on("click",function(){b.trigger("cancel",b),b.hide()})),b._listeners.push(d.all('[data-action="continue"]').on("click",function(){b.trigger("continue",b),b.hide()})),b._listeners.push(d.on("keydown",b._jailFocus,b)),d.setAttribute("tabindex",0),d},renderContent:function(){},show:function(){var b,e,f=this;f._refocusNode=document.activeElement,c.prototype.show.apply(f,arguments),f.options.centerOnShow&&(b=-f.node.get("offsetWidth")/2,e=-f.node.get("offsetHeight")/2,f.node.setStyle("marginTop",e+"px"),a.Tictac.base.isRTL?(f.node.setStyle("marginRight",b+"px"),f.node.setStyle("right","50%")):(f.node.setStyle("marginLeft",b+"px"),f.node.setStyle("left","50%")),f.node.setStyle("top","50%")),f.options.limitToViewport&&d.limitToViewport(f.node),f.options.modal&&d.showModalBacker(),f.onActivate(),f.focusOnFirstTextNode()},hide:function(){var a=this;c.prototype.hide.call(a),a.options.modal&&d.hideModalBacker(),a._refocusNode&&a._refocusNode.focus()},_showBackingDiv:function(){var c;b._backingDiv||(c=a.Node.create("<div class='mim-backing-div'></div>"),a.one(document.body).append(c),b._backingDiv=c.getDOMNode()),b._backingDiv.style.display="block"},_hideBackingDiv:function(){b._backingDiv.style.display="none"},_enableResize:function(){this.viewResizing=!1,this._listeners.push(this.node.delegate("mousedown",a.bind(this._startResize,this),"[data-resizer]"))},_startResize:function(b){var c,e,f=this;f.viewResizing||(c=f.node.getDOMNode(),e=a.UA.ie?document:window,f.viewResizing=!0,f._showBackingDiv(),d.disableSelection(a.one(document.body)),f.node.addClass("mim-disable-selection"),f.viewInitialX=b.clientX,f.viewInitialY=b.clientY,f.viewInitialWidth=c.offsetWidth,f.viewInitialHeight=c.offsetHeight,f.viewMoveListener=a.on("mousemove",a.bind(f._resize,f),e),f.viewUpListener=a.on("mouseup",a.bind(f._stopResize,f),e),f.winWidth=c.parentElement&&c.parentElement.offsetWidth,f.winHeight=c.parentElement&&c.parentElement.offsetHeight,c.style.opacity=.8)},_resize:function(b){var c=this,d=c.node.getDOMNode(),e=c.node.get("region"),f=b.clientX-c.viewInitialX,g=b.clientY-c.viewInitialY,h=a.Tictac.base.isRTL?c.viewInitialWidth-f:c.viewInitialWidth+f,i=c.viewInitialHeight+g,j=a.Tictac.base.isRTL?e.right:c.winWidth-e.left,k=c.winHeight-e.top;h=Math.max(Math.min(h,j),c.minWidth),i=Math.max(Math.min(i,k),c.minHeight),d.style.width=h+"px",d.style.height=i+"px",c.trigger("resize",{width:h,height:i})},_stopResize:function(){var b=this,c=b.node.getDOMNode();b._hideBackingDiv(),d.enableSelection(a.one(document.body)),b.node.removeClass("mim-disable-selection"),b.viewMoveListener.detach(),b.viewUpListener.detach(),d.limitToViewport(b.node),c.style.opacity=1,b.viewResizing=!1,b.trigger("stopResize")},_enableMove:function(){this.viewMoving=!1,this._listeners.push(this.node.delegate("mousedown",a.bind(this._startMove,this),"[data-mover]"))},_startMove:function(b){var c=this;if(!c.viewMoving&&"false"!==b.target.getAttribute("data-move")&&1===b.button){var e=c.node.getDOMNode(),f=a.UA.ie?document:window,g=c.node.get("region");if("a"===b.target.get("nodeName").toLowerCase())return;c.viewMoving=!0,c._showBackingDiv(),d.disableSelection(a.one(document.body)),c.node.addClass("mim-disable-selection"),c.moveViewPrevX=b.clientX,c.moveViewPrevY=b.clientY,c.moveListener=a.on("mousemove",a.bind(c._move,c),f),c.upListener=a.on("mouseup",a.bind(c._stopMove,c),f),e.style.opacity=.8,e.style.top=g.top-document.body.scrollTop+"px",e.style.left=g.left+"px",e.style.right="auto",e.style.bottom="auto",e.style.marginLeft=0,e.style.marginTop=0,c.winWidth=e.parentElement&&e.parentElement.offsetWidth,c.winHeight=e.parentElement&&e.parentElement.offsetHeight}},_move:function(a){var b=a.clientX-this.moveViewPrevX,c=a.clientY-this.moveViewPrevY,d=this.node.getDOMNode(),e=d.offsetLeft+b,f=d.offsetTop+c;a.clientX>=0&&(!this.winWidth||a.clientX<this.winWidth)&&(this.moveViewPrevX=a.clientX,d.style.left=e+"px"),a.clientY>=0&&(!this.winHeight||a.clientY<this.winHeight)&&(d.style.top=f+"px",this.moveViewPrevY=a.clientY),this.trigger("move")},_stopMove:function(){var b=this.node.getDOMNode();d.limitToViewport(this.node),this._hideBackingDiv(),d.enableSelection(a.one(document.body)),this.node.removeClass("mim-disable-selection"),this.moveListener.detach(),this.upListener.detach(),b.style.opacity=1,this.viewMoving=!1,this.trigger("stopMove")},focusOnFirstTextNode:function(){var a=this.node.one(this.options.focusNodeSelector)||this.node.one("a, button, input, textarea")||this.node;a.focus()},onActivate:function(){var a=this;"undefined"==typeof this.options.zindex?d.bringToFront(a.node):a.node.setStyle("zIndex",this.options.zindex)},_jailFocus:function(a){if(9===a.keyCode){var b=this.node.one("input, textarea, button, a"),c=this.node.one('.modal-ft [data-action="cancel"]')||this.node.one('.modal-ft [data-action="continue"]');c&&document.activeElement===c.getDOMNode()&&!a.shiftKey?((b||this.node).focus(),a.halt()):b&&document.activeElement===b.getDOMNode()&&a.shiftKey&&((c||this.node).focus(),a.halt())}}}),a.Tictac.base.DialogView=b},"@VERSION@",{requires:["tictac-base-view","tictac-base-viewutils","tictac-base-rollups","tictac-base-strings"]});